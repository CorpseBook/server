  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 4ms (Views: 1.3ms | ActiveRecord: 1.7ms)
  [1m[35mStory Load (0.9ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "stories" ("title", "origin_latitude", "origin_longitude", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["origin_latitude", -41.2967128], ["origin_longitude", 174.77388449999998], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 01:25:48.618537"], ["updated_at", "2015-05-15 01:25:48.618537"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 26ms (Views: 0.4ms | ActiveRecord: 6.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "stories" ("title", "origin_latitude", "origin_longitude", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["origin_latitude", -41.2967128], ["origin_longitude", 174.77388449999998], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 01:25:48.634644"], ["updated_at", "2015-05-15 01:25:48.634644"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 8ms (Views: 1.0ms | ActiveRecord: 1.7ms)
  [1m[36mStory Load (1.5ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "origin_latitude", "origin_longitude", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["origin_latitude", -41.2967128], ["origin_longitude", 174.77388449999998], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 01:25:48.655161"], ["updated_at", "2015-05-15 01:25:48.655161"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "origin_latitude", "origin_longitude", "contribution_limit", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["title", "Joe's Adventure"], ["origin_latitude", -42.29], ["origin_longitude", 175.77], ["contribution_limit", 100], ["created_at", "2015-05-15 01:25:48.661537"], ["updated_at", "2015-05-15 01:25:48.661537"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"4"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 4]]
Completed 200 OK in 13ms (Views: 0.8ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"[0m  [["lat", "-36.840556"], ["lng", "174.74"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"  [["lat", "-41.288889"], ["lng", "174.777222"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"[0m  [["lat", "-41.270833"], ["lng", "173.283889"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.5ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.720627057540469)*COS(3.0504379813890687)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.720627057540469)*SIN(3.0504379813890687)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.720627057540469)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 3ms (Views: 1.1ms | ActiveRecord: 1.1ms)
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (1.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stories" ("title", "origin_latitude", "origin_longitude", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["origin_latitude", -41.2967128], ["origin_longitude", 174.77388449999998], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 01:39:14.389119"], ["updated_at", "2015-05-15 01:39:14.389119"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 21ms (Views: 0.4ms | ActiveRecord: 5.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "origin_latitude", "origin_longitude", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["origin_latitude", -41.2967128], ["origin_longitude", 174.77388449999998], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 01:39:14.404138"], ["updated_at", "2015-05-15 01:39:14.404138"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[36mStory Load (0.9ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stories" ("title", "origin_latitude", "origin_longitude", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["origin_latitude", -41.2967128], ["origin_longitude", 174.77388449999998], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 01:39:14.413695"], ["updated_at", "2015-05-15 01:39:14.413695"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.4ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "origin_latitude", "origin_longitude", "contribution_limit", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["title", "Joe's Adventure"], ["origin_latitude", -42.29], ["origin_longitude", 175.77], ["contribution_limit", 100], ["created_at", "2015-05-15 01:39:14.420973"], ["updated_at", "2015-05-15 01:39:14.420973"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"8"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 8]]
Completed 200 OK in 7ms (Views: 0.8ms | ActiveRecord: 0.6ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"[0m  [["lat", "-36.840556"], ["lng", "174.74"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"  [["lat", "-41.288889"], ["lng", "174.777222"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"[0m  [["lat", "-41.270833"], ["lng", "173.283889"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.7ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.720627057540469)*COS(3.0504379813890687)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.720627057540469)*SIN(3.0504379813890687)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.720627057540469)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "locations"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.9ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (1.2ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 8ms (Views: 1.5ms | ActiveRecord: 6.0ms)
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 14ms (ActiveRecord: 4.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mStory Load (0.2ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"  [["lat", "-36.840556"], ["lng", "174.74"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"[0m  [["lat", "-41.288889"], ["lng", "174.777222"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"  [["lat", "-41.270833"], ["lng", "173.283889"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.720627057540469)*COS(3.0504379813890687)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.720627057540469)*SIN(3.0504379813890687)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.720627057540469)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"[0m  [["lat", "-36.840556"], ["lng", "174.74"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.8ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 4ms (Views: 1.3ms | ActiveRecord: 2.4ms)
  [1m[35mStory Load (1.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 15ms (ActiveRecord: 4.8ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"[0m  [["lat", "-36.840556"], ["lng", "174.74"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"  [["lat", "-41.288889"], ["lng", "174.777222"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"[0m  [["lat", "-41.270833"], ["lng", "173.283889"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.9ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.720627057540469)*COS(3.0504379813890687)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.720627057540469)*SIN(3.0504379813890687)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.720627057540469)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"  [["lat", "-36.840556"], ["lng", "174.74"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.5ms | ActiveRecord: 2.6ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 15ms (ActiveRecord: 4.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"[0m  [["lat", "-36.840556"], ["lng", "174.74"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"  [["lat", "-41.288889"], ["lng", "174.777222"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"[0m  [["lat", "-41.270833"], ["lng", "173.283889"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.9ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.720627057540469)*COS(3.0504379813890687)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.720627057540469)*SIN(3.0504379813890687)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.720627057540469)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"  [["lat", "-36.840556"], ["lng", "174.74"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"[0m  [["lat", "-41.288889"], ["lng", "174.777222"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"  [["lat", "-41.270833"], ["lng", "173.283889"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 6ms (Views: 2.1ms | ActiveRecord: 2.9ms)
  [1m[35mStory Load (0.9ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 20ms (ActiveRecord: 4.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"[0m  [["lat", "-36.840556"], ["lng", "174.74"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"  [["lat", "-41.288889"], ["lng", "174.777222"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"[0m  [["lat", "-41.270833"], ["lng", "173.283889"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.7ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.720627057540469)*COS(3.0504379813890687)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.720627057540469)*SIN(3.0504379813890687)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.720627057540469)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"  [["lat", "-36.840556"], ["lng", "174.74"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"[0m  [["lat", "-41.288889"], ["lng", "174.777222"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng") VALUES ($1, $2) RETURNING "id"  [["lat", "-41.270833"], ["lng", "173.283889"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 4ms (Views: 1.3ms | ActiveRecord: 1.7ms)
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 15ms (ActiveRecord: 5.0ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:05:00.703595"], ["updated_at", "2015-05-15 02:05:00.703595"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:05:00.712760"], ["updated_at", "2015-05-15 02:05:00.712760"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:05:00.716736"], ["updated_at", "2015-05-15 02:05:00.716736"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.0ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:05:00.730960"], ["updated_at", "2015-05-15 02:05:00.730960"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:05:00.736028"], ["updated_at", "2015-05-15 02:05:00.736028"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:05:00.739826"], ["updated_at", "2015-05-15 02:05:00.739826"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 6ms (Views: 2.4ms | ActiveRecord: 2.5ms)
  [1m[35mStory Load (0.9ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 16ms (ActiveRecord: 3.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.2ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:08:54.907273"], ["updated_at", "2015-05-15 02:08:54.907273"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:08:54.917288"], ["updated_at", "2015-05-15 02:08:54.917288"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:08:54.919998"], ["updated_at", "2015-05-15 02:08:54.919998"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.9ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:08:54.931144"], ["updated_at", "2015-05-15 02:08:54.931144"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:08:54.934691"], ["updated_at", "2015-05-15 02:08:54.934691"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:08:54.938614"], ["updated_at", "2015-05-15 02:08:54.938614"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:08:54.941660"], ["updated_at", "2015-05-15 02:08:54.941660"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
PG::UndefinedColumn: ERROR:  column locations.locatable_id does not exist
LINE 1: SELECT  "locations".* FROM "locations" WHERE "locations"."lo...
                                                     ^
: SELECT  "locations".* FROM "locations" WHERE "locations"."locatable_id" = $1 AND "locations"."locatable_type" = $2 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "stories"[0m
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "stories"
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 3ms (Views: 1.1ms | ActiveRecord: 1.3ms)
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 9ms (ActiveRecord: 2.2ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:09:54.393224"], ["updated_at", "2015-05-15 02:09:54.393224"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:09:54.398343"], ["updated_at", "2015-05-15 02:09:54.398343"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:09:54.400445"], ["updated_at", "2015-05-15 02:09:54.400445"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.5ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:09:54.409133"], ["updated_at", "2015-05-15 02:09:54.409133"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:09:54.411612"], ["updated_at", "2015-05-15 02:09:54.411612"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:09:54.413662"], ["updated_at", "2015-05-15 02:09:54.413662"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:09:54.415726"], ["updated_at", "2015-05-15 02:09:54.415726"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.1ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.4ms | ActiveRecord: 2.7ms)
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 15ms (ActiveRecord: 4.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:10:31.197735"], ["updated_at", "2015-05-15 02:10:31.197735"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:10:31.205774"], ["updated_at", "2015-05-15 02:10:31.205774"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:10:31.208393"], ["updated_at", "2015-05-15 02:10:31.208393"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.7ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "locations"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:10:31.226354"], ["updated_at", "2015-05-15 02:10:31.226354"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:10:31.231900"], ["updated_at", "2015-05-15 02:10:31.231900"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:10:31.236144"], ["updated_at", "2015-05-15 02:10:31.236144"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.2ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 6ms (Views: 1.9ms | ActiveRecord: 3.1ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 16ms (ActiveRecord: 3.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:11:48.992773"], ["updated_at", "2015-05-15 02:11:48.992773"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:11:49.000576"], ["updated_at", "2015-05-15 02:11:49.000576"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:11:49.004067"], ["updated_at", "2015-05-15 02:11:49.004067"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.0ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:11:49.016515"], ["updated_at", "2015-05-15 02:11:49.016515"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:11:49.019719"], ["updated_at", "2015-05-15 02:11:49.019719"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:11:49.022645"], ["updated_at", "2015-05-15 02:11:49.022645"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.1ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.9ms | ActiveRecord: 2.4ms)
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 15ms (ActiveRecord: 4.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:12:12.415940"], ["updated_at", "2015-05-15 02:12:12.415940"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:12:12.425826"], ["updated_at", "2015-05-15 02:12:12.425826"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:12:12.429218"], ["updated_at", "2015-05-15 02:12:12.429218"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.4ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "locations"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:12:12.440589"], ["updated_at", "2015-05-15 02:12:12.440589"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:12:12.444983"], ["updated_at", "2015-05-15 02:12:12.444983"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:12:12.449521"], ["updated_at", "2015-05-15 02:12:12.449521"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:12:12.452739"], ["updated_at", "2015-05-15 02:12:12.452739"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
PG::UndefinedColumn: ERROR:  column locations.locatable_id does not exist
LINE 1: SELECT  "locations".* FROM "locations" WHERE "locations"."lo...
                                                     ^
: SELECT  "locations".* FROM "locations" WHERE "locations"."locatable_id" = $1 AND "locations"."locatable_type" = $2 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "stories"[0m
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "stories"
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.7ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.5ms | ActiveRecord: 2.6ms)
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 13ms (ActiveRecord: 4.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:15:00.385075"], ["updated_at", "2015-05-15 02:15:00.385075"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:15:00.393017"], ["updated_at", "2015-05-15 02:15:00.393017"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:15:00.395501"], ["updated_at", "2015-05-15 02:15:00.395501"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.0ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:15:00.407517"], ["updated_at", "2015-05-15 02:15:00.407517"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:15:00.413187"], ["updated_at", "2015-05-15 02:15:00.413187"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:15:00.419224"], ["updated_at", "2015-05-15 02:15:00.419224"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:15:00.423560"], ["updated_at", "2015-05-15 02:15:00.423560"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT  "locations".* FROM "locations" WHERE "locations"."locatable_id" = $1 AND "locations"."locatable_type" = $2 LIMIT 1[0m  [["locatable_id", 1], ["locatable_type", "Story"]]
  [1m[35mSQL (1.7ms)[0m  DELETE FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 2.0ms | ActiveRecord: 2.9ms)
  [1m[35mStory Load (0.7ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 13ms (ActiveRecord: 4.4ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:16:12.591968"], ["updated_at", "2015-05-15 02:16:12.591968"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:16:12.599952"], ["updated_at", "2015-05-15 02:16:12.599952"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:16:12.603394"], ["updated_at", "2015-05-15 02:16:12.603394"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.5ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:16:12.617140"], ["updated_at", "2015-05-15 02:16:12.617140"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:16:12.622581"], ["updated_at", "2015-05-15 02:16:12.622581"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:16:12.627203"], ["updated_at", "2015-05-15 02:16:12.627203"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:16:12.639527"], ["updated_at", "2015-05-15 02:16:12.639527"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 2], ["updated_at", "2015-05-15 02:16:12.641832"], ["id", 10]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:16:12.648356"], ["updated_at", "2015-05-15 02:16:12.648356"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 3], ["updated_at", "2015-05-15 02:16:12.649851"], ["id", 11]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:16:12.652105"], ["updated_at", "2015-05-15 02:16:12.652105"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 4], ["updated_at", "2015-05-15 02:16:12.653388"], ["id", 12]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.2ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.6ms | ActiveRecord: 2.6ms)
  [1m[35mStory Load (0.7ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 13ms (ActiveRecord: 3.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:16:51.361336"], ["updated_at", "2015-05-15 02:16:51.361336"]]
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:16:51.370300"], ["updated_at", "2015-05-15 02:16:51.370300"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:16:51.376058"], ["updated_at", "2015-05-15 02:16:51.376058"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.6ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:16:51.386933"], ["updated_at", "2015-05-15 02:16:51.386933"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:16:51.391989"], ["updated_at", "2015-05-15 02:16:51.391989"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:16:51.396090"], ["updated_at", "2015-05-15 02:16:51.396090"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:16:51.403131"], ["updated_at", "2015-05-15 02:16:51.403131"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 5], ["updated_at", "2015-05-15 02:16:51.405574"], ["id", 16]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:16:51.412141"], ["updated_at", "2015-05-15 02:16:51.412141"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 6], ["updated_at", "2015-05-15 02:16:51.413657"], ["id", 17]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:16:51.416098"], ["updated_at", "2015-05-15 02:16:51.416098"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 7], ["updated_at", "2015-05-15 02:16:51.417560"], ["id", 18]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  DELETE FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 4ms (Views: 1.2ms | ActiveRecord: 2.0ms)
  [1m[35mStory Load (2.2ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 11ms (ActiveRecord: 3.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:18:05.638630"], ["updated_at", "2015-05-15 02:18:05.638630"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:18:05.646212"], ["updated_at", "2015-05-15 02:18:05.646212"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:18:05.648901"], ["updated_at", "2015-05-15 02:18:05.648901"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.9ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "locations"
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:18:05.660986"], ["updated_at", "2015-05-15 02:18:05.660986"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:18:05.663753"], ["updated_at", "2015-05-15 02:18:05.663753"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:18:05.666266"], ["updated_at", "2015-05-15 02:18:05.666266"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:18:05.677053"], ["updated_at", "2015-05-15 02:18:05.677053"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 8], ["updated_at", "2015-05-15 02:18:05.679689"], ["id", 22]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:18:05.686526"], ["updated_at", "2015-05-15 02:18:05.686526"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 9], ["updated_at", "2015-05-15 02:18:05.688136"], ["id", 23]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:18:05.690862"], ["updated_at", "2015-05-15 02:18:05.690862"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 10], ["updated_at", "2015-05-15 02:18:05.692350"], ["id", 24]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mStory Load (1.1ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "locations"
LINE 2: ...5849933176751)*COS(3.036872898470133)*COS(RADIANS(locations....
                                                             ^
: SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "stories"[0m
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "stories"
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.1ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 6ms (Views: 2.4ms | ActiveRecord: 2.8ms)
  [1m[35mStory Load (0.7ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 13ms (ActiveRecord: 3.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:19:11.908678"], ["updated_at", "2015-05-15 02:19:11.908678"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:19:11.915093"], ["updated_at", "2015-05-15 02:19:11.915093"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:19:11.918294"], ["updated_at", "2015-05-15 02:19:11.918294"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.9ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:19:11.928866"], ["updated_at", "2015-05-15 02:19:11.928866"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:19:11.931743"], ["updated_at", "2015-05-15 02:19:11.931743"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:19:11.934690"], ["updated_at", "2015-05-15 02:19:11.934690"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:19:11.943485"], ["updated_at", "2015-05-15 02:19:11.943485"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 11], ["updated_at", "2015-05-15 02:19:11.945847"], ["id", 28]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:19:11.952241"], ["updated_at", "2015-05-15 02:19:11.952241"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 12], ["updated_at", "2015-05-15 02:19:11.953901"], ["id", 29]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:19:11.957030"], ["updated_at", "2015-05-15 02:19:11.957030"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 13], ["updated_at", "2015-05-15 02:19:11.958871"], ["id", 30]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mStory Load (1.1ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "locations"
LINE 2: ...5849933176751)*COS(3.036872898470133)*COS(RADIANS(locations....
                                                             ^
: SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "stories"[0m
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "stories"
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.8ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.4ms | ActiveRecord: 2.6ms)
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 12ms (ActiveRecord: 3.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:19:14.687295"], ["updated_at", "2015-05-15 02:19:14.687295"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:19:14.695095"], ["updated_at", "2015-05-15 02:19:14.695095"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:19:14.698205"], ["updated_at", "2015-05-15 02:19:14.698205"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.0ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:19:14.709656"], ["updated_at", "2015-05-15 02:19:14.709656"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:19:14.712808"], ["updated_at", "2015-05-15 02:19:14.712808"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:19:14.716145"], ["updated_at", "2015-05-15 02:19:14.716145"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:19:14.726601"], ["updated_at", "2015-05-15 02:19:14.726601"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 14], ["updated_at", "2015-05-15 02:19:14.729074"], ["id", 34]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:19:14.736573"], ["updated_at", "2015-05-15 02:19:14.736573"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 15], ["updated_at", "2015-05-15 02:19:14.740150"], ["id", 35]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:19:14.744961"], ["updated_at", "2015-05-15 02:19:14.744961"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 16], ["updated_at", "2015-05-15 02:19:14.747004"], ["id", 36]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mStory Load (1.0ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "locations"
LINE 2: ...5849933176751)*COS(3.036872898470133)*COS(RADIANS(locations....
                                                             ^
: SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "stories"[0m
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "stories"
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.3ms | ActiveRecord: 3.0ms)
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 17ms (ActiveRecord: 4.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:19:54.685630"], ["updated_at", "2015-05-15 02:19:54.685630"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:19:54.694309"], ["updated_at", "2015-05-15 02:19:54.694309"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:19:54.697870"], ["updated_at", "2015-05-15 02:19:54.697870"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.8ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:19:54.711687"], ["updated_at", "2015-05-15 02:19:54.711687"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:19:54.715771"], ["updated_at", "2015-05-15 02:19:54.715771"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:19:54.720857"], ["updated_at", "2015-05-15 02:19:54.720857"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:19:54.729040"], ["updated_at", "2015-05-15 02:19:54.729040"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 17], ["updated_at", "2015-05-15 02:19:54.731450"], ["id", 40]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:19:54.738219"], ["updated_at", "2015-05-15 02:19:54.738219"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 18], ["updated_at", "2015-05-15 02:19:54.739835"], ["id", 41]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:19:54.742644"], ["updated_at", "2015-05-15 02:19:54.742644"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 19], ["updated_at", "2015-05-15 02:19:54.744234"], ["id", 42]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mStory Load (1.1ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "locations"
LINE 2: ...5849933176751)*COS(3.036872898470133)*COS(RADIANS(locations....
                                                             ^
: SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "stories"[0m
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "stories"
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 4ms (Views: 1.2ms | ActiveRecord: 2.4ms)
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 18ms (ActiveRecord: 7.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:21:08.465994"], ["updated_at", "2015-05-15 02:21:08.465994"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:21:08.476938"], ["updated_at", "2015-05-15 02:21:08.476938"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:21:08.480647"], ["updated_at", "2015-05-15 02:21:08.480647"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.7ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:21:08.495388"], ["updated_at", "2015-05-15 02:21:08.495388"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:21:08.499113"], ["updated_at", "2015-05-15 02:21:08.499113"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:21:08.501352"], ["updated_at", "2015-05-15 02:21:08.501352"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:21:08.507653"], ["updated_at", "2015-05-15 02:21:08.507653"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 20], ["updated_at", "2015-05-15 02:21:08.509493"], ["id", 46]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:21:08.517068"], ["updated_at", "2015-05-15 02:21:08.517068"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 21], ["updated_at", "2015-05-15 02:21:08.518602"], ["id", 47]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:21:08.520760"], ["updated_at", "2015-05-15 02:21:08.520760"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 22], ["updated_at", "2015-05-15 02:21:08.522060"], ["id", 48]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mStory Load (1.1ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "locations"
LINE 2: ...5849933176751)*COS(3.036872898470133)*COS(RADIANS(locations....
                                                             ^
: SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "stories"[0m
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "stories"
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.1ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 4ms (Views: 1.2ms | ActiveRecord: 2.4ms)
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 12ms (ActiveRecord: 4.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:22:03.488300"], ["updated_at", "2015-05-15 02:22:03.488300"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:22:03.495392"], ["updated_at", "2015-05-15 02:22:03.495392"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:22:03.498170"], ["updated_at", "2015-05-15 02:22:03.498170"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.6ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:22:03.509181"], ["updated_at", "2015-05-15 02:22:03.509181"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:22:03.512122"], ["updated_at", "2015-05-15 02:22:03.512122"]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:22:03.516919"], ["updated_at", "2015-05-15 02:22:03.516919"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:22:03.528932"], ["updated_at", "2015-05-15 02:22:03.528932"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 23], ["updated_at", "2015-05-15 02:22:03.531048"], ["id", 52]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:22:03.536309"], ["updated_at", "2015-05-15 02:22:03.536309"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 24], ["updated_at", "2015-05-15 02:22:03.537445"], ["id", 53]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:22:03.539327"], ["updated_at", "2015-05-15 02:22:03.539327"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 25], ["updated_at", "2015-05-15 02:22:03.540434"], ["id", 54]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "locations"
LINE 2: ...5849933176751)*COS(3.036872898470133)*COS(RADIANS(locations....
                                                             ^
: SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "stories"[0m
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "stories"
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.2ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 4ms (Views: 1.4ms | ActiveRecord: 2.2ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 16ms (ActiveRecord: 3.9ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:23:12.088506"], ["updated_at", "2015-05-15 02:23:12.088506"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:23:12.095242"], ["updated_at", "2015-05-15 02:23:12.095242"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:23:12.098540"], ["updated_at", "2015-05-15 02:23:12.098540"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.3ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:23:12.118691"], ["updated_at", "2015-05-15 02:23:12.118691"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 26], ["created_at", "2015-05-15 02:23:12.123273"], ["updated_at", "2015-05-15 02:23:12.123273"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:23:12.129592"], ["updated_at", "2015-05-15 02:23:12.129592"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 27], ["created_at", "2015-05-15 02:23:12.132570"], ["updated_at", "2015-05-15 02:23:12.132570"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:23:12.135860"], ["updated_at", "2015-05-15 02:23:12.135860"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["locatable_type", "Story"], ["locatable_id", 28], ["created_at", "2015-05-15 02:23:12.137229"], ["updated_at", "2015-05-15 02:23:12.137229"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "locations"
LINE 2: ...5849933176751)*COS(3.036872898470133)*COS(RADIANS(locations....
                                                             ^
: SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "stories"
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "stories"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 4ms (Views: 1.1ms | ActiveRecord: 2.6ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 11ms (ActiveRecord: 4.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:34:59.717725"], ["updated_at", "2015-05-15 02:34:59.717725"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:34:59.727277"], ["updated_at", "2015-05-15 02:34:59.727277"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:34:59.730133"], ["updated_at", "2015-05-15 02:34:59.730133"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.9ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "locations"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:34:59.753739"], ["updated_at", "2015-05-15 02:34:59.753739"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 29], ["created_at", "2015-05-15 02:34:59.757057"], ["updated_at", "2015-05-15 02:34:59.757057"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 4ms (Views: 1.2ms | ActiveRecord: 2.3ms)
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 14ms (ActiveRecord: 4.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:35:20.892638"], ["updated_at", "2015-05-15 02:35:20.892638"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:35:20.903833"], ["updated_at", "2015-05-15 02:35:20.903833"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:35:20.907618"], ["updated_at", "2015-05-15 02:35:20.907618"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.6ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:35:20.924948"], ["updated_at", "2015-05-15 02:35:20.924948"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 30], ["created_at", "2015-05-15 02:35:20.928572"], ["updated_at", "2015-05-15 02:35:20.928572"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:35:20.932305"], ["updated_at", "2015-05-15 02:35:20.932305"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 31], ["created_at", "2015-05-15 02:35:20.933810"], ["updated_at", "2015-05-15 02:35:20.933810"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:35:20.936615"], ["updated_at", "2015-05-15 02:35:20.936615"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["locatable_type", "Story"], ["locatable_id", 32], ["created_at", "2015-05-15 02:35:20.937998"], ["updated_at", "2015-05-15 02:35:20.937998"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (2.4ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 4ms (Views: 1.1ms | ActiveRecord: 2.1ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 11ms (ActiveRecord: 4.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:36:15.472302"], ["updated_at", "2015-05-15 02:36:15.472302"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:36:15.479838"], ["updated_at", "2015-05-15 02:36:15.479838"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:36:15.482830"], ["updated_at", "2015-05-15 02:36:15.482830"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.1ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:36:15.504802"], ["updated_at", "2015-05-15 02:36:15.504802"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 33], ["created_at", "2015-05-15 02:36:15.510424"], ["updated_at", "2015-05-15 02:36:15.510424"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:36:15.516802"], ["updated_at", "2015-05-15 02:36:15.516802"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 34], ["created_at", "2015-05-15 02:36:15.519349"], ["updated_at", "2015-05-15 02:36:15.519349"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:36:15.521846"], ["updated_at", "2015-05-15 02:36:15.521846"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["locatable_type", "Story"], ["locatable_id", 35], ["created_at", "2015-05-15 02:36:15.523209"], ["updated_at", "2015-05-15 02:36:15.523209"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "locations"
LINE 2: ...5849933176751)*COS(3.036872898470133)*COS(RADIANS(locations....
                                                             ^
: SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "stories"
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.1ms | ActiveRecord: 3.2ms)
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 10ms (ActiveRecord: 3.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:41:22.771217"], ["updated_at", "2015-05-15 02:41:22.771217"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:41:22.781875"], ["updated_at", "2015-05-15 02:41:22.781875"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:41:22.784895"], ["updated_at", "2015-05-15 02:41:22.784895"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.1ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:41:22.801371"], ["updated_at", "2015-05-15 02:41:22.801371"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 36], ["created_at", "2015-05-15 02:41:22.805228"], ["updated_at", "2015-05-15 02:41:22.805228"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:41:22.812321"], ["updated_at", "2015-05-15 02:41:22.812321"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 37], ["created_at", "2015-05-15 02:41:22.815457"], ["updated_at", "2015-05-15 02:41:22.815457"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:41:22.819169"], ["updated_at", "2015-05-15 02:41:22.819169"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["locatable_type", "Story"], ["locatable_id", 38], ["created_at", "2015-05-15 02:41:22.820513"], ["updated_at", "2015-05-15 02:41:22.820513"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mStory Load (1.7ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "locations"
LINE 2: ...5849933176751)*COS(3.036872898470133)*COS(RADIANS(locations....
                                                             ^
: SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "stories"
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.1ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.9ms | ActiveRecord: 2.0ms)
  [1m[35mStory Load (0.7ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 16ms (ActiveRecord: 3.1ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:52:25.564588"], ["updated_at", "2015-05-15 02:52:25.564588"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:52:25.571099"], ["updated_at", "2015-05-15 02:52:25.571099"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:52:25.574047"], ["updated_at", "2015-05-15 02:52:25.574047"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.1ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:52:25.594431"], ["updated_at", "2015-05-15 02:52:25.594431"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 39], ["created_at", "2015-05-15 02:52:25.597325"], ["updated_at", "2015-05-15 02:52:25.597325"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:52:25.600277"], ["updated_at", "2015-05-15 02:52:25.600277"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 40], ["created_at", "2015-05-15 02:52:25.601431"], ["updated_at", "2015-05-15 02:52:25.601431"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:52:25.604011"], ["updated_at", "2015-05-15 02:52:25.604011"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["locatable_type", "Story"], ["locatable_id", 41], ["created_at", "2015-05-15 02:52:25.607153"], ["updated_at", "2015-05-15 02:52:25.607153"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (2.6ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.4ms | ActiveRecord: 2.5ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 12ms (ActiveRecord: 4.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:52:47.459450"], ["updated_at", "2015-05-15 02:52:47.459450"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:52:47.468107"], ["updated_at", "2015-05-15 02:52:47.468107"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:52:47.470649"], ["updated_at", "2015-05-15 02:52:47.470649"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.9ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:52:47.487429"], ["updated_at", "2015-05-15 02:52:47.487429"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 42], ["created_at", "2015-05-15 02:52:47.489991"], ["updated_at", "2015-05-15 02:52:47.489991"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:52:47.494042"], ["updated_at", "2015-05-15 02:52:47.494042"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 43], ["created_at", "2015-05-15 02:52:47.495770"], ["updated_at", "2015-05-15 02:52:47.495770"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:52:47.499420"], ["updated_at", "2015-05-15 02:52:47.499420"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["locatable_type", "Story"], ["locatable_id", 44], ["created_at", "2015-05-15 02:52:47.501208"], ["updated_at", "2015-05-15 02:52:47.501208"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (2.4ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 4ms (Views: 1.3ms | ActiveRecord: 1.6ms)
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 12ms (ActiveRecord: 3.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:53:14.758271"], ["updated_at", "2015-05-15 02:53:14.758271"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:53:14.765431"], ["updated_at", "2015-05-15 02:53:14.765431"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:53:14.768066"], ["updated_at", "2015-05-15 02:53:14.768066"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.9ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:53:14.785949"], ["updated_at", "2015-05-15 02:53:14.785949"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 45], ["created_at", "2015-05-15 02:53:14.788012"], ["updated_at", "2015-05-15 02:53:14.788012"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:53:14.791369"], ["updated_at", "2015-05-15 02:53:14.791369"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 46], ["created_at", "2015-05-15 02:53:14.792995"], ["updated_at", "2015-05-15 02:53:14.792995"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:53:14.795513"], ["updated_at", "2015-05-15 02:53:14.795513"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["locatable_type", "Story"], ["locatable_id", 47], ["created_at", "2015-05-15 02:53:14.796945"], ["updated_at", "2015-05-15 02:53:14.796945"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.9ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 6ms (Views: 2.2ms | ActiveRecord: 2.8ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 13ms (ActiveRecord: 4.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:53:49.857972"], ["updated_at", "2015-05-15 02:53:49.857972"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:53:49.865582"], ["updated_at", "2015-05-15 02:53:49.865582"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:53:49.868339"], ["updated_at", "2015-05-15 02:53:49.868339"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.8ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:53:49.887319"], ["updated_at", "2015-05-15 02:53:49.887319"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 48], ["created_at", "2015-05-15 02:53:49.890314"], ["updated_at", "2015-05-15 02:53:49.890314"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:53:49.893597"], ["updated_at", "2015-05-15 02:53:49.893597"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 49], ["created_at", "2015-05-15 02:53:49.895236"], ["updated_at", "2015-05-15 02:53:49.895236"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:53:49.898268"], ["updated_at", "2015-05-15 02:53:49.898268"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["locatable_type", "Story"], ["locatable_id", 50], ["created_at", "2015-05-15 02:53:49.899963"], ["updated_at", "2015-05-15 02:53:49.899963"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "locations"
LINE 2: ...5849933176751)*COS(3.036872898470133)*COS(RADIANS(locations....
                                                             ^
: SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "stories"
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.1ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.3ms | ActiveRecord: 3.0ms)
  [1m[35mStory Load (1.0ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 15ms (ActiveRecord: 4.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:54:24.216043"], ["updated_at", "2015-05-15 02:54:24.216043"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:54:24.222559"], ["updated_at", "2015-05-15 02:54:24.222559"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:54:24.224877"], ["updated_at", "2015-05-15 02:54:24.224877"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.7ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:54:24.246675"], ["updated_at", "2015-05-15 02:54:24.246675"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 51], ["created_at", "2015-05-15 02:54:24.249415"], ["updated_at", "2015-05-15 02:54:24.249415"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:54:24.253548"], ["updated_at", "2015-05-15 02:54:24.253548"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 52], ["created_at", "2015-05-15 02:54:24.255266"], ["updated_at", "2015-05-15 02:54:24.255266"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:54:24.258179"], ["updated_at", "2015-05-15 02:54:24.258179"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["locatable_type", "Story"], ["locatable_id", 53], ["created_at", "2015-05-15 02:54:24.259708"], ["updated_at", "2015-05-15 02:54:24.259708"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.7ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 4ms (Views: 1.1ms | ActiveRecord: 1.8ms)
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 10ms (ActiveRecord: 3.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:55:19.967703"], ["updated_at", "2015-05-15 02:55:19.967703"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:55:19.975496"], ["updated_at", "2015-05-15 02:55:19.975496"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:55:19.980741"], ["updated_at", "2015-05-15 02:55:19.980741"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.2ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:55:19.997288"], ["updated_at", "2015-05-15 02:55:19.997288"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 54], ["created_at", "2015-05-15 02:55:19.999936"], ["updated_at", "2015-05-15 02:55:19.999936"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:55:20.003323"], ["updated_at", "2015-05-15 02:55:20.003323"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["locatable_type", "Story"], ["locatable_id", 55], ["created_at", "2015-05-15 02:55:20.005320"], ["updated_at", "2015-05-15 02:55:20.005320"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 02:55:20.009836"], ["updated_at", "2015-05-15 02:55:20.009836"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "locatable_type", "locatable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["locatable_type", "Story"], ["locatable_id", 56], ["created_at", "2015-05-15 02:55:20.012144"], ["updated_at", "2015-05-15 02:55:20.012144"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (0.8ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mStory Load (1.1ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "locations"
LINE 2: ...5849933176751)*COS(3.036872898470133)*COS(RADIANS(locations....
                                                             ^
: SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "stories"[0m
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "stories"
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 4ms (Views: 1.5ms | ActiveRecord: 2.3ms)
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 14ms (ActiveRecord: 4.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:56:43.323657"], ["updated_at", "2015-05-15 02:56:43.323657"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:56:43.333208"], ["updated_at", "2015-05-15 02:56:43.333208"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:56:43.336199"], ["updated_at", "2015-05-15 02:56:43.336199"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.1ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:56:43.346302"], ["updated_at", "2015-05-15 02:56:43.346302"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:56:43.349107"], ["updated_at", "2015-05-15 02:56:43.349107"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:56:43.351547"], ["updated_at", "2015-05-15 02:56:43.351547"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:56:43.360574"], ["updated_at", "2015-05-15 02:56:43.360574"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 57], ["updated_at", "2015-05-15 02:56:43.365664"], ["id", 122]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:56:43.375210"], ["updated_at", "2015-05-15 02:56:43.375210"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 58], ["updated_at", "2015-05-15 02:56:43.376745"], ["id", 123]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:56:43.379338"], ["updated_at", "2015-05-15 02:56:43.379338"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 59], ["updated_at", "2015-05-15 02:56:43.380838"], ["id", 124]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.8ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 3ms (Views: 1.2ms | ActiveRecord: 1.8ms)
  [1m[35mStory Load (0.9ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 12ms (ActiveRecord: 4.5ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:58:03.841974"], ["updated_at", "2015-05-15 02:58:03.841974"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:58:03.849526"], ["updated_at", "2015-05-15 02:58:03.849526"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:58:03.852913"], ["updated_at", "2015-05-15 02:58:03.852913"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.1ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 02:58:03.867714"], ["updated_at", "2015-05-15 02:58:03.867714"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 02:58:03.873556"], ["updated_at", "2015-05-15 02:58:03.873556"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 02:58:03.878715"], ["updated_at", "2015-05-15 02:58:03.878715"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:58:03.888084"], ["updated_at", "2015-05-15 02:58:03.888084"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 60], ["updated_at", "2015-05-15 02:58:03.890105"], ["id", 128]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:58:03.896196"], ["updated_at", "2015-05-15 02:58:03.896196"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 61], ["updated_at", "2015-05-15 02:58:03.898309"], ["id", 129]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 02:58:03.900938"], ["updated_at", "2015-05-15 02:58:03.900938"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 62], ["updated_at", "2015-05-15 02:58:03.902278"], ["id", 130]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.8ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 4ms (Views: 1.2ms | ActiveRecord: 2.3ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 13ms (ActiveRecord: 4.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.2ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:01:37.374033"], ["updated_at", "2015-05-15 03:01:37.374033"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:01:37.382710"], ["updated_at", "2015-05-15 03:01:37.382710"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:01:37.385601"], ["updated_at", "2015-05-15 03:01:37.385601"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.9ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:01:37.398266"], ["updated_at", "2015-05-15 03:01:37.398266"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:01:37.403590"], ["updated_at", "2015-05-15 03:01:37.403590"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:01:37.407096"], ["updated_at", "2015-05-15 03:01:37.407096"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:01:37.415803"], ["updated_at", "2015-05-15 03:01:37.415803"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 63], ["updated_at", "2015-05-15 03:01:37.418097"], ["id", 134]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:01:37.425681"], ["updated_at", "2015-05-15 03:01:37.425681"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 64], ["updated_at", "2015-05-15 03:01:37.427433"], ["id", 135]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:01:37.430213"], ["updated_at", "2015-05-15 03:01:37.430213"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 65], ["updated_at", "2015-05-15 03:01:37.431727"], ["id", 136]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.1ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 6ms (Views: 1.7ms | ActiveRecord: 3.1ms)
  [1m[35mStory Load (0.7ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 15ms (ActiveRecord: 4.8ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:47:27.360862"], ["updated_at", "2015-05-15 03:47:27.360862"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:47:27.367656"], ["updated_at", "2015-05-15 03:47:27.367656"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:47:27.370097"], ["updated_at", "2015-05-15 03:47:27.370097"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.1ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:47:27.382388"], ["updated_at", "2015-05-15 03:47:27.382388"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:47:27.385999"], ["updated_at", "2015-05-15 03:47:27.385999"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:47:27.389472"], ["updated_at", "2015-05-15 03:47:27.389472"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:47:27.399710"], ["updated_at", "2015-05-15 03:47:27.399710"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 66], ["updated_at", "2015-05-15 03:47:27.402041"], ["id", 140]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:47:27.408679"], ["updated_at", "2015-05-15 03:47:27.408679"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 67], ["updated_at", "2015-05-15 03:47:27.410343"], ["id", 141]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:47:27.413060"], ["updated_at", "2015-05-15 03:47:27.413060"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 68], ["updated_at", "2015-05-15 03:47:27.414656"], ["id", 142]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.3ms | ActiveRecord: 2.7ms)
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 8ms (ActiveRecord: 2.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:48:35.483370"], ["updated_at", "2015-05-15 03:48:35.483370"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:48:35.491815"], ["updated_at", "2015-05-15 03:48:35.491815"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:48:35.494715"], ["updated_at", "2015-05-15 03:48:35.494715"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.0ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:48:35.505888"], ["updated_at", "2015-05-15 03:48:35.505888"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:48:35.508707"], ["updated_at", "2015-05-15 03:48:35.508707"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:48:35.511150"], ["updated_at", "2015-05-15 03:48:35.511150"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:48:35.520035"], ["updated_at", "2015-05-15 03:48:35.520035"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 69], ["updated_at", "2015-05-15 03:48:35.523130"], ["id", 146]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:48:35.529279"], ["updated_at", "2015-05-15 03:48:35.529279"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 70], ["updated_at", "2015-05-15 03:48:35.530682"], ["id", 147]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:48:35.532857"], ["updated_at", "2015-05-15 03:48:35.532857"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 71], ["updated_at", "2015-05-15 03:48:35.534175"], ["id", 148]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (0.7ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.8ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 4ms (Views: 1.3ms | ActiveRecord: 2.1ms)
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 12ms (ActiveRecord: 4.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:49:18.242603"], ["updated_at", "2015-05-15 03:49:18.242603"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:49:18.249624"], ["updated_at", "2015-05-15 03:49:18.249624"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:49:18.255049"], ["updated_at", "2015-05-15 03:49:18.255049"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.4ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "locations"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:49:18.275967"], ["updated_at", "2015-05-15 03:49:18.275967"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:49:18.280494"], ["updated_at", "2015-05-15 03:49:18.280494"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:49:18.284480"], ["updated_at", "2015-05-15 03:49:18.284480"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:49:18.294131"], ["updated_at", "2015-05-15 03:49:18.294131"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 72], ["updated_at", "2015-05-15 03:49:18.296426"], ["id", 152]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:49:18.303363"], ["updated_at", "2015-05-15 03:49:18.303363"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 73], ["updated_at", "2015-05-15 03:49:18.305626"], ["id", 153]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:49:18.308368"], ["updated_at", "2015-05-15 03:49:18.308368"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 74], ["updated_at", "2015-05-15 03:49:18.309888"], ["id", 154]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 3ms (Views: 1.1ms | ActiveRecord: 1.7ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 11ms (ActiveRecord: 4.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.2ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:52:54.691712"], ["updated_at", "2015-05-15 03:52:54.691712"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:52:54.698501"], ["updated_at", "2015-05-15 03:52:54.698501"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:52:54.703169"], ["updated_at", "2015-05-15 03:52:54.703169"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.5ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:52:54.717535"], ["updated_at", "2015-05-15 03:52:54.717535"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:52:54.720375"], ["updated_at", "2015-05-15 03:52:54.720375"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:52:54.723125"], ["updated_at", "2015-05-15 03:52:54.723125"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:52:54.731895"], ["updated_at", "2015-05-15 03:52:54.731895"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 75], ["updated_at", "2015-05-15 03:52:54.736515"], ["id", 158]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:52:54.749068"], ["updated_at", "2015-05-15 03:52:54.749068"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 76], ["updated_at", "2015-05-15 03:52:54.750693"], ["id", 159]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:52:54.753180"], ["updated_at", "2015-05-15 03:52:54.753180"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 77], ["updated_at", "2015-05-15 03:52:54.754630"], ["id", 160]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mStory Load (1.1ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "locations"
LINE 2: ...5849933176751)*COS(3.036872898470133)*COS(RADIANS(locations....
                                                             ^
: SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "stories"
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 6ms (Views: 2.3ms | ActiveRecord: 3.0ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 16ms (ActiveRecord: 2.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:53:17.033387"], ["updated_at", "2015-05-15 03:53:17.033387"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:53:17.040646"], ["updated_at", "2015-05-15 03:53:17.040646"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:53:17.043595"], ["updated_at", "2015-05-15 03:53:17.043595"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.5ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:53:17.053669"], ["updated_at", "2015-05-15 03:53:17.053669"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:53:17.059076"], ["updated_at", "2015-05-15 03:53:17.059076"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:53:17.064696"], ["updated_at", "2015-05-15 03:53:17.064696"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:53:17.072924"], ["updated_at", "2015-05-15 03:53:17.072924"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 78], ["updated_at", "2015-05-15 03:53:17.075408"], ["id", 164]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:53:17.082081"], ["updated_at", "2015-05-15 03:53:17.082081"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 79], ["updated_at", "2015-05-15 03:53:17.083657"], ["id", 165]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:53:17.085979"], ["updated_at", "2015-05-15 03:53:17.085979"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 80], ["updated_at", "2015-05-15 03:53:17.087446"], ["id", 166]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.8ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 4ms (Views: 1.5ms | ActiveRecord: 2.0ms)
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 12ms (ActiveRecord: 4.5ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:53:38.780643"], ["updated_at", "2015-05-15 03:53:38.780643"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:53:38.791047"], ["updated_at", "2015-05-15 03:53:38.791047"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:53:38.794510"], ["updated_at", "2015-05-15 03:53:38.794510"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.9ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:53:38.805537"], ["updated_at", "2015-05-15 03:53:38.805537"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:53:38.807989"], ["updated_at", "2015-05-15 03:53:38.807989"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:53:38.811524"], ["updated_at", "2015-05-15 03:53:38.811524"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:53:38.823038"], ["updated_at", "2015-05-15 03:53:38.823038"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 81], ["updated_at", "2015-05-15 03:53:38.825188"], ["id", 170]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:53:38.831016"], ["updated_at", "2015-05-15 03:53:38.831016"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 82], ["updated_at", "2015-05-15 03:53:38.832449"], ["id", 171]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:53:38.835022"], ["updated_at", "2015-05-15 03:53:38.835022"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 83], ["updated_at", "2015-05-15 03:53:38.836684"], ["id", 172]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mStory Load (1.3ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "locations"
LINE 2: ...5849933176751)*COS(3.036872898470133)*COS(RADIANS(locations....
                                                             ^
: SELECT  "stories".* FROM "stories"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "stories"
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.1ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.7ms | ActiveRecord: 2.1ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 12ms (ActiveRecord: 4.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:54:31.631313"], ["updated_at", "2015-05-15 03:54:31.631313"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:54:31.638221"], ["updated_at", "2015-05-15 03:54:31.638221"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:54:31.640691"], ["updated_at", "2015-05-15 03:54:31.640691"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.9ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:54:31.652768"], ["updated_at", "2015-05-15 03:54:31.652768"]]
  [1m[36m (1.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:54:31.659664"], ["updated_at", "2015-05-15 03:54:31.659664"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:54:31.663025"], ["updated_at", "2015-05-15 03:54:31.663025"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:54:31.671281"], ["updated_at", "2015-05-15 03:54:31.671281"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 84], ["updated_at", "2015-05-15 03:54:31.673286"], ["id", 176]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:54:31.679005"], ["updated_at", "2015-05-15 03:54:31.679005"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 85], ["updated_at", "2015-05-15 03:54:31.680401"], ["id", 177]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:54:31.682673"], ["updated_at", "2015-05-15 03:54:31.682673"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 86], ["updated_at", "2015-05-15 03:54:31.684139"], ["id", 178]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.6ms | ActiveRecord: 2.4ms)
  [1m[35mStory Load (0.7ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 14ms (ActiveRecord: 5.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:56:21.763647"], ["updated_at", "2015-05-15 03:56:21.763647"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:56:21.771208"], ["updated_at", "2015-05-15 03:56:21.771208"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:56:21.774556"], ["updated_at", "2015-05-15 03:56:21.774556"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.0ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 03:56:21.786196"], ["updated_at", "2015-05-15 03:56:21.786196"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 03:56:21.789716"], ["updated_at", "2015-05-15 03:56:21.789716"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 03:56:21.793142"], ["updated_at", "2015-05-15 03:56:21.793142"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:56:21.800183"], ["updated_at", "2015-05-15 03:56:21.800183"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 87], ["updated_at", "2015-05-15 03:56:21.802540"], ["id", 182]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:56:21.809009"], ["updated_at", "2015-05-15 03:56:21.809009"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 88], ["updated_at", "2015-05-15 03:56:21.810636"], ["id", 183]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 03:56:21.813100"], ["updated_at", "2015-05-15 03:56:21.813100"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 89], ["updated_at", "2015-05-15 03:56:21.814500"], ["id", 184]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "locations"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
