  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"uashdfkjasdgfhabdsvfhjksad"}, "story_id"=>"1"}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"uashdfkjasdgfhabdsvfhjksad"}, "story_id"=>"1"}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (2.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 6ms (Views: 2.9ms | ActiveRecord: 2.9ms)
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 9ms (ActiveRecord: 2.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "origin_latitude"=>"-41.2967128", "origin_longitude"=>"174.77388449999998", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:25:47.945603"], ["updated_at", "2015-05-15 04:25:47.945603"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:25:47.953054"], ["updated_at", "2015-05-15 04:25:47.953054"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:25:47.955701"], ["updated_at", "2015-05-15 04:25:47.955701"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.0ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:25:47.966329"], ["updated_at", "2015-05-15 04:25:47.966329"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:25:47.970155"], ["updated_at", "2015-05-15 04:25:47.970155"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:25:47.973956"], ["updated_at", "2015-05-15 04:25:47.973956"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:25:47.981521"], ["updated_at", "2015-05-15 04:25:47.981521"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 90], ["updated_at", "2015-05-15 04:25:47.983830"], ["id", 188]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:25:47.990433"], ["updated_at", "2015-05-15 04:25:47.990433"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 91], ["updated_at", "2015-05-15 04:25:47.991941"], ["id", 189]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:25:47.994409"], ["updated_at", "2015-05-15 04:25:47.994409"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 92], ["updated_at", "2015-05-15 04:25:47.995901"], ["id", 190]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"uashdfkjasdgfhabdsvfhjksad"}, "story_id"=>"1"}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"uashdfkjasdgfhabdsvfhjksad"}, "story_id"=>"1"}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (2.7ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 8ms (Views: 2.9ms | ActiveRecord: 3.7ms)
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:27:22.714149"], ["updated_at", "2015-05-15 04:27:22.714149"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 21ms (Views: 0.4ms | ActiveRecord: 6.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:27:22.727290"], ["updated_at", "2015-05-15 04:27:22.727290"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:27:22.737677"], ["updated_at", "2015-05-15 04:27:22.737677"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:27:22.751228"], ["updated_at", "2015-05-15 04:27:22.751228"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:27:22.759081"], ["updated_at", "2015-05-15 04:27:22.759081"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 96], ["updated_at", "2015-05-15 04:27:22.760990"], ["id", 191]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "contributions" ("story_id", "content", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["story_id", 96], ["content", "Blah blah blah."], ["created_at", "2015-05-15 04:27:22.774719"], ["updated_at", "2015-05-15 04:27:22.774719"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"96"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 96]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 96]]
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[36mContribution Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 96], ["id", 1]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:27:22.820055"], ["updated_at", "2015-05-15 04:27:22.820055"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:27:22.823027"], ["updated_at", "2015-05-15 04:27:22.823027"]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 97], ["updated_at", "2015-05-15 04:27:22.825020"], ["id", 192]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "contributions" ("story_id", "content", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["story_id", 97], ["content", "Blah blah blah."], ["created_at", "2015-05-15 04:27:22.828541"], ["updated_at", "2015-05-15 04:27:22.828541"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"97"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 97]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 97]]
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:27:22.843919"], ["updated_at", "2015-05-15 04:27:22.843919"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:27:22.846989"], ["updated_at", "2015-05-15 04:27:22.846989"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 98], ["updated_at", "2015-05-15 04:27:22.848942"], ["id", 193]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "contributions" ("story_id", "content", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["story_id", 98], ["content", "Blah blah blah."], ["created_at", "2015-05-15 04:27:22.851841"], ["updated_at", "2015-05-15 04:27:22.851841"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"98"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 98]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 98]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:27:22.866690"], ["updated_at", "2015-05-15 04:27:22.866690"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:27:22.872591"], ["updated_at", "2015-05-15 04:27:22.872591"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:27:22.875826"], ["updated_at", "2015-05-15 04:27:22.875826"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.6ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:27:22.885595"], ["updated_at", "2015-05-15 04:27:22.885595"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:27:22.889580"], ["updated_at", "2015-05-15 04:27:22.889580"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:27:22.892745"], ["updated_at", "2015-05-15 04:27:22.892745"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 04:27:22.895730"], ["updated_at", "2015-05-15 04:27:22.895730"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 99], ["updated_at", "2015-05-15 04:27:22.897945"], ["id", 197]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 04:27:22.900529"], ["updated_at", "2015-05-15 04:27:22.900529"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 100], ["updated_at", "2015-05-15 04:27:22.902140"], ["id", 198]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 04:27:22.905076"], ["updated_at", "2015-05-15 04:27:22.905076"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 101], ["updated_at", "2015-05-15 04:27:22.906692"], ["id", 199]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  BEGIN
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"uashdfkjasdgfhabdsvfhjksad"}, "story_id"=>"1"}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"uashdfkjasdgfhabdsvfhjksad"}, "story_id"=>"1"}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.3ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.5ms | ActiveRecord: 3.0ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:30:09.691989"], ["updated_at", "2015-05-15 04:30:09.691989"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 24ms (Views: 0.5ms | ActiveRecord: 6.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:30:09.709919"], ["updated_at", "2015-05-15 04:30:09.709919"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36mStory Load (1.3ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:30:09.719738"], ["updated_at", "2015-05-15 04:30:09.719738"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:30:09.740836"], ["updated_at", "2015-05-15 04:30:09.740836"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:30:09.746723"], ["updated_at", "2015-05-15 04:30:09.746723"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:30:09.750004"], ["updated_at", "2015-05-15 04:30:09.750004"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.9ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:30:09.760728"], ["updated_at", "2015-05-15 04:30:09.760728"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:30:09.763851"], ["updated_at", "2015-05-15 04:30:09.763851"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:30:09.766577"], ["updated_at", "2015-05-15 04:30:09.766577"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:30:09.774510"], ["updated_at", "2015-05-15 04:30:09.774510"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 105], ["updated_at", "2015-05-15 04:30:09.776826"], ["id", 203]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:30:09.783141"], ["updated_at", "2015-05-15 04:30:09.783141"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 106], ["updated_at", "2015-05-15 04:30:09.784553"], ["id", 204]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:30:09.786799"], ["updated_at", "2015-05-15 04:30:09.786799"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 107], ["updated_at", "2015-05-15 04:30:09.788124"], ["id", 205]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (0.8ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "locations"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  BEGIN
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"uashdfkjasdgfhabdsvfhjksad"}, "story_id"=>"1"}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"uashdfkjasdgfhabdsvfhjksad"}, "story_id"=>"1"}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.4ms | ActiveRecord: 2.9ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:30:36.258121"], ["updated_at", "2015-05-15 04:30:36.258121"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 21ms (Views: 0.3ms | ActiveRecord: 6.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:30:36.275681"], ["updated_at", "2015-05-15 04:30:36.275681"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 9ms (Views: 1.4ms | ActiveRecord: 1.2ms)
  [1m[36mStory Load (1.6ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:30:36.290742"], ["updated_at", "2015-05-15 04:30:36.290742"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:30:36.306291"], ["updated_at", "2015-05-15 04:30:36.306291"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:30:36.316364"], ["updated_at", "2015-05-15 04:30:36.316364"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 111], ["updated_at", "2015-05-15 04:30:36.318363"], ["id", 206]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "contributions" ("story_id", "content", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["story_id", 111], ["content", "Blah blah blah."], ["created_at", "2015-05-15 04:30:36.332808"], ["updated_at", "2015-05-15 04:30:36.332808"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"111"}
Geokit is using the domain: test.host
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 111]]
  [1m[35mContribution Load (0.8ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 111]]
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 1.7ms)
  [1m[36mContribution Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 111], ["id", 4]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:30:36.371553"], ["updated_at", "2015-05-15 04:30:36.371553"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:30:36.374906"], ["updated_at", "2015-05-15 04:30:36.374906"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 112], ["updated_at", "2015-05-15 04:30:36.376658"], ["id", 207]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "contributions" ("story_id", "content", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["story_id", 112], ["content", "Blah blah blah."], ["created_at", "2015-05-15 04:30:36.379292"], ["updated_at", "2015-05-15 04:30:36.379292"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"112"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 112]]
  [1m[36mContribution Load (0.5ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 112]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:30:36.389416"], ["updated_at", "2015-05-15 04:30:36.389416"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:30:36.392127"], ["updated_at", "2015-05-15 04:30:36.392127"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 113], ["updated_at", "2015-05-15 04:30:36.393881"], ["id", 208]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "contributions" ("story_id", "content", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["story_id", 113], ["content", "Blah blah blah."], ["created_at", "2015-05-15 04:30:36.396605"], ["updated_at", "2015-05-15 04:30:36.396605"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"113"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.8ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 113]]
  [1m[36mContribution Load (1.4ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 113]]
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 2.2ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:30:36.410250"], ["updated_at", "2015-05-15 04:30:36.410250"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:30:36.413559"], ["updated_at", "2015-05-15 04:30:36.413559"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:30:36.416560"], ["updated_at", "2015-05-15 04:30:36.416560"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.8ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:30:36.427335"], ["updated_at", "2015-05-15 04:30:36.427335"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:30:36.430165"], ["updated_at", "2015-05-15 04:30:36.430165"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:30:36.434193"], ["updated_at", "2015-05-15 04:30:36.434193"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 04:30:36.437997"], ["updated_at", "2015-05-15 04:30:36.437997"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 114], ["updated_at", "2015-05-15 04:30:36.440051"], ["id", 212]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 04:30:36.442859"], ["updated_at", "2015-05-15 04:30:36.442859"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 115], ["updated_at", "2015-05-15 04:30:36.444411"], ["id", 213]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 04:30:36.446977"], ["updated_at", "2015-05-15 04:30:36.446977"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 116], ["updated_at", "2015-05-15 04:30:36.448510"], ["id", 214]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"uashdfkjasdgfhabdsvfhjksad"}, "story_id"=>"1"}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"uashdfkjasdgfhabdsvfhjksad"}, "story_id"=>"1"}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.6ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 6ms (Views: 1.6ms | ActiveRecord: 3.4ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:31:47.952125"], ["updated_at", "2015-05-15 04:31:47.952125"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.3ms | ActiveRecord: 3.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:31:47.963610"], ["updated_at", "2015-05-15 04:31:47.963610"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[36mStory Load (0.8ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:31:47.972410"], ["updated_at", "2015-05-15 04:31:47.972410"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:31:47.987118"], ["updated_at", "2015-05-15 04:31:47.987118"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:31:47.995144"], ["updated_at", "2015-05-15 04:31:47.995144"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 120], ["updated_at", "2015-05-15 04:31:47.997101"], ["id", 215]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:31:48.005469"], ["updated_at", "2015-05-15 04:31:48.005469"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:31:48.009443"], ["updated_at", "2015-05-15 04:31:48.009443"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 121], ["updated_at", "2015-05-15 04:31:48.011272"], ["id", 216]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:31:48.033918"], ["updated_at", "2015-05-15 04:31:48.033918"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:31:48.037301"], ["updated_at", "2015-05-15 04:31:48.037301"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 122], ["updated_at", "2015-05-15 04:31:48.039809"], ["id", 217]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:31:48.045781"], ["updated_at", "2015-05-15 04:31:48.045781"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:31:48.050493"], ["updated_at", "2015-05-15 04:31:48.050493"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 123], ["updated_at", "2015-05-15 04:31:48.051958"], ["id", 218]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:31:48.060111"], ["updated_at", "2015-05-15 04:31:48.060111"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:31:48.063652"], ["updated_at", "2015-05-15 04:31:48.063652"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 124], ["updated_at", "2015-05-15 04:31:48.064877"], ["id", 219]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:31:48.069351"], ["updated_at", "2015-05-15 04:31:48.069351"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:31:48.073960"], ["updated_at", "2015-05-15 04:31:48.073960"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 125], ["updated_at", "2015-05-15 04:31:48.075486"], ["id", 220]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:31:48.082248"], ["updated_at", "2015-05-15 04:31:48.082248"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:31:48.084826"], ["updated_at", "2015-05-15 04:31:48.084826"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:31:48.087346"], ["updated_at", "2015-05-15 04:31:48.087346"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.7ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:31:48.099007"], ["updated_at", "2015-05-15 04:31:48.099007"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:31:48.102773"], ["updated_at", "2015-05-15 04:31:48.102773"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:31:48.105542"], ["updated_at", "2015-05-15 04:31:48.105542"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:31:48.108290"], ["updated_at", "2015-05-15 04:31:48.108290"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 126], ["updated_at", "2015-05-15 04:31:48.110408"], ["id", 224]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:31:48.113257"], ["updated_at", "2015-05-15 04:31:48.113257"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 127], ["updated_at", "2015-05-15 04:31:48.115071"], ["id", 225]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:31:48.117572"], ["updated_at", "2015-05-15 04:31:48.117572"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 128], ["updated_at", "2015-05-15 04:31:48.119181"], ["id", 226]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"uashdfkjasdgfhabdsvfhjksad"}, "story_id"=>"1"}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"uashdfkjasdgfhabdsvfhjksad"}, "story_id"=>"1"}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.1ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 5ms (Views: 1.4ms | ActiveRecord: 2.7ms)
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:36:09.269264"], ["updated_at", "2015-05-15 04:36:09.269264"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 21ms (Views: 0.5ms | ActiveRecord: 5.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:36:09.284121"], ["updated_at", "2015-05-15 04:36:09.284121"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:36:09.294279"], ["updated_at", "2015-05-15 04:36:09.294279"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:36:09.308864"], ["updated_at", "2015-05-15 04:36:09.308864"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:36:09.316974"], ["updated_at", "2015-05-15 04:36:09.316974"]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 132], ["updated_at", "2015-05-15 04:36:09.318780"], ["id", 227]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 04:36:09.333094"], ["updated_at", "2015-05-15 04:36:09.333094"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 132], ["updated_at", "2015-05-15 04:36:09.348773"], ["id", 7]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"132"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 132]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 132]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35mContribution Exists (0.5ms)[0m  SELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1  [["story_id", 132], ["id", 7]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:36:09.371527"], ["updated_at", "2015-05-15 04:36:09.371527"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:36:09.374280"], ["updated_at", "2015-05-15 04:36:09.374280"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 133], ["updated_at", "2015-05-15 04:36:09.375711"], ["id", 228]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 04:36:09.378435"], ["updated_at", "2015-05-15 04:36:09.378435"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 133], ["updated_at", "2015-05-15 04:36:09.381512"], ["id", 8]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"133"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 133]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 133]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:36:09.391399"], ["updated_at", "2015-05-15 04:36:09.391399"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:36:09.394025"], ["updated_at", "2015-05-15 04:36:09.394025"]]
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 134], ["updated_at", "2015-05-15 04:36:09.395818"], ["id", 229]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 04:36:09.399486"], ["updated_at", "2015-05-15 04:36:09.399486"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 134], ["updated_at", "2015-05-15 04:36:09.402389"], ["id", 9]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"134"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 134]]
  [1m[35mContribution Load (0.5ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 134]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (3.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:36:09.417091"], ["updated_at", "2015-05-15 04:36:09.417091"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:36:09.420158"], ["updated_at", "2015-05-15 04:36:09.420158"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:36:09.422843"], ["updated_at", "2015-05-15 04:36:09.422843"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.7ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:36:09.433415"], ["updated_at", "2015-05-15 04:36:09.433415"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:36:09.436785"], ["updated_at", "2015-05-15 04:36:09.436785"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:36:09.439886"], ["updated_at", "2015-05-15 04:36:09.439886"]]
  [1m[36m (2.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:36:09.445840"], ["updated_at", "2015-05-15 04:36:09.445840"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 135], ["updated_at", "2015-05-15 04:36:09.448095"], ["id", 233]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:36:09.451971"], ["updated_at", "2015-05-15 04:36:09.451971"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 136], ["updated_at", "2015-05-15 04:36:09.453786"], ["id", 234]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:36:09.456759"], ["updated_at", "2015-05-15 04:36:09.456759"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 137], ["updated_at", "2015-05-15 04:36:09.458343"], ["id", 235]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:44:27.095540"], ["updated_at", "2015-05-15 04:44:27.095540"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:44:27.108051"], ["updated_at", "2015-05-15 04:44:27.108051"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 138], ["updated_at", "2015-05-15 04:44:27.110637"], ["id", 236]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"content"=>"something", "story_id"=>"138"}
Geokit is using the domain: test.host
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:44:27.130327"], ["updated_at", "2015-05-15 04:44:27.130327"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:44:27.134301"], ["updated_at", "2015-05-15 04:44:27.134301"]]
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 139], ["updated_at", "2015-05-15 04:44:27.136486"], ["id", 237]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"content"=>"something", "story_id"=>"139"}
Geokit is using the domain: test.host
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.7ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.7ms)
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:44:27.154066"], ["updated_at", "2015-05-15 04:44:27.154066"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:44:27.162808"], ["updated_at", "2015-05-15 04:44:27.162808"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.7ms)
  [1m[36mStory Load (0.9ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:44:27.172560"], ["updated_at", "2015-05-15 04:44:27.172560"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:44:27.178507"], ["updated_at", "2015-05-15 04:44:27.178507"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:44:27.181263"], ["updated_at", "2015-05-15 04:44:27.181263"]]
  [1m[35mSQL (1.3ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 143], ["updated_at", "2015-05-15 04:44:27.183182"], ["id", 238]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 04:44:27.195739"], ["updated_at", "2015-05-15 04:44:27.195739"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 143], ["updated_at", "2015-05-15 04:44:27.213116"], ["id", 10]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"143"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.8ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 143]]
  [1m[36mContribution Load (0.7ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 143]]
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 1.4ms)
  [1m[35mContribution Exists (0.5ms)[0m  SELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1  [["story_id", 143], ["id", 10]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:44:27.238516"], ["updated_at", "2015-05-15 04:44:27.238516"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:44:27.241068"], ["updated_at", "2015-05-15 04:44:27.241068"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 144], ["updated_at", "2015-05-15 04:44:27.242678"], ["id", 239]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 04:44:27.245782"], ["updated_at", "2015-05-15 04:44:27.245782"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 144], ["updated_at", "2015-05-15 04:44:27.249262"], ["id", 11]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"144"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 144]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 144]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:44:27.260172"], ["updated_at", "2015-05-15 04:44:27.260172"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:44:27.262840"], ["updated_at", "2015-05-15 04:44:27.262840"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 145], ["updated_at", "2015-05-15 04:44:27.264603"], ["id", 240]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 04:44:27.267683"], ["updated_at", "2015-05-15 04:44:27.267683"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 145], ["updated_at", "2015-05-15 04:44:27.270605"], ["id", 12]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"145"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 145]]
  [1m[35mContribution Load (1.1ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 145]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:44:27.284104"], ["updated_at", "2015-05-15 04:44:27.284104"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:44:27.286956"], ["updated_at", "2015-05-15 04:44:27.286956"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:44:27.289520"], ["updated_at", "2015-05-15 04:44:27.289520"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.7ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:44:27.298315"], ["updated_at", "2015-05-15 04:44:27.298315"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:44:27.300766"], ["updated_at", "2015-05-15 04:44:27.300766"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:44:27.302892"], ["updated_at", "2015-05-15 04:44:27.302892"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:44:27.305213"], ["updated_at", "2015-05-15 04:44:27.305213"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 146], ["updated_at", "2015-05-15 04:44:27.307624"], ["id", 244]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:44:27.311175"], ["updated_at", "2015-05-15 04:44:27.311175"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 147], ["updated_at", "2015-05-15 04:44:27.313054"], ["id", 245]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:44:27.316817"], ["updated_at", "2015-05-15 04:44:27.316817"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 148], ["updated_at", "2015-05-15 04:44:27.318930"], ["id", 246]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:46:26.792192"], ["updated_at", "2015-05-15 04:46:26.792192"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:46:26.803369"], ["updated_at", "2015-05-15 04:46:26.803369"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 149], ["updated_at", "2015-05-15 04:46:26.806056"], ["id", 247]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:46:26.817425"], ["updated_at", "2015-05-15 04:46:26.817425"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:46:26.819910"], ["updated_at", "2015-05-15 04:46:26.819910"]]
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 150], ["updated_at", "2015-05-15 04:46:26.821532"], ["id", 248]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.7ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.7ms)
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:46:26.839415"], ["updated_at", "2015-05-15 04:46:26.839415"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:46:26.849823"], ["updated_at", "2015-05-15 04:46:26.849823"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.8ms)
  [1m[36mStory Load (1.1ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:46:26.859987"], ["updated_at", "2015-05-15 04:46:26.859987"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:46:26.867129"], ["updated_at", "2015-05-15 04:46:26.867129"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:46:26.869873"], ["updated_at", "2015-05-15 04:46:26.869873"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 154], ["updated_at", "2015-05-15 04:46:26.871417"], ["id", 249]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 04:46:26.881442"], ["updated_at", "2015-05-15 04:46:26.881442"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 154], ["updated_at", "2015-05-15 04:46:26.898559"], ["id", 13]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"154"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 154]]
  [1m[36mContribution Load (0.7ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 154]]
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[35mContribution Exists (0.5ms)[0m  SELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1  [["story_id", 154], ["id", 13]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:46:26.922957"], ["updated_at", "2015-05-15 04:46:26.922957"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:46:26.925419"], ["updated_at", "2015-05-15 04:46:26.925419"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 155], ["updated_at", "2015-05-15 04:46:26.926879"], ["id", 250]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 04:46:26.930242"], ["updated_at", "2015-05-15 04:46:26.930242"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 155], ["updated_at", "2015-05-15 04:46:26.933456"], ["id", 14]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"155"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 155]]
  [1m[36mContribution Load (0.5ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 155]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:46:26.943942"], ["updated_at", "2015-05-15 04:46:26.943942"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:46:26.947485"], ["updated_at", "2015-05-15 04:46:26.947485"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 156], ["updated_at", "2015-05-15 04:46:26.949390"], ["id", 251]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 04:46:26.952347"], ["updated_at", "2015-05-15 04:46:26.952347"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 156], ["updated_at", "2015-05-15 04:46:26.955201"], ["id", 15]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"156"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 156]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 156]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:46:26.966845"], ["updated_at", "2015-05-15 04:46:26.966845"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:46:26.969691"], ["updated_at", "2015-05-15 04:46:26.969691"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:46:26.972420"], ["updated_at", "2015-05-15 04:46:26.972420"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.2ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:46:26.982597"], ["updated_at", "2015-05-15 04:46:26.982597"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:46:26.985197"], ["updated_at", "2015-05-15 04:46:26.985197"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:46:26.987502"], ["updated_at", "2015-05-15 04:46:26.987502"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:46:26.989870"], ["updated_at", "2015-05-15 04:46:26.989870"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 157], ["updated_at", "2015-05-15 04:46:26.991923"], ["id", 255]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:46:26.994582"], ["updated_at", "2015-05-15 04:46:26.994582"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 158], ["updated_at", "2015-05-15 04:46:26.996053"], ["id", 256]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:46:26.998301"], ["updated_at", "2015-05-15 04:46:26.998301"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 159], ["updated_at", "2015-05-15 04:46:26.999903"], ["id", 257]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:57:52.634443"], ["updated_at", "2015-05-15 04:57:52.634443"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:57:52.645864"], ["updated_at", "2015-05-15 04:57:52.645864"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 160], ["updated_at", "2015-05-15 04:57:52.648570"], ["id", 258]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"params"=>{"contribution"=>{"content"=>"something"}}, "story_id"=>"160"}
Geokit is using the domain: test.host
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:57:52.663461"], ["updated_at", "2015-05-15 04:57:52.663461"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:57:52.666355"], ["updated_at", "2015-05-15 04:57:52.666355"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 161], ["updated_at", "2015-05-15 04:57:52.668791"], ["id", 259]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"params"=>{"contribution"=>{"content"=>"something"}}, "story_id"=>"161"}
Geokit is using the domain: test.host
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (1.1ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 1.1ms)
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:57:52.686337"], ["updated_at", "2015-05-15 04:57:52.686337"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:57:52.698370"], ["updated_at", "2015-05-15 04:57:52.698370"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[36mStory Load (1.0ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:57:52.707420"], ["updated_at", "2015-05-15 04:57:52.707420"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:57:52.716720"], ["updated_at", "2015-05-15 04:57:52.716720"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:57:52.720200"], ["updated_at", "2015-05-15 04:57:52.720200"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 165], ["updated_at", "2015-05-15 04:57:52.721992"], ["id", 260]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 04:57:52.732829"], ["updated_at", "2015-05-15 04:57:52.732829"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 165], ["updated_at", "2015-05-15 04:57:52.744751"], ["id", 16]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"165"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 165]]
  [1m[36mContribution Load (0.7ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 165]]
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[35mContribution Exists (0.6ms)[0m  SELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1  [["story_id", 165], ["id", 16]]
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:57:52.775176"], ["updated_at", "2015-05-15 04:57:52.775176"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:57:52.779339"], ["updated_at", "2015-05-15 04:57:52.779339"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 166], ["updated_at", "2015-05-15 04:57:52.781048"], ["id", 261]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 04:57:52.783805"], ["updated_at", "2015-05-15 04:57:52.783805"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 166], ["updated_at", "2015-05-15 04:57:52.786252"], ["id", 17]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"166"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 166]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 166]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:57:52.798049"], ["updated_at", "2015-05-15 04:57:52.798049"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:57:52.800761"], ["updated_at", "2015-05-15 04:57:52.800761"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 167], ["updated_at", "2015-05-15 04:57:52.802407"], ["id", 262]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 04:57:52.805326"], ["updated_at", "2015-05-15 04:57:52.805326"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 167], ["updated_at", "2015-05-15 04:57:52.808635"], ["id", 18]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"167"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 167]]
  [1m[35mContribution Load (0.5ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 167]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.7ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:57:52.822034"], ["updated_at", "2015-05-15 04:57:52.822034"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:57:52.827004"], ["updated_at", "2015-05-15 04:57:52.827004"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:57:52.831084"], ["updated_at", "2015-05-15 04:57:52.831084"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.6ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:57:52.840821"], ["updated_at", "2015-05-15 04:57:52.840821"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:57:52.844074"], ["updated_at", "2015-05-15 04:57:52.844074"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:57:52.848420"], ["updated_at", "2015-05-15 04:57:52.848420"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:57:52.852500"], ["updated_at", "2015-05-15 04:57:52.852500"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 168], ["updated_at", "2015-05-15 04:57:52.854049"], ["id", 266]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:57:52.856089"], ["updated_at", "2015-05-15 04:57:52.856089"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 169], ["updated_at", "2015-05-15 04:57:52.857353"], ["id", 267]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:57:52.859079"], ["updated_at", "2015-05-15 04:57:52.859079"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 170], ["updated_at", "2015-05-15 04:57:52.860189"], ["id", 268]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (0.8ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:58:29.427083"], ["updated_at", "2015-05-15 04:58:29.427083"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:58:29.438197"], ["updated_at", "2015-05-15 04:58:29.438197"]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 171], ["updated_at", "2015-05-15 04:58:29.440648"], ["id", 269]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:58:29.453109"], ["updated_at", "2015-05-15 04:58:29.453109"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:58:29.455925"], ["updated_at", "2015-05-15 04:58:29.455925"]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 172], ["updated_at", "2015-05-15 04:58:29.458085"], ["id", 270]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.9ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.9ms)
  [1m[35mStory Load (0.8ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:58:29.475440"], ["updated_at", "2015-05-15 04:58:29.475440"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:58:29.486844"], ["updated_at", "2015-05-15 04:58:29.486844"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 1.4ms)
  [1m[36mStory Load (1.2ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 04:58:29.498138"], ["updated_at", "2015-05-15 04:58:29.498138"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.2ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:58:29.506383"], ["updated_at", "2015-05-15 04:58:29.506383"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:58:29.509164"], ["updated_at", "2015-05-15 04:58:29.509164"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 176], ["updated_at", "2015-05-15 04:58:29.510930"], ["id", 271]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 04:58:29.523178"], ["updated_at", "2015-05-15 04:58:29.523178"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 176], ["updated_at", "2015-05-15 04:58:29.539074"], ["id", 19]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"176"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.3ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 176]]
  [1m[36mContribution Load (0.4ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 176]]
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35mContribution Exists (0.3ms)[0m  SELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1  [["story_id", 176], ["id", 19]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:58:29.560254"], ["updated_at", "2015-05-15 04:58:29.560254"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:58:29.562260"], ["updated_at", "2015-05-15 04:58:29.562260"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 177], ["updated_at", "2015-05-15 04:58:29.563584"], ["id", 272]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 04:58:29.566996"], ["updated_at", "2015-05-15 04:58:29.566996"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 177], ["updated_at", "2015-05-15 04:58:29.569817"], ["id", 20]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"177"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 177]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 177]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:58:29.582432"], ["updated_at", "2015-05-15 04:58:29.582432"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 04:58:29.585876"], ["updated_at", "2015-05-15 04:58:29.585876"]]
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 178], ["updated_at", "2015-05-15 04:58:29.588123"], ["id", 273]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 04:58:29.592428"], ["updated_at", "2015-05-15 04:58:29.592428"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 178], ["updated_at", "2015-05-15 04:58:29.595702"], ["id", 21]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"178"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 178]]
  [1m[35mContribution Load (0.5ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 178]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:58:29.607581"], ["updated_at", "2015-05-15 04:58:29.607581"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:58:29.610829"], ["updated_at", "2015-05-15 04:58:29.610829"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:58:29.615264"], ["updated_at", "2015-05-15 04:58:29.615264"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.0ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 04:58:29.627324"], ["updated_at", "2015-05-15 04:58:29.627324"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 04:58:29.630091"], ["updated_at", "2015-05-15 04:58:29.630091"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 04:58:29.634262"], ["updated_at", "2015-05-15 04:58:29.634262"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:58:29.640548"], ["updated_at", "2015-05-15 04:58:29.640548"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 179], ["updated_at", "2015-05-15 04:58:29.644039"], ["id", 277]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:58:29.648240"], ["updated_at", "2015-05-15 04:58:29.648240"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 180], ["updated_at", "2015-05-15 04:58:29.650234"], ["id", 278]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 04:58:29.652772"], ["updated_at", "2015-05-15 04:58:29.652772"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 181], ["updated_at", "2015-05-15 04:58:29.655411"], ["id", 279]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "locations"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:48:55.964507"], ["updated_at", "2015-05-15 06:48:55.964507"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:48:55.983608"], ["updated_at", "2015-05-15 06:48:55.983608"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 182], ["updated_at", "2015-05-15 06:48:55.986247"], ["id", 280]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"params"=>{"contribution"=>{"content"=>"something"}}, "story_id"=>"182"}
Geokit is using the domain: test.host
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:48:56.005248"], ["updated_at", "2015-05-15 06:48:56.005248"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:48:56.009568"], ["updated_at", "2015-05-15 06:48:56.009568"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 183], ["updated_at", "2015-05-15 06:48:56.011753"], ["id", 281]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"params"=>{"contribution"=>{"content"=>"something"}}, "story_id"=>"183"}
Geokit is using the domain: test.host
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.6ms)
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:48:56.036896"], ["updated_at", "2015-05-15 06:48:56.036896"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:48:56.048143"], ["updated_at", "2015-05-15 06:48:56.048143"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[36mStory Load (1.2ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:48:56.059241"], ["updated_at", "2015-05-15 06:48:56.059241"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.5ms | ActiveRecord: 0.9ms)
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:48:56.067962"], ["updated_at", "2015-05-15 06:48:56.067962"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:48:56.070935"], ["updated_at", "2015-05-15 06:48:56.070935"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 187], ["updated_at", "2015-05-15 06:48:56.072801"], ["id", 282]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:48:56.085771"], ["updated_at", "2015-05-15 06:48:56.085771"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 187], ["updated_at", "2015-05-15 06:48:56.103179"], ["id", 22]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"187"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 187]]
  [1m[36mContribution Load (0.7ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 187]]
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 1.4ms)
  [1m[35mContribution Exists (0.8ms)[0m  SELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1  [["story_id", 187], ["id", 22]]
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:48:56.134217"], ["updated_at", "2015-05-15 06:48:56.134217"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:48:56.138787"], ["updated_at", "2015-05-15 06:48:56.138787"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 188], ["updated_at", "2015-05-15 06:48:56.140943"], ["id", 283]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:48:56.145290"], ["updated_at", "2015-05-15 06:48:56.145290"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 188], ["updated_at", "2015-05-15 06:48:56.148599"], ["id", 23]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"188"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.3ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 188]]
  [1m[36mContribution Load (1.2ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 188]]
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:48:56.162148"], ["updated_at", "2015-05-15 06:48:56.162148"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:48:56.165151"], ["updated_at", "2015-05-15 06:48:56.165151"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 189], ["updated_at", "2015-05-15 06:48:56.166906"], ["id", 284]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:48:56.170475"], ["updated_at", "2015-05-15 06:48:56.170475"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 189], ["updated_at", "2015-05-15 06:48:56.173090"], ["id", 24]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"189"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 189]]
  [1m[35mContribution Load (0.5ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 189]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 06:48:56.184404"], ["updated_at", "2015-05-15 06:48:56.184404"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:48:56.188371"], ["updated_at", "2015-05-15 06:48:56.188371"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 06:48:56.191213"], ["updated_at", "2015-05-15 06:48:56.191213"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.7ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 06:48:56.204796"], ["updated_at", "2015-05-15 06:48:56.204796"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:48:56.210081"], ["updated_at", "2015-05-15 06:48:56.210081"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 06:48:56.212057"], ["updated_at", "2015-05-15 06:48:56.212057"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:48:56.214050"], ["updated_at", "2015-05-15 06:48:56.214050"]]
  [1m[35mSQL (1.2ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 190], ["updated_at", "2015-05-15 06:48:56.216229"], ["id", 288]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:48:56.220844"], ["updated_at", "2015-05-15 06:48:56.220844"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 191], ["updated_at", "2015-05-15 06:48:56.222850"], ["id", 289]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:48:56.226671"], ["updated_at", "2015-05-15 06:48:56.226671"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 192], ["updated_at", "2015-05-15 06:48:56.229192"], ["id", 290]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:49:36.948008"], ["updated_at", "2015-05-15 06:49:36.948008"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:49:36.959458"], ["updated_at", "2015-05-15 06:49:36.959458"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 193], ["updated_at", "2015-05-15 06:49:36.961857"], ["id", 291]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"params"=>{"contribution"=>{"content"=>"something"}}, "story_id"=>"193"}
Geokit is using the domain: test.host
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:49:36.980021"], ["updated_at", "2015-05-15 06:49:36.980021"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:49:36.983181"], ["updated_at", "2015-05-15 06:49:36.983181"]]
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 194], ["updated_at", "2015-05-15 06:49:36.985055"], ["id", 292]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"params"=>{"contribution"=>{"content"=>"something"}}, "story_id"=>"194"}
Geokit is using the domain: test.host
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.7ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.7ms)
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:49:37.008194"], ["updated_at", "2015-05-15 06:49:37.008194"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.6ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:49:37.023129"], ["updated_at", "2015-05-15 06:49:37.023129"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[36mStory Load (0.9ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:49:37.031565"], ["updated_at", "2015-05-15 06:49:37.031565"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.8ms)
  [1m[36m (1.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:49:37.044783"], ["updated_at", "2015-05-15 06:49:37.044783"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:49:37.048252"], ["updated_at", "2015-05-15 06:49:37.048252"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 198], ["updated_at", "2015-05-15 06:49:37.050281"], ["id", 293]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:49:37.068504"], ["updated_at", "2015-05-15 06:49:37.068504"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 198], ["updated_at", "2015-05-15 06:49:37.083567"], ["id", 25]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"198"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 198]]
  [1m[36mContribution Load (0.5ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 198]]
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35mContribution Exists (0.6ms)[0m  SELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1  [["story_id", 198], ["id", 25]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:49:37.109130"], ["updated_at", "2015-05-15 06:49:37.109130"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:49:37.111600"], ["updated_at", "2015-05-15 06:49:37.111600"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 199], ["updated_at", "2015-05-15 06:49:37.113278"], ["id", 294]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:49:37.116468"], ["updated_at", "2015-05-15 06:49:37.116468"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 199], ["updated_at", "2015-05-15 06:49:37.120481"], ["id", 26]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"199"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 199]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 199]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:49:37.132520"], ["updated_at", "2015-05-15 06:49:37.132520"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:49:37.135905"], ["updated_at", "2015-05-15 06:49:37.135905"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 200], ["updated_at", "2015-05-15 06:49:37.138148"], ["id", 295]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:49:37.141053"], ["updated_at", "2015-05-15 06:49:37.141053"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 200], ["updated_at", "2015-05-15 06:49:37.143556"], ["id", 27]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"200"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 200]]
  [1m[35mContribution Load (0.3ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 200]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 06:49:37.153646"], ["updated_at", "2015-05-15 06:49:37.153646"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:49:37.156376"], ["updated_at", "2015-05-15 06:49:37.156376"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 06:49:37.161794"], ["updated_at", "2015-05-15 06:49:37.161794"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.0ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 06:49:37.174905"], ["updated_at", "2015-05-15 06:49:37.174905"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:49:37.178444"], ["updated_at", "2015-05-15 06:49:37.178444"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 06:49:37.181135"], ["updated_at", "2015-05-15 06:49:37.181135"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:49:37.184715"], ["updated_at", "2015-05-15 06:49:37.184715"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 201], ["updated_at", "2015-05-15 06:49:37.188074"], ["id", 299]]
  [1m[36m (0.9ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:49:37.193353"], ["updated_at", "2015-05-15 06:49:37.193353"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 202], ["updated_at", "2015-05-15 06:49:37.195928"], ["id", 300]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:49:37.199666"], ["updated_at", "2015-05-15 06:49:37.199666"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 203], ["updated_at", "2015-05-15 06:49:37.202323"], ["id", 301]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (0.8ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:50:31.784448"], ["updated_at", "2015-05-15 06:50:31.784448"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:50:31.796085"], ["updated_at", "2015-05-15 06:50:31.796085"]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 204], ["updated_at", "2015-05-15 06:50:31.798938"], ["id", 302]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"params"=>{"contribution"=>{"content"=>"something"}}, "story_id"=>"204"}
Geokit is using the domain: test.host
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:50:31.814275"], ["updated_at", "2015-05-15 06:50:31.814275"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:50:31.818102"], ["updated_at", "2015-05-15 06:50:31.818102"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 205], ["updated_at", "2015-05-15 06:50:31.820061"], ["id", 303]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"params"=>{"contribution"=>{"content"=>"something"}}, "story_id"=>"205"}
Geokit is using the domain: test.host
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.6ms)
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:50:31.837414"], ["updated_at", "2015-05-15 06:50:31.837414"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:50:31.848850"], ["updated_at", "2015-05-15 06:50:31.848850"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.4ms)
  [1m[36mStory Load (1.2ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:50:31.859625"], ["updated_at", "2015-05-15 06:50:31.859625"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:50:31.865797"], ["updated_at", "2015-05-15 06:50:31.865797"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:50:31.868439"], ["updated_at", "2015-05-15 06:50:31.868439"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 209], ["updated_at", "2015-05-15 06:50:31.870118"], ["id", 304]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:50:31.887612"], ["updated_at", "2015-05-15 06:50:31.887612"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 209], ["updated_at", "2015-05-15 06:50:31.901144"], ["id", 28]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"209"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 209]]
  [1m[36mContribution Load (0.9ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 209]]
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.4ms)
  [1m[35mContribution Exists (0.4ms)[0m  SELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1  [["story_id", 209], ["id", 28]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:50:31.929001"], ["updated_at", "2015-05-15 06:50:31.929001"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:50:31.933256"], ["updated_at", "2015-05-15 06:50:31.933256"]]
  [1m[35mSQL (1.1ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 210], ["updated_at", "2015-05-15 06:50:31.935822"], ["id", 305]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:50:31.939979"], ["updated_at", "2015-05-15 06:50:31.939979"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 210], ["updated_at", "2015-05-15 06:50:31.943443"], ["id", 29]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"210"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 210]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 210]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:50:31.955424"], ["updated_at", "2015-05-15 06:50:31.955424"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:50:31.958441"], ["updated_at", "2015-05-15 06:50:31.958441"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 211], ["updated_at", "2015-05-15 06:50:31.960122"], ["id", 306]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:50:31.963761"], ["updated_at", "2015-05-15 06:50:31.963761"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 211], ["updated_at", "2015-05-15 06:50:31.968459"], ["id", 30]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"211"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 211]]
  [1m[35mContribution Load (0.5ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 211]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 06:50:31.978683"], ["updated_at", "2015-05-15 06:50:31.978683"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:50:31.981221"], ["updated_at", "2015-05-15 06:50:31.981221"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 06:50:31.984644"], ["updated_at", "2015-05-15 06:50:31.984644"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.8ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 06:50:31.995025"], ["updated_at", "2015-05-15 06:50:31.995025"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:50:32.000014"], ["updated_at", "2015-05-15 06:50:32.000014"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 06:50:32.004255"], ["updated_at", "2015-05-15 06:50:32.004255"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:50:32.007176"], ["updated_at", "2015-05-15 06:50:32.007176"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 212], ["updated_at", "2015-05-15 06:50:32.008933"], ["id", 310]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:50:32.011896"], ["updated_at", "2015-05-15 06:50:32.011896"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 213], ["updated_at", "2015-05-15 06:50:32.013292"], ["id", 311]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:50:32.015382"], ["updated_at", "2015-05-15 06:50:32.015382"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 214], ["updated_at", "2015-05-15 06:50:32.016641"], ["id", 312]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (0.8ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "locations"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:52:44.816644"], ["updated_at", "2015-05-15 06:52:44.816644"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:52:44.829010"], ["updated_at", "2015-05-15 06:52:44.829010"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 215], ["updated_at", "2015-05-15 06:52:44.832061"], ["id", 313]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:52:44.848629"], ["updated_at", "2015-05-15 06:52:44.848629"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:52:44.853649"], ["updated_at", "2015-05-15 06:52:44.853649"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 216], ["updated_at", "2015-05-15 06:52:44.856003"], ["id", 314]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.4ms)
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:52:44.874699"], ["updated_at", "2015-05-15 06:52:44.874699"]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.8ms | ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:52:44.890448"], ["updated_at", "2015-05-15 06:52:44.890448"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.5ms | ActiveRecord: 1.2ms)
  [1m[36mStory Load (1.1ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:52:44.903326"], ["updated_at", "2015-05-15 06:52:44.903326"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:52:44.909007"], ["updated_at", "2015-05-15 06:52:44.909007"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:52:44.912461"], ["updated_at", "2015-05-15 06:52:44.912461"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 220], ["updated_at", "2015-05-15 06:52:44.916165"], ["id", 315]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:52:44.930719"], ["updated_at", "2015-05-15 06:52:44.930719"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 220], ["updated_at", "2015-05-15 06:52:44.947724"], ["id", 31]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"220"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 220]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 220]]
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[35mContribution Exists (0.5ms)[0m  SELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1  [["story_id", 220], ["id", 31]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:52:44.971107"], ["updated_at", "2015-05-15 06:52:44.971107"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:52:44.974119"], ["updated_at", "2015-05-15 06:52:44.974119"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 221], ["updated_at", "2015-05-15 06:52:44.975742"], ["id", 316]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:52:44.978651"], ["updated_at", "2015-05-15 06:52:44.978651"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 221], ["updated_at", "2015-05-15 06:52:44.983013"], ["id", 32]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"221"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 221]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 221]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:52:44.993467"], ["updated_at", "2015-05-15 06:52:44.993467"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:52:44.996778"], ["updated_at", "2015-05-15 06:52:44.996778"]]
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 222], ["updated_at", "2015-05-15 06:52:44.998938"], ["id", 317]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:52:45.003082"], ["updated_at", "2015-05-15 06:52:45.003082"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 222], ["updated_at", "2015-05-15 06:52:45.005974"], ["id", 33]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"222"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 222]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 222]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 06:52:45.018333"], ["updated_at", "2015-05-15 06:52:45.018333"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:52:45.021264"], ["updated_at", "2015-05-15 06:52:45.021264"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 06:52:45.023965"], ["updated_at", "2015-05-15 06:52:45.023965"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.5ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (3.2ms)[0m  DELETE FROM "locations"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 06:52:45.037586"], ["updated_at", "2015-05-15 06:52:45.037586"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:52:45.041108"], ["updated_at", "2015-05-15 06:52:45.041108"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 06:52:45.044225"], ["updated_at", "2015-05-15 06:52:45.044225"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:52:45.049700"], ["updated_at", "2015-05-15 06:52:45.049700"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 223], ["updated_at", "2015-05-15 06:52:45.052164"], ["id", 321]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:52:45.055126"], ["updated_at", "2015-05-15 06:52:45.055126"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 224], ["updated_at", "2015-05-15 06:52:45.056714"], ["id", 322]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:52:45.059430"], ["updated_at", "2015-05-15 06:52:45.059430"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 225], ["updated_at", "2015-05-15 06:52:45.063563"], ["id", 323]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:53:12.318756"], ["updated_at", "2015-05-15 06:53:12.318756"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:53:12.328879"], ["updated_at", "2015-05-15 06:53:12.328879"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 226], ["updated_at", "2015-05-15 06:53:12.330832"], ["id", 324]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"params"=>{"contribution"=>{"content"=>"something"}, "story_id"=>"226"}, "story_id"=>"226"}
Geokit is using the domain: test.host
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:53:12.347713"], ["updated_at", "2015-05-15 06:53:12.347713"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:53:12.354570"], ["updated_at", "2015-05-15 06:53:12.354570"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 227], ["updated_at", "2015-05-15 06:53:12.357661"], ["id", 325]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"params"=>{"contribution"=>{"content"=>"something"}, "story_id"=>"227"}, "story_id"=>"227"}
Geokit is using the domain: test.host
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.7ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.7ms)
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:53:12.376219"], ["updated_at", "2015-05-15 06:53:12.376219"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:53:12.387204"], ["updated_at", "2015-05-15 06:53:12.387204"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.6ms)
  [1m[36mStory Load (1.2ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:53:12.398151"], ["updated_at", "2015-05-15 06:53:12.398151"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:53:12.405303"], ["updated_at", "2015-05-15 06:53:12.405303"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:53:12.408314"], ["updated_at", "2015-05-15 06:53:12.408314"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 231], ["updated_at", "2015-05-15 06:53:12.411267"], ["id", 326]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:53:12.423041"], ["updated_at", "2015-05-15 06:53:12.423041"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 231], ["updated_at", "2015-05-15 06:53:12.435312"], ["id", 34]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"231"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 231]]
  [1m[36mContribution Load (0.5ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 231]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[35mContribution Exists (0.7ms)[0m  SELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1  [["story_id", 231], ["id", 34]]
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:53:12.461850"], ["updated_at", "2015-05-15 06:53:12.461850"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:53:12.467980"], ["updated_at", "2015-05-15 06:53:12.467980"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 232], ["updated_at", "2015-05-15 06:53:12.471143"], ["id", 327]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:53:12.474381"], ["updated_at", "2015-05-15 06:53:12.474381"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 232], ["updated_at", "2015-05-15 06:53:12.477738"], ["id", 35]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"232"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 232]]
  [1m[36mContribution Load (0.5ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 232]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:53:12.487957"], ["updated_at", "2015-05-15 06:53:12.487957"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:53:12.490616"], ["updated_at", "2015-05-15 06:53:12.490616"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 233], ["updated_at", "2015-05-15 06:53:12.492240"], ["id", 328]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:53:12.495170"], ["updated_at", "2015-05-15 06:53:12.495170"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 233], ["updated_at", "2015-05-15 06:53:12.497933"], ["id", 36]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"233"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 233]]
  [1m[35mContribution Load (0.7ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 233]]
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 06:53:12.513497"], ["updated_at", "2015-05-15 06:53:12.513497"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:53:12.516364"], ["updated_at", "2015-05-15 06:53:12.516364"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 06:53:12.519085"], ["updated_at", "2015-05-15 06:53:12.519085"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.6ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 06:53:12.528981"], ["updated_at", "2015-05-15 06:53:12.528981"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:53:12.531930"], ["updated_at", "2015-05-15 06:53:12.531930"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 06:53:12.536145"], ["updated_at", "2015-05-15 06:53:12.536145"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:53:12.539303"], ["updated_at", "2015-05-15 06:53:12.539303"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 234], ["updated_at", "2015-05-15 06:53:12.542112"], ["id", 332]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:53:12.545320"], ["updated_at", "2015-05-15 06:53:12.545320"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 235], ["updated_at", "2015-05-15 06:53:12.547495"], ["id", 333]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:53:12.552628"], ["updated_at", "2015-05-15 06:53:12.552628"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 236], ["updated_at", "2015-05-15 06:53:12.555093"], ["id", 334]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:56:46.837957"], ["updated_at", "2015-05-15 06:56:46.837957"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:56:46.851117"], ["updated_at", "2015-05-15 06:56:46.851117"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 237], ["updated_at", "2015-05-15 06:56:46.853945"], ["id", 335]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"something"}, "story_id"=>"237"}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "something"], ["created_at", "2015-05-15 06:56:46.876017"], ["updated_at", "2015-05-15 06:56:46.876017"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 4.4ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:56:46.883414"], ["updated_at", "2015-05-15 06:56:46.883414"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:56:46.886281"], ["updated_at", "2015-05-15 06:56:46.886281"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 238], ["updated_at", "2015-05-15 06:56:46.889604"], ["id", 336]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"something"}, "story_id"=>"238"}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "something"], ["created_at", "2015-05-15 06:56:46.894639"], ["updated_at", "2015-05-15 06:56:46.894639"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.9ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.9ms)
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:56:46.911781"], ["updated_at", "2015-05-15 06:56:46.911781"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:56:46.923688"], ["updated_at", "2015-05-15 06:56:46.923688"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.1ms)
  [1m[36mStory Load (1.2ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:56:46.938726"], ["updated_at", "2015-05-15 06:56:46.938726"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:56:46.943692"], ["updated_at", "2015-05-15 06:56:46.943692"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:56:46.945595"], ["updated_at", "2015-05-15 06:56:46.945595"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 242], ["updated_at", "2015-05-15 06:56:46.946986"], ["id", 337]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:56:46.949587"], ["updated_at", "2015-05-15 06:56:46.949587"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 242], ["updated_at", "2015-05-15 06:56:46.963380"], ["id", 39]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"242"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 242]]
  [1m[36mContribution Load (0.3ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 242]]
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35mContribution Exists (0.5ms)[0m  SELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1  [["story_id", 242], ["id", 39]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:56:46.984927"], ["updated_at", "2015-05-15 06:56:46.984927"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:56:46.988420"], ["updated_at", "2015-05-15 06:56:46.988420"]]
  [1m[35mSQL (1.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 243], ["updated_at", "2015-05-15 06:56:46.990361"], ["id", 338]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:56:46.995365"], ["updated_at", "2015-05-15 06:56:46.995365"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 243], ["updated_at", "2015-05-15 06:56:46.998445"], ["id", 40]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"243"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.3ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 243]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 243]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:56:47.009677"], ["updated_at", "2015-05-15 06:56:47.009677"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:56:47.011688"], ["updated_at", "2015-05-15 06:56:47.011688"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 244], ["updated_at", "2015-05-15 06:56:47.012918"], ["id", 339]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:56:47.015163"], ["updated_at", "2015-05-15 06:56:47.015163"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 244], ["updated_at", "2015-05-15 06:56:47.017650"], ["id", 41]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"244"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.9ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 244]]
  [1m[35mContribution Load (0.9ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 244]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 06:56:47.029587"], ["updated_at", "2015-05-15 06:56:47.029587"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:56:47.032463"], ["updated_at", "2015-05-15 06:56:47.032463"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 06:56:47.035757"], ["updated_at", "2015-05-15 06:56:47.035757"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.6ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 06:56:47.048279"], ["updated_at", "2015-05-15 06:56:47.048279"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:56:47.050931"], ["updated_at", "2015-05-15 06:56:47.050931"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 06:56:47.057808"], ["updated_at", "2015-05-15 06:56:47.057808"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:56:47.060937"], ["updated_at", "2015-05-15 06:56:47.060937"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 245], ["updated_at", "2015-05-15 06:56:47.063260"], ["id", 343]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:56:47.066815"], ["updated_at", "2015-05-15 06:56:47.066815"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 246], ["updated_at", "2015-05-15 06:56:47.068942"], ["id", 344]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 06:56:47.073840"], ["updated_at", "2015-05-15 06:56:47.073840"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 247], ["updated_at", "2015-05-15 06:56:47.077917"], ["id", 345]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "locations"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:58:32.293284"], ["updated_at", "2015-05-15 06:58:32.293284"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:58:32.304102"], ["updated_at", "2015-05-15 06:58:32.304102"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 248], ["updated_at", "2015-05-15 06:58:32.306679"], ["id", 346]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:58:32.330102"], ["updated_at", "2015-05-15 06:58:32.330102"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"something"}, "story_id"=>"248"}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "something"], ["created_at", "2015-05-15 06:58:32.338721"], ["updated_at", "2015-05-15 06:58:32.338721"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[35mContribution Load (1.5ms)[0m  SELECT  "contributions".* FROM "contributions"  ORDER BY "contributions"."id" DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:58:32.353578"], ["updated_at", "2015-05-15 06:58:32.353578"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:58:32.356891"], ["updated_at", "2015-05-15 06:58:32.356891"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 249], ["updated_at", "2015-05-15 06:58:32.358810"], ["id", 347]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:58:32.362123"], ["updated_at", "2015-05-15 06:58:32.362123"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"something"}, "story_id"=>"249"}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "something"], ["created_at", "2015-05-15 06:58:32.368476"], ["updated_at", "2015-05-15 06:58:32.368476"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 1.6ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.7ms)
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:58:32.387731"], ["updated_at", "2015-05-15 06:58:32.387731"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.1ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:58:32.397783"], ["updated_at", "2015-05-15 06:58:32.397783"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.6ms | ActiveRecord: 2.5ms)
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:58:32.408459"], ["updated_at", "2015-05-15 06:58:32.408459"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:58:32.413975"], ["updated_at", "2015-05-15 06:58:32.413975"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:58:32.415917"], ["updated_at", "2015-05-15 06:58:32.415917"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 253], ["updated_at", "2015-05-15 06:58:32.417112"], ["id", 348]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:58:32.420343"], ["updated_at", "2015-05-15 06:58:32.420343"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.9ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 253], ["updated_at", "2015-05-15 06:58:32.434039"], ["id", 46]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"253"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 253]]
  [1m[35mContribution Load (0.7ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 253]]
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 1.2ms)
  [1m[36mContribution Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 253], ["id", 46]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:58:32.462327"], ["updated_at", "2015-05-15 06:58:32.462327"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:58:32.466274"], ["updated_at", "2015-05-15 06:58:32.466274"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 254], ["updated_at", "2015-05-15 06:58:32.469584"], ["id", 349]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:58:32.474919"], ["updated_at", "2015-05-15 06:58:32.474919"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 254], ["updated_at", "2015-05-15 06:58:32.477352"], ["id", 47]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"254"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 254]]
  [1m[35mContribution Load (0.4ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 254]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:58:32.486494"], ["updated_at", "2015-05-15 06:58:32.486494"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:58:32.488731"], ["updated_at", "2015-05-15 06:58:32.488731"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 255], ["updated_at", "2015-05-15 06:58:32.490333"], ["id", 350]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:58:32.493442"], ["updated_at", "2015-05-15 06:58:32.493442"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 255], ["updated_at", "2015-05-15 06:58:32.495724"], ["id", 48]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"255"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.3ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 255]]
  [1m[36mContribution Load (0.3ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 255]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 06:58:32.505281"], ["updated_at", "2015-05-15 06:58:32.505281"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:58:32.507630"], ["updated_at", "2015-05-15 06:58:32.507630"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 06:58:32.509683"], ["updated_at", "2015-05-15 06:58:32.509683"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.8ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 06:58:32.519570"], ["updated_at", "2015-05-15 06:58:32.519570"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:58:32.524178"], ["updated_at", "2015-05-15 06:58:32.524178"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 06:58:32.527732"], ["updated_at", "2015-05-15 06:58:32.527732"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 06:58:32.530824"], ["updated_at", "2015-05-15 06:58:32.530824"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 256], ["updated_at", "2015-05-15 06:58:32.533016"], ["id", 354]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 06:58:32.535752"], ["updated_at", "2015-05-15 06:58:32.535752"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 257], ["updated_at", "2015-05-15 06:58:32.537638"], ["id", 355]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 06:58:32.539974"], ["updated_at", "2015-05-15 06:58:32.539974"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 258], ["updated_at", "2015-05-15 06:58:32.541303"], ["id", 356]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (0.7ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:59:43.063872"], ["updated_at", "2015-05-15 06:59:43.063872"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:59:43.075940"], ["updated_at", "2015-05-15 06:59:43.075940"]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 259], ["updated_at", "2015-05-15 06:59:43.078856"], ["id", 357]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:59:43.094389"], ["updated_at", "2015-05-15 06:59:43.094389"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"259"}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:59:43.104008"], ["updated_at", "2015-05-15 06:59:43.104008"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35mContribution Load (1.7ms)[0m  SELECT  "contributions".* FROM "contributions"  ORDER BY "contributions"."id" DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:59:43.120905"], ["updated_at", "2015-05-15 06:59:43.120905"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:59:43.124634"], ["updated_at", "2015-05-15 06:59:43.124634"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 260], ["updated_at", "2015-05-15 06:59:43.127096"], ["id", 358]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:59:43.133038"], ["updated_at", "2015-05-15 06:59:43.133038"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"260"}
Geokit is using the domain: test.host
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:59:43.140914"], ["updated_at", "2015-05-15 06:59:43.140914"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.4ms)
  [1m[36mStory Load (0.2ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:59:43.152711"], ["updated_at", "2015-05-15 06:59:43.152711"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:59:43.161648"], ["updated_at", "2015-05-15 06:59:43.161648"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 0.7ms)
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 06:59:43.171829"], ["updated_at", "2015-05-15 06:59:43.171829"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:59:43.183226"], ["updated_at", "2015-05-15 06:59:43.183226"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:59:43.186376"], ["updated_at", "2015-05-15 06:59:43.186376"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 264], ["updated_at", "2015-05-15 06:59:43.187917"], ["id", 359]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:59:43.190540"], ["updated_at", "2015-05-15 06:59:43.190540"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 264], ["updated_at", "2015-05-15 06:59:43.204495"], ["id", 53]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"264"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 264]]
  [1m[35mContribution Load (0.4ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 264]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[36mContribution Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 264], ["id", 53]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:59:43.232078"], ["updated_at", "2015-05-15 06:59:43.232078"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:59:43.237897"], ["updated_at", "2015-05-15 06:59:43.237897"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 265], ["updated_at", "2015-05-15 06:59:43.239653"], ["id", 360]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:59:43.242470"], ["updated_at", "2015-05-15 06:59:43.242470"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 265], ["updated_at", "2015-05-15 06:59:43.244667"], ["id", 54]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"265"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.2ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 265]]
  [1m[35mContribution Load (0.3ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 265]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:59:43.253477"], ["updated_at", "2015-05-15 06:59:43.253477"]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 06:59:43.256671"], ["updated_at", "2015-05-15 06:59:43.256671"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 266], ["updated_at", "2015-05-15 06:59:43.259085"], ["id", 361]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 06:59:43.262976"], ["updated_at", "2015-05-15 06:59:43.262976"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 266], ["updated_at", "2015-05-15 06:59:43.264968"], ["id", 55]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"266"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 266]]
  [1m[36mContribution Load (0.5ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 266]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 06:59:43.275483"], ["updated_at", "2015-05-15 06:59:43.275483"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:59:43.277942"], ["updated_at", "2015-05-15 06:59:43.277942"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 06:59:43.280076"], ["updated_at", "2015-05-15 06:59:43.280076"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.3ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 06:59:43.292360"], ["updated_at", "2015-05-15 06:59:43.292360"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 06:59:43.296956"], ["updated_at", "2015-05-15 06:59:43.296956"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 06:59:43.299772"], ["updated_at", "2015-05-15 06:59:43.299772"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 06:59:43.302532"], ["updated_at", "2015-05-15 06:59:43.302532"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 267], ["updated_at", "2015-05-15 06:59:43.304304"], ["id", 365]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 06:59:43.306751"], ["updated_at", "2015-05-15 06:59:43.306751"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 268], ["updated_at", "2015-05-15 06:59:43.308136"], ["id", 366]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 06:59:43.310150"], ["updated_at", "2015-05-15 06:59:43.310150"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 269], ["updated_at", "2015-05-15 06:59:43.311320"], ["id", 367]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (0.7ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:02:21.398158"], ["updated_at", "2015-05-15 07:02:21.398158"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:02:21.407941"], ["updated_at", "2015-05-15 07:02:21.407941"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 270], ["updated_at", "2015-05-15 07:02:21.413341"], ["id", 368]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"270"}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:02:21.441226"], ["updated_at", "2015-05-15 07:02:21.441226"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.5ms)
  [1m[36mContribution Load (0.8ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 270]]
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:02:21.462160"], ["updated_at", "2015-05-15 07:02:21.462160"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:02:21.465874"], ["updated_at", "2015-05-15 07:02:21.465874"]]
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 271], ["updated_at", "2015-05-15 07:02:21.468120"], ["id", 369]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"271"}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:02:21.474514"], ["updated_at", "2015-05-15 07:02:21.474514"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.7ms)
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:02:21.490924"], ["updated_at", "2015-05-15 07:02:21.490924"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:02:21.501884"], ["updated_at", "2015-05-15 07:02:21.501884"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 1.2ms)
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:02:21.511645"], ["updated_at", "2015-05-15 07:02:21.511645"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:02:21.517029"], ["updated_at", "2015-05-15 07:02:21.517029"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:02:21.519799"], ["updated_at", "2015-05-15 07:02:21.519799"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 275], ["updated_at", "2015-05-15 07:02:21.521613"], ["id", 370]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:02:21.524567"], ["updated_at", "2015-05-15 07:02:21.524567"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 275], ["updated_at", "2015-05-15 07:02:21.531891"], ["id", 58]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"275"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 275]]
  [1m[35mContribution Load (0.7ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 275]]
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 1.0ms)
  [1m[36mContribution Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 275], ["id", 58]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:02:21.561475"], ["updated_at", "2015-05-15 07:02:21.561475"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:02:21.565961"], ["updated_at", "2015-05-15 07:02:21.565961"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 276], ["updated_at", "2015-05-15 07:02:21.567728"], ["id", 371]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:02:21.570821"], ["updated_at", "2015-05-15 07:02:21.570821"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 276], ["updated_at", "2015-05-15 07:02:21.573341"], ["id", 59]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"276"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 276]]
  [1m[35mContribution Load (0.5ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 276]]
Completed 200 OK in 7ms (Views: 0.6ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:02:21.589939"], ["updated_at", "2015-05-15 07:02:21.589939"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:02:21.592783"], ["updated_at", "2015-05-15 07:02:21.592783"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 277], ["updated_at", "2015-05-15 07:02:21.594831"], ["id", 372]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:02:21.597410"], ["updated_at", "2015-05-15 07:02:21.597410"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 277], ["updated_at", "2015-05-15 07:02:21.599530"], ["id", 60]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"277"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.3ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 277]]
  [1m[36mContribution Load (0.2ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 277]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mStory Load (0.2ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:02:21.607815"], ["updated_at", "2015-05-15 07:02:21.607815"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:02:21.611419"], ["updated_at", "2015-05-15 07:02:21.611419"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:02:21.614159"], ["updated_at", "2015-05-15 07:02:21.614159"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:02:21.621229"], ["updated_at", "2015-05-15 07:02:21.621229"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:02:21.625425"], ["updated_at", "2015-05-15 07:02:21.625425"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:02:21.629701"], ["updated_at", "2015-05-15 07:02:21.629701"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:02:21.633317"], ["updated_at", "2015-05-15 07:02:21.633317"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 278], ["updated_at", "2015-05-15 07:02:21.635773"], ["id", 376]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:02:21.638988"], ["updated_at", "2015-05-15 07:02:21.638988"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 279], ["updated_at", "2015-05-15 07:02:21.640559"], ["id", 377]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:02:21.644030"], ["updated_at", "2015-05-15 07:02:21.644030"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 280], ["updated_at", "2015-05-15 07:02:21.646274"], ["id", 378]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (0.7ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:12:09.717658"], ["updated_at", "2015-05-15 07:12:09.717658"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:12:09.729772"], ["updated_at", "2015-05-15 07:12:09.729772"]]
  [1m[35mSQL (1.0ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 281], ["updated_at", "2015-05-15 07:12:09.732590"], ["id", 379]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"281"}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:12:09.756045"], ["updated_at", "2015-05-15 07:12:09.756045"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.7ms)
  [1m[36mContribution Load (1.1ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 281]]
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:12:09.777191"], ["updated_at", "2015-05-15 07:12:09.777191"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:12:09.779967"], ["updated_at", "2015-05-15 07:12:09.779967"]]
  [1m[36mSQL (3.0ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 282], ["updated_at", "2015-05-15 07:12:09.782348"], ["id", 380]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"282"}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:12:09.792152"], ["updated_at", "2015-05-15 07:12:09.792152"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 3ms (Views: 1.3ms | ActiveRecord: 0.6ms)
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:12:09.810976"], ["updated_at", "2015-05-15 07:12:09.810976"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:12:09.823617"], ["updated_at", "2015-05-15 07:12:09.823617"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 1.0ms | ActiveRecord: 1.4ms)
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:12:09.834736"], ["updated_at", "2015-05-15 07:12:09.834736"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:12:09.839572"], ["updated_at", "2015-05-15 07:12:09.839572"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:12:09.841659"], ["updated_at", "2015-05-15 07:12:09.841659"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 286], ["updated_at", "2015-05-15 07:12:09.843007"], ["id", 381]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:12:09.845262"], ["updated_at", "2015-05-15 07:12:09.845262"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 286], ["updated_at", "2015-05-15 07:12:09.851836"], ["id", 63]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"286"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 286]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 286]]
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.1ms)
  [1m[36mContribution Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 286], ["id", 63]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:12:09.877249"], ["updated_at", "2015-05-15 07:12:09.877249"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:12:09.883116"], ["updated_at", "2015-05-15 07:12:09.883116"]]
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 287], ["updated_at", "2015-05-15 07:12:09.886511"], ["id", 382]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:12:09.891386"], ["updated_at", "2015-05-15 07:12:09.891386"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 287], ["updated_at", "2015-05-15 07:12:09.894201"], ["id", 64]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"287"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 287]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 287]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:12:09.905402"], ["updated_at", "2015-05-15 07:12:09.905402"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:12:09.908822"], ["updated_at", "2015-05-15 07:12:09.908822"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 288], ["updated_at", "2015-05-15 07:12:09.911083"], ["id", 383]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:12:09.914455"], ["updated_at", "2015-05-15 07:12:09.914455"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 288], ["updated_at", "2015-05-15 07:12:09.917482"], ["id", 65]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"288"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.8ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 288]]
  [1m[36mContribution Load (0.8ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 288]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:12:09.930230"], ["updated_at", "2015-05-15 07:12:09.930230"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:12:09.934188"], ["updated_at", "2015-05-15 07:12:09.934188"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:12:09.936954"], ["updated_at", "2015-05-15 07:12:09.936954"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.9ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:12:09.952346"], ["updated_at", "2015-05-15 07:12:09.952346"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:12:09.955668"], ["updated_at", "2015-05-15 07:12:09.955668"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:12:09.958650"], ["updated_at", "2015-05-15 07:12:09.958650"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:12:09.961191"], ["updated_at", "2015-05-15 07:12:09.961191"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 289], ["updated_at", "2015-05-15 07:12:09.963259"], ["id", 387]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:12:09.966338"], ["updated_at", "2015-05-15 07:12:09.966338"]]
  [1m[36mSQL (2.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 290], ["updated_at", "2015-05-15 07:12:09.969075"], ["id", 388]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:12:09.974914"], ["updated_at", "2015-05-15 07:12:09.974914"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 291], ["updated_at", "2015-05-15 07:12:09.977019"], ["id", 389]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.4ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:13:34.689707"], ["updated_at", "2015-05-15 07:13:34.689707"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:13:34.702452"], ["updated_at", "2015-05-15 07:13:34.702452"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 292], ["updated_at", "2015-05-15 07:13:34.705210"], ["id", 390]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"292"}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:13:34.735760"], ["updated_at", "2015-05-15 07:13:34.735760"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 8ms (Views: 0.9ms | ActiveRecord: 1.1ms)
  [1m[36mContribution Load (1.0ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 292]]
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:13:34.762275"], ["updated_at", "2015-05-15 07:13:34.762275"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:13:34.765525"], ["updated_at", "2015-05-15 07:13:34.765525"]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 293], ["updated_at", "2015-05-15 07:13:34.767662"], ["id", 391]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"293"}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:13:34.777570"], ["updated_at", "2015-05-15 07:13:34.777570"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.7ms)
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:13:34.797261"], ["updated_at", "2015-05-15 07:13:34.797261"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:13:34.808745"], ["updated_at", "2015-05-15 07:13:34.808745"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.7ms)
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:13:34.821383"], ["updated_at", "2015-05-15 07:13:34.821383"]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.9ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:13:34.833168"], ["updated_at", "2015-05-15 07:13:34.833168"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:13:34.838090"], ["updated_at", "2015-05-15 07:13:34.838090"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 297], ["updated_at", "2015-05-15 07:13:34.840450"], ["id", 392]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:13:34.846799"], ["updated_at", "2015-05-15 07:13:34.846799"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 297], ["updated_at", "2015-05-15 07:13:34.854122"], ["id", 68]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"297"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.7ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 297]]
  [1m[35mContribution Load (0.7ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 297]]
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[36mContribution Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 297], ["id", 68]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:13:34.879840"], ["updated_at", "2015-05-15 07:13:34.879840"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:13:34.882705"], ["updated_at", "2015-05-15 07:13:34.882705"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 298], ["updated_at", "2015-05-15 07:13:34.884185"], ["id", 393]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:13:34.888559"], ["updated_at", "2015-05-15 07:13:34.888559"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 298], ["updated_at", "2015-05-15 07:13:34.892974"], ["id", 69]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"298"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.7ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 298]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 298]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:13:34.905198"], ["updated_at", "2015-05-15 07:13:34.905198"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:13:34.907911"], ["updated_at", "2015-05-15 07:13:34.907911"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 299], ["updated_at", "2015-05-15 07:13:34.909953"], ["id", 394]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:13:34.912936"], ["updated_at", "2015-05-15 07:13:34.912936"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 299], ["updated_at", "2015-05-15 07:13:34.915823"], ["id", 70]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"299"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 299]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 299]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:13:34.929682"], ["updated_at", "2015-05-15 07:13:34.929682"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:13:34.932551"], ["updated_at", "2015-05-15 07:13:34.932551"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:13:34.935383"], ["updated_at", "2015-05-15 07:13:34.935383"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.8ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:13:34.949743"], ["updated_at", "2015-05-15 07:13:34.949743"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:13:34.953619"], ["updated_at", "2015-05-15 07:13:34.953619"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:13:34.957813"], ["updated_at", "2015-05-15 07:13:34.957813"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:13:34.960255"], ["updated_at", "2015-05-15 07:13:34.960255"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 300], ["updated_at", "2015-05-15 07:13:34.962264"], ["id", 398]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:13:34.964740"], ["updated_at", "2015-05-15 07:13:34.964740"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 301], ["updated_at", "2015-05-15 07:13:34.966149"], ["id", 399]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:13:34.968936"], ["updated_at", "2015-05-15 07:13:34.968936"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 302], ["updated_at", "2015-05-15 07:13:34.971402"], ["id", 400]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:13:56.090229"], ["updated_at", "2015-05-15 07:13:56.090229"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:13:56.099788"], ["updated_at", "2015-05-15 07:13:56.099788"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 303], ["updated_at", "2015-05-15 07:13:56.102257"], ["id", 401]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"303"}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:13:56.124375"], ["updated_at", "2015-05-15 07:13:56.124375"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[36mContribution Load (0.9ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 303]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:13:56.143532"], ["updated_at", "2015-05-15 07:13:56.143532"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:13:56.146320"], ["updated_at", "2015-05-15 07:13:56.146320"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 304], ["updated_at", "2015-05-15 07:13:56.148015"], ["id", 402]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"304"}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:13:56.155313"], ["updated_at", "2015-05-15 07:13:56.155313"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.6ms)
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:13:56.171666"], ["updated_at", "2015-05-15 07:13:56.171666"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:13:56.181731"], ["updated_at", "2015-05-15 07:13:56.181731"]]
  [1m[36m (2.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 2.6ms)
  [1m[35mStory Load (1.5ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:13:56.194667"], ["updated_at", "2015-05-15 07:13:56.194667"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:13:56.202358"], ["updated_at", "2015-05-15 07:13:56.202358"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:13:56.206285"], ["updated_at", "2015-05-15 07:13:56.206285"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 308], ["updated_at", "2015-05-15 07:13:56.208164"], ["id", 403]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:13:56.211402"], ["updated_at", "2015-05-15 07:13:56.211402"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 308], ["updated_at", "2015-05-15 07:13:56.218283"], ["id", 73]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"308"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 308]]
  [1m[35mContribution Load (0.5ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 308]]
Completed 200 OK in 7ms (Views: 0.6ms | ActiveRecord: 1.0ms)
  [1m[36mContribution Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 308], ["id", 73]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:13:56.252159"], ["updated_at", "2015-05-15 07:13:56.252159"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:13:56.255768"], ["updated_at", "2015-05-15 07:13:56.255768"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 309], ["updated_at", "2015-05-15 07:13:56.257513"], ["id", 404]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:13:56.260549"], ["updated_at", "2015-05-15 07:13:56.260549"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 309], ["updated_at", "2015-05-15 07:13:56.263683"], ["id", 74]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"309"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 309]]
  [1m[35mContribution Load (0.5ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 309]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:13:56.274550"], ["updated_at", "2015-05-15 07:13:56.274550"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:13:56.277634"], ["updated_at", "2015-05-15 07:13:56.277634"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 310], ["updated_at", "2015-05-15 07:13:56.279745"], ["id", 405]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:13:56.282574"], ["updated_at", "2015-05-15 07:13:56.282574"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 310], ["updated_at", "2015-05-15 07:13:56.284901"], ["id", 75]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"310"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 310]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 310]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:13:56.295881"], ["updated_at", "2015-05-15 07:13:56.295881"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:13:56.298848"], ["updated_at", "2015-05-15 07:13:56.298848"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:13:56.301402"], ["updated_at", "2015-05-15 07:13:56.301402"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (3.1ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:13:56.313000"], ["updated_at", "2015-05-15 07:13:56.313000"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:13:56.316078"], ["updated_at", "2015-05-15 07:13:56.316078"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:13:56.318718"], ["updated_at", "2015-05-15 07:13:56.318718"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:13:56.321693"], ["updated_at", "2015-05-15 07:13:56.321693"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 311], ["updated_at", "2015-05-15 07:13:56.324015"], ["id", 409]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:13:56.326890"], ["updated_at", "2015-05-15 07:13:56.326890"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 312], ["updated_at", "2015-05-15 07:13:56.328482"], ["id", 410]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:13:56.331172"], ["updated_at", "2015-05-15 07:13:56.331172"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 313], ["updated_at", "2015-05-15 07:13:56.332942"], ["id", 411]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:14:25.535455"], ["updated_at", "2015-05-15 07:14:25.535455"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:14:25.545806"], ["updated_at", "2015-05-15 07:14:25.545806"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 314], ["updated_at", "2015-05-15 07:14:25.548744"], ["id", 412]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"314"}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:14:25.573959"], ["updated_at", "2015-05-15 07:14:25.573959"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:14:25.577134"], ["updated_at", "2015-05-15 07:14:25.577134"]]
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 315], ["updated_at", "2015-05-15 07:14:25.579098"], ["id", 413]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"315"}
Geokit is using the domain: test.host
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.7ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.7ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:14:25.600635"], ["updated_at", "2015-05-15 07:14:25.600635"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.9ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:14:25.615827"], ["updated_at", "2015-05-15 07:14:25.615827"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[36mStory Load (1.2ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:14:25.625840"], ["updated_at", "2015-05-15 07:14:25.625840"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:14:25.633249"], ["updated_at", "2015-05-15 07:14:25.633249"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:14:25.635870"], ["updated_at", "2015-05-15 07:14:25.635870"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 319], ["updated_at", "2015-05-15 07:14:25.637506"], ["id", 414]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:14:25.640722"], ["updated_at", "2015-05-15 07:14:25.640722"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 319], ["updated_at", "2015-05-15 07:14:25.656847"], ["id", 76]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"319"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 319]]
  [1m[36mContribution Load (0.5ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 319]]
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35mContribution Exists (0.4ms)[0m  SELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1  [["story_id", 319], ["id", 76]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:14:25.691854"], ["updated_at", "2015-05-15 07:14:25.691854"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:14:25.696285"], ["updated_at", "2015-05-15 07:14:25.696285"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 320], ["updated_at", "2015-05-15 07:14:25.699047"], ["id", 415]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:14:25.702839"], ["updated_at", "2015-05-15 07:14:25.702839"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 320], ["updated_at", "2015-05-15 07:14:25.706717"], ["id", 77]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"320"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 320]]
  [1m[36mContribution Load (0.7ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 320]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:14:25.717740"], ["updated_at", "2015-05-15 07:14:25.717740"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:14:25.720724"], ["updated_at", "2015-05-15 07:14:25.720724"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 321], ["updated_at", "2015-05-15 07:14:25.723543"], ["id", 416]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:14:25.726587"], ["updated_at", "2015-05-15 07:14:25.726587"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 321], ["updated_at", "2015-05-15 07:14:25.729856"], ["id", 78]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"321"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 321]]
  [1m[35mContribution Load (0.5ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 321]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:14:25.742151"], ["updated_at", "2015-05-15 07:14:25.742151"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:14:25.745084"], ["updated_at", "2015-05-15 07:14:25.745084"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:14:25.747573"], ["updated_at", "2015-05-15 07:14:25.747573"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (3.6ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "locations"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:14:25.759425"], ["updated_at", "2015-05-15 07:14:25.759425"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:14:25.761824"], ["updated_at", "2015-05-15 07:14:25.761824"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:14:25.763858"], ["updated_at", "2015-05-15 07:14:25.763858"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 07:14:25.765614"], ["updated_at", "2015-05-15 07:14:25.765614"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 322], ["updated_at", "2015-05-15 07:14:25.767363"], ["id", 420]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 07:14:25.769712"], ["updated_at", "2015-05-15 07:14:25.769712"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 323], ["updated_at", "2015-05-15 07:14:25.771867"], ["id", 421]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 07:14:25.776762"], ["updated_at", "2015-05-15 07:14:25.776762"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 324], ["updated_at", "2015-05-15 07:14:25.778710"], ["id", 422]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:18:55.043891"], ["updated_at", "2015-05-15 07:18:55.043891"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:18:55.054577"], ["updated_at", "2015-05-15 07:18:55.054577"]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 325], ["updated_at", "2015-05-15 07:18:55.057256"], ["id", 423]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"325"}
Geokit is using the domain: test.host
  [1m[35mStory Load (1.4ms)[0m  SELECT  "stories".* FROM "stories" WHERE (325) LIMIT 1
PG::DatatypeMismatch: ERROR:  argument of WHERE must be type boolean, not type integer
LINE 1: SELECT  "stories".* FROM "stories" WHERE (325) LIMIT 1
                                                  ^
: SELECT  "stories".* FROM "stories" WHERE (325) LIMIT 1
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:18:55.082767"], ["updated_at", "2015-05-15 07:18:55.082767"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:18:55.085945"], ["updated_at", "2015-05-15 07:18:55.085945"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 326], ["updated_at", "2015-05-15 07:18:55.088372"], ["id", 424]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"326"}
Geokit is using the domain: test.host
  [1m[35mStory Load (1.0ms)[0m  SELECT  "stories".* FROM "stories" WHERE (326) LIMIT 1
PG::DatatypeMismatch: ERROR:  argument of WHERE must be type boolean, not type integer
LINE 1: SELECT  "stories".* FROM "stories" WHERE (326) LIMIT 1
                                                  ^
: SELECT  "stories".* FROM "stories" WHERE (326) LIMIT 1
Completed 500 Internal Server Error in 2ms (ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.6ms)
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:18:55.108618"], ["updated_at", "2015-05-15 07:18:55.108618"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:18:55.118600"], ["updated_at", "2015-05-15 07:18:55.118600"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.1ms)
  [1m[36mStory Load (1.1ms)[0m  [1mSELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:18:55.127795"], ["updated_at", "2015-05-15 07:18:55.127795"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:18:55.133906"], ["updated_at", "2015-05-15 07:18:55.133906"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:18:55.136762"], ["updated_at", "2015-05-15 07:18:55.136762"]]
  [1m[35mSQL (1.0ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 330], ["updated_at", "2015-05-15 07:18:55.139113"], ["id", 425]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:18:55.143817"], ["updated_at", "2015-05-15 07:18:55.143817"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 330], ["updated_at", "2015-05-15 07:18:55.158997"], ["id", 79]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"330"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 330]]
  [1m[36mContribution Load (0.8ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 330]]
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 1.3ms)
  [1m[35mContribution Exists (0.5ms)[0m  SELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1  [["story_id", 330], ["id", 79]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:18:55.183857"], ["updated_at", "2015-05-15 07:18:55.183857"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:18:55.186266"], ["updated_at", "2015-05-15 07:18:55.186266"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 331], ["updated_at", "2015-05-15 07:18:55.187608"], ["id", 426]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:18:55.190330"], ["updated_at", "2015-05-15 07:18:55.190330"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 331], ["updated_at", "2015-05-15 07:18:55.193901"], ["id", 80]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"331"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 331]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 331]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:18:55.206212"], ["updated_at", "2015-05-15 07:18:55.206212"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:18:55.209335"], ["updated_at", "2015-05-15 07:18:55.209335"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 332], ["updated_at", "2015-05-15 07:18:55.211523"], ["id", 427]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:18:55.214645"], ["updated_at", "2015-05-15 07:18:55.214645"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 332], ["updated_at", "2015-05-15 07:18:55.217521"], ["id", 81]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"332"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 332]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 332]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:18:55.228909"], ["updated_at", "2015-05-15 07:18:55.228909"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:18:55.232496"], ["updated_at", "2015-05-15 07:18:55.232496"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:18:55.235511"], ["updated_at", "2015-05-15 07:18:55.235511"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.7ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:18:55.246377"], ["updated_at", "2015-05-15 07:18:55.246377"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:18:55.249238"], ["updated_at", "2015-05-15 07:18:55.249238"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:18:55.252104"], ["updated_at", "2015-05-15 07:18:55.252104"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 07:18:55.255004"], ["updated_at", "2015-05-15 07:18:55.255004"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 333], ["updated_at", "2015-05-15 07:18:55.257127"], ["id", 431]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 07:18:55.260882"], ["updated_at", "2015-05-15 07:18:55.260882"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 334], ["updated_at", "2015-05-15 07:18:55.263335"], ["id", 432]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-05-15 07:18:55.266929"], ["updated_at", "2015-05-15 07:18:55.266929"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 335], ["updated_at", "2015-05-15 07:18:55.269036"], ["id", 433]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "locations"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:19:36.314860"], ["updated_at", "2015-05-15 07:19:36.314860"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:19:36.325431"], ["updated_at", "2015-05-15 07:19:36.325431"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 336], ["updated_at", "2015-05-15 07:19:36.327604"], ["id", 434]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"336"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 336]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:19:36.350063"], ["updated_at", "2015-05-15 07:19:36.350063"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[35mContribution Load (0.4ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1  [["story_id", 336]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:19:36.366797"], ["updated_at", "2015-05-15 07:19:36.366797"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:19:36.369097"], ["updated_at", "2015-05-15 07:19:36.369097"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 337], ["updated_at", "2015-05-15 07:19:36.370540"], ["id", 435]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"337"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 337]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:19:36.376667"], ["updated_at", "2015-05-15 07:19:36.376667"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.6ms)
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:19:36.391659"], ["updated_at", "2015-05-15 07:19:36.391659"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:19:36.401179"], ["updated_at", "2015-05-15 07:19:36.401179"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.2ms)
  [1m[35mStory Load (0.8ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:19:36.411833"], ["updated_at", "2015-05-15 07:19:36.411833"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:19:36.419375"], ["updated_at", "2015-05-15 07:19:36.419375"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:19:36.422637"], ["updated_at", "2015-05-15 07:19:36.422637"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 341], ["updated_at", "2015-05-15 07:19:36.424226"], ["id", 436]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:19:36.426888"], ["updated_at", "2015-05-15 07:19:36.426888"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 341], ["updated_at", "2015-05-15 07:19:36.431506"], ["id", 84]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"341"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.8ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 341]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 341]]
Completed 200 OK in 8ms (Views: 0.6ms | ActiveRecord: 1.4ms)
  [1m[36mContribution Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 341], ["id", 84]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:19:36.458994"], ["updated_at", "2015-05-15 07:19:36.458994"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:19:36.461303"], ["updated_at", "2015-05-15 07:19:36.461303"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 342], ["updated_at", "2015-05-15 07:19:36.462637"], ["id", 437]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:19:36.465814"], ["updated_at", "2015-05-15 07:19:36.465814"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 342], ["updated_at", "2015-05-15 07:19:36.470612"], ["id", 85]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"342"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 342]]
  [1m[35mContribution Load (0.5ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 342]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:19:36.482135"], ["updated_at", "2015-05-15 07:19:36.482135"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:19:36.484906"], ["updated_at", "2015-05-15 07:19:36.484906"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 343], ["updated_at", "2015-05-15 07:19:36.487180"], ["id", 438]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:19:36.491405"], ["updated_at", "2015-05-15 07:19:36.491405"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 343], ["updated_at", "2015-05-15 07:19:36.495406"], ["id", 86]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"343"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 343]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 343]]
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:19:36.510969"], ["updated_at", "2015-05-15 07:19:36.510969"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:19:36.513240"], ["updated_at", "2015-05-15 07:19:36.513240"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:19:36.515319"], ["updated_at", "2015-05-15 07:19:36.515319"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (3.1ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:19:36.525683"], ["updated_at", "2015-05-15 07:19:36.525683"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:19:36.530353"], ["updated_at", "2015-05-15 07:19:36.530353"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:19:36.534908"], ["updated_at", "2015-05-15 07:19:36.534908"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:19:36.540034"], ["updated_at", "2015-05-15 07:19:36.540034"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 344], ["updated_at", "2015-05-15 07:19:36.542924"], ["id", 442]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:19:36.545350"], ["updated_at", "2015-05-15 07:19:36.545350"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 345], ["updated_at", "2015-05-15 07:19:36.546769"], ["id", 443]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:19:36.549252"], ["updated_at", "2015-05-15 07:19:36.549252"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 346], ["updated_at", "2015-05-15 07:19:36.550844"], ["id", 444]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:20:07.531836"], ["updated_at", "2015-05-15 07:20:07.531836"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:20:07.542721"], ["updated_at", "2015-05-15 07:20:07.542721"]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 347], ["updated_at", "2015-05-15 07:20:07.545633"], ["id", 445]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"347"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.9ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 347]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:20:07.572396"], ["updated_at", "2015-05-15 07:20:07.572396"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 347], ["updated_at", "2015-05-15 07:20:07.589010"], ["id", 87]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 28ms (Views: 0.3ms | ActiveRecord: 4.2ms)
  [1m[36mContribution Load (0.5ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 347]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:20:07.600966"], ["updated_at", "2015-05-15 07:20:07.600966"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:20:07.604978"], ["updated_at", "2015-05-15 07:20:07.604978"]]
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 348], ["updated_at", "2015-05-15 07:20:07.607746"], ["id", 446]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"348"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 348]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:20:07.619470"], ["updated_at", "2015-05-15 07:20:07.619470"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 348], ["updated_at", "2015-05-15 07:20:07.623804"], ["id", 88]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 2.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.4ms)
  [1m[36mStory Load (0.2ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:20:07.641988"], ["updated_at", "2015-05-15 07:20:07.641988"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:20:07.651596"], ["updated_at", "2015-05-15 07:20:07.651596"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:20:07.660314"], ["updated_at", "2015-05-15 07:20:07.660314"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:20:07.670599"], ["updated_at", "2015-05-15 07:20:07.670599"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:20:07.673937"], ["updated_at", "2015-05-15 07:20:07.673937"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 352], ["updated_at", "2015-05-15 07:20:07.675918"], ["id", 447]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:20:07.679424"], ["updated_at", "2015-05-15 07:20:07.679424"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 352], ["updated_at", "2015-05-15 07:20:07.683975"], ["id", 89]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"352"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 352]]
  [1m[35mContribution Load (0.7ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 352]]
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 1.2ms)
  [1m[36mContribution Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 352], ["id", 89]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:20:07.707583"], ["updated_at", "2015-05-15 07:20:07.707583"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:20:07.710220"], ["updated_at", "2015-05-15 07:20:07.710220"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 353], ["updated_at", "2015-05-15 07:20:07.711941"], ["id", 448]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:20:07.715311"], ["updated_at", "2015-05-15 07:20:07.715311"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 353], ["updated_at", "2015-05-15 07:20:07.717892"], ["id", 90]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"353"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 353]]
  [1m[35mContribution Load (0.4ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 353]]
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:20:07.731527"], ["updated_at", "2015-05-15 07:20:07.731527"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:20:07.733639"], ["updated_at", "2015-05-15 07:20:07.733639"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 354], ["updated_at", "2015-05-15 07:20:07.734907"], ["id", 449]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:20:07.736946"], ["updated_at", "2015-05-15 07:20:07.736946"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 354], ["updated_at", "2015-05-15 07:20:07.740188"], ["id", 91]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"354"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 354]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 354]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:20:07.754018"], ["updated_at", "2015-05-15 07:20:07.754018"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:20:07.758885"], ["updated_at", "2015-05-15 07:20:07.758885"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:20:07.761813"], ["updated_at", "2015-05-15 07:20:07.761813"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:20:07.772765"], ["updated_at", "2015-05-15 07:20:07.772765"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:20:07.776843"], ["updated_at", "2015-05-15 07:20:07.776843"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:20:07.780223"], ["updated_at", "2015-05-15 07:20:07.780223"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:20:07.783070"], ["updated_at", "2015-05-15 07:20:07.783070"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 355], ["updated_at", "2015-05-15 07:20:07.788037"], ["id", 453]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:20:07.792258"], ["updated_at", "2015-05-15 07:20:07.792258"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 356], ["updated_at", "2015-05-15 07:20:07.793643"], ["id", 454]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:20:07.795784"], ["updated_at", "2015-05-15 07:20:07.795784"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 357], ["updated_at", "2015-05-15 07:20:07.797141"], ["id", 455]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:21:31.228407"], ["updated_at", "2015-05-15 07:21:31.228407"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:21:31.239086"], ["updated_at", "2015-05-15 07:21:31.239086"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 358], ["updated_at", "2015-05-15 07:21:31.242766"], ["id", 456]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"358"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.8ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 358]]
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:21:31.268861"], ["updated_at", "2015-05-15 07:21:31.268861"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 358], ["updated_at", "2015-05-15 07:21:31.286120"], ["id", 92]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 28ms (Views: 0.3ms | ActiveRecord: 3.8ms)
  [1m[36mContribution Load (0.7ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 358]]
  [1m[35mSQL (2.2ms)[0m  DELETE FROM "stories"
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(358) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:21:31.305320"], ["updated_at", "2015-05-15 07:21:31.305320"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:21:31.309936"], ["updated_at", "2015-05-15 07:21:31.309936"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 359], ["updated_at", "2015-05-15 07:21:31.311549"], ["id", 457]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"359"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 359]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:21:31.317447"], ["updated_at", "2015-05-15 07:21:31.317447"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 359], ["updated_at", "2015-05-15 07:21:31.320119"], ["id", 93]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 2.8ms)
  [1m[36mSQL (2.1ms)[0m  [1mDELETE FROM "stories"[0m
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(359) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.6ms)
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:21:31.341087"], ["updated_at", "2015-05-15 07:21:31.341087"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.7ms | ActiveRecord: 0.9ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:21:31.359593"], ["updated_at", "2015-05-15 07:21:31.359593"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:21:31.371548"], ["updated_at", "2015-05-15 07:21:31.371548"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:21:31.380220"], ["updated_at", "2015-05-15 07:21:31.380220"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:21:31.385346"], ["updated_at", "2015-05-15 07:21:31.385346"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 363], ["updated_at", "2015-05-15 07:21:31.388800"], ["id", 458]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:21:31.394269"], ["updated_at", "2015-05-15 07:21:31.394269"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 363], ["updated_at", "2015-05-15 07:21:31.396718"], ["id", 94]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"363"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 363]]
  [1m[35mContribution Load (0.4ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 363]]
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 0.9ms)
  [1m[36mContribution Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 363], ["id", 94]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:21:31.422980"], ["updated_at", "2015-05-15 07:21:31.422980"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:21:31.425009"], ["updated_at", "2015-05-15 07:21:31.425009"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 364], ["updated_at", "2015-05-15 07:21:31.426290"], ["id", 459]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:21:31.428393"], ["updated_at", "2015-05-15 07:21:31.428393"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 364], ["updated_at", "2015-05-15 07:21:31.430806"], ["id", 95]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"364"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 364]]
  [1m[35mContribution Load (0.4ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 364]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:21:31.440638"], ["updated_at", "2015-05-15 07:21:31.440638"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:21:31.443261"], ["updated_at", "2015-05-15 07:21:31.443261"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 365], ["updated_at", "2015-05-15 07:21:31.445172"], ["id", 460]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:21:31.447947"], ["updated_at", "2015-05-15 07:21:31.447947"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 365], ["updated_at", "2015-05-15 07:21:31.451051"], ["id", 96]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"365"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.3ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 365]]
  [1m[36mContribution Load (0.4ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 365]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:21:31.464560"], ["updated_at", "2015-05-15 07:21:31.464560"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:21:31.470333"], ["updated_at", "2015-05-15 07:21:31.470333"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:21:31.475523"], ["updated_at", "2015-05-15 07:21:31.475523"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.0ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:21:31.486824"], ["updated_at", "2015-05-15 07:21:31.486824"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:21:31.490345"], ["updated_at", "2015-05-15 07:21:31.490345"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:21:31.493601"], ["updated_at", "2015-05-15 07:21:31.493601"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:21:31.496275"], ["updated_at", "2015-05-15 07:21:31.496275"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 366], ["updated_at", "2015-05-15 07:21:31.498254"], ["id", 464]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:21:31.501523"], ["updated_at", "2015-05-15 07:21:31.501523"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 367], ["updated_at", "2015-05-15 07:21:31.503896"], ["id", 465]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:21:31.507782"], ["updated_at", "2015-05-15 07:21:31.507782"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 368], ["updated_at", "2015-05-15 07:21:31.509558"], ["id", 466]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:03.396665"], ["updated_at", "2015-05-15 07:22:03.396665"]]
  [1m[35m (1.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:03.415102"], ["updated_at", "2015-05-15 07:22:03.415102"]]
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 369], ["updated_at", "2015-05-15 07:22:03.418637"], ["id", 467]]
  [1m[35m (1.0ms)[0m  COMMIT
  [1m[36mSQL (2.6ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "contributions"
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.3ms)
  [1m[36mStory Load (0.7ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:22:03.463794"], ["updated_at", "2015-05-15 07:22:03.463794"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 9ms (Views: 1.3ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:22:03.476887"], ["updated_at", "2015-05-15 07:22:03.476887"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mStory Load (1.2ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:22:03.488938"], ["updated_at", "2015-05-15 07:22:03.488938"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.8ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:03.497017"], ["updated_at", "2015-05-15 07:22:03.497017"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:03.499266"], ["updated_at", "2015-05-15 07:22:03.499266"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 373], ["updated_at", "2015-05-15 07:22:03.501334"], ["id", 468]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:03.506636"], ["updated_at", "2015-05-15 07:22:03.506636"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 373], ["updated_at", "2015-05-15 07:22:03.519456"], ["id", 97]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"373"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.2ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 373]]
  [1m[35mContribution Load (0.5ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 373]]
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[36mContribution Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 373], ["id", 97]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:03.547810"], ["updated_at", "2015-05-15 07:22:03.547810"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:03.554097"], ["updated_at", "2015-05-15 07:22:03.554097"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 374], ["updated_at", "2015-05-15 07:22:03.555789"], ["id", 469]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:03.558064"], ["updated_at", "2015-05-15 07:22:03.558064"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 374], ["updated_at", "2015-05-15 07:22:03.560099"], ["id", 98]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"374"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 374]]
  [1m[35mContribution Load (0.3ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 374]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:03.569788"], ["updated_at", "2015-05-15 07:22:03.569788"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:03.571862"], ["updated_at", "2015-05-15 07:22:03.571862"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 375], ["updated_at", "2015-05-15 07:22:03.573096"], ["id", 470]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:03.576016"], ["updated_at", "2015-05-15 07:22:03.576016"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 375], ["updated_at", "2015-05-15 07:22:03.580706"], ["id", 99]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"375"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 375]]
  [1m[36mContribution Load (0.5ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 375]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:22:03.598435"], ["updated_at", "2015-05-15 07:22:03.598435"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:03.603798"], ["updated_at", "2015-05-15 07:22:03.603798"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:22:03.606601"], ["updated_at", "2015-05-15 07:22:03.606601"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.3ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:22:03.614630"], ["updated_at", "2015-05-15 07:22:03.614630"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:03.617132"], ["updated_at", "2015-05-15 07:22:03.617132"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:22:03.619481"], ["updated_at", "2015-05-15 07:22:03.619481"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:22:03.621779"], ["updated_at", "2015-05-15 07:22:03.621779"]]
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 376], ["updated_at", "2015-05-15 07:22:03.623434"], ["id", 474]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:22:03.630540"], ["updated_at", "2015-05-15 07:22:03.630540"]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 377], ["updated_at", "2015-05-15 07:22:03.635849"], ["id", 475]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:22:03.641686"], ["updated_at", "2015-05-15 07:22:03.641686"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 378], ["updated_at", "2015-05-15 07:22:03.643177"], ["id", 476]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (0.8ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:07.494683"], ["updated_at", "2015-05-15 07:22:07.494683"]]
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:07.506200"], ["updated_at", "2015-05-15 07:22:07.506200"]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 379], ["updated_at", "2015-05-15 07:22:07.508528"], ["id", 477]]
  [1m[35m (1.0ms)[0m  COMMIT
  [1m[36mSQL (2.8ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "contributions"
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.5ms)
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:22:07.556093"], ["updated_at", "2015-05-15 07:22:07.556093"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 7ms (Views: 0.7ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:22:07.569049"], ["updated_at", "2015-05-15 07:22:07.569049"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35mStory Load (1.2ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:22:07.579619"], ["updated_at", "2015-05-15 07:22:07.579619"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:07.585435"], ["updated_at", "2015-05-15 07:22:07.585435"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:07.588147"], ["updated_at", "2015-05-15 07:22:07.588147"]]
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 383], ["updated_at", "2015-05-15 07:22:07.590380"], ["id", 478]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:07.594953"], ["updated_at", "2015-05-15 07:22:07.594953"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 383], ["updated_at", "2015-05-15 07:22:07.611848"], ["id", 100]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"383"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 383]]
  [1m[35mContribution Load (0.7ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 383]]
Completed 200 OK in 6ms (Views: 0.5ms | ActiveRecord: 1.1ms)
  [1m[36mContribution Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 383], ["id", 100]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:07.636464"], ["updated_at", "2015-05-15 07:22:07.636464"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:07.638973"], ["updated_at", "2015-05-15 07:22:07.638973"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 384], ["updated_at", "2015-05-15 07:22:07.640367"], ["id", 479]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:07.642891"], ["updated_at", "2015-05-15 07:22:07.642891"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 384], ["updated_at", "2015-05-15 07:22:07.645387"], ["id", 101]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"384"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 384]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 384]]
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:07.656156"], ["updated_at", "2015-05-15 07:22:07.656156"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:07.659495"], ["updated_at", "2015-05-15 07:22:07.659495"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 385], ["updated_at", "2015-05-15 07:22:07.661225"], ["id", 480]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:07.664216"], ["updated_at", "2015-05-15 07:22:07.664216"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 385], ["updated_at", "2015-05-15 07:22:07.667058"], ["id", 102]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"385"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 385]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 385]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:22:07.678723"], ["updated_at", "2015-05-15 07:22:07.678723"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:07.681952"], ["updated_at", "2015-05-15 07:22:07.681952"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:22:07.686041"], ["updated_at", "2015-05-15 07:22:07.686041"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.8ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:22:07.697350"], ["updated_at", "2015-05-15 07:22:07.697350"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:07.700133"], ["updated_at", "2015-05-15 07:22:07.700133"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:22:07.702743"], ["updated_at", "2015-05-15 07:22:07.702743"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:22:07.706097"], ["updated_at", "2015-05-15 07:22:07.706097"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 386], ["updated_at", "2015-05-15 07:22:07.708171"], ["id", 484]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:22:07.710807"], ["updated_at", "2015-05-15 07:22:07.710807"]]
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 387], ["updated_at", "2015-05-15 07:22:07.712850"], ["id", 485]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:22:07.716497"], ["updated_at", "2015-05-15 07:22:07.716497"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 388], ["updated_at", "2015-05-15 07:22:07.718149"], ["id", 486]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.8ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:29.731362"], ["updated_at", "2015-05-15 07:22:29.731362"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:29.743041"], ["updated_at", "2015-05-15 07:22:29.743041"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 389], ["updated_at", "2015-05-15 07:22:29.745505"], ["id", 487]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"389"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 389]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:29.772617"], ["updated_at", "2015-05-15 07:22:29.772617"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 389], ["updated_at", "2015-05-15 07:22:29.791305"], ["id", 103]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 28ms (Views: 0.3ms | ActiveRecord: 3.6ms)
  [1m[36mContribution Load (0.8ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 389]]
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:29.810874"], ["updated_at", "2015-05-15 07:22:29.810874"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:29.814138"], ["updated_at", "2015-05-15 07:22:29.814138"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 390], ["updated_at", "2015-05-15 07:22:29.816366"], ["id", 488]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"390"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 390]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:29.824396"], ["updated_at", "2015-05-15 07:22:29.824396"]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 390], ["updated_at", "2015-05-15 07:22:29.828675"], ["id", 104]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 3.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 3ms (Views: 1.2ms | ActiveRecord: 0.7ms)
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:22:29.849424"], ["updated_at", "2015-05-15 07:22:29.849424"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:22:29.862758"], ["updated_at", "2015-05-15 07:22:29.862758"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 0.7ms)
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:22:29.876162"], ["updated_at", "2015-05-15 07:22:29.876162"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:29.885505"], ["updated_at", "2015-05-15 07:22:29.885505"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:29.889055"], ["updated_at", "2015-05-15 07:22:29.889055"]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 394], ["updated_at", "2015-05-15 07:22:29.892222"], ["id", 489]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:29.896973"], ["updated_at", "2015-05-15 07:22:29.896973"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 394], ["updated_at", "2015-05-15 07:22:29.900341"], ["id", 105]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"394"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.7ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 394]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 394]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[36mContribution Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 394], ["id", 105]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:29.922006"], ["updated_at", "2015-05-15 07:22:29.922006"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:29.928767"], ["updated_at", "2015-05-15 07:22:29.928767"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 395], ["updated_at", "2015-05-15 07:22:29.931158"], ["id", 490]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:29.934616"], ["updated_at", "2015-05-15 07:22:29.934616"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 395], ["updated_at", "2015-05-15 07:22:29.938122"], ["id", 106]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"395"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 395]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 395]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:29.950685"], ["updated_at", "2015-05-15 07:22:29.950685"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:29.954394"], ["updated_at", "2015-05-15 07:22:29.954394"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 396], ["updated_at", "2015-05-15 07:22:29.956890"], ["id", 491]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:29.960177"], ["updated_at", "2015-05-15 07:22:29.960177"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 396], ["updated_at", "2015-05-15 07:22:29.963194"], ["id", 107]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"396"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 396]]
  [1m[36mContribution Load (0.7ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 396]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:22:29.977111"], ["updated_at", "2015-05-15 07:22:29.977111"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:29.982465"], ["updated_at", "2015-05-15 07:22:29.982465"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:22:29.985388"], ["updated_at", "2015-05-15 07:22:29.985388"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.5ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:22:29.995742"], ["updated_at", "2015-05-15 07:22:29.995742"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:29.998413"], ["updated_at", "2015-05-15 07:22:29.998413"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:22:30.001410"], ["updated_at", "2015-05-15 07:22:30.001410"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:22:30.004777"], ["updated_at", "2015-05-15 07:22:30.004777"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 397], ["updated_at", "2015-05-15 07:22:30.006919"], ["id", 495]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:22:30.010129"], ["updated_at", "2015-05-15 07:22:30.010129"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 398], ["updated_at", "2015-05-15 07:22:30.012460"], ["id", 496]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:22:30.015366"], ["updated_at", "2015-05-15 07:22:30.015366"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 399], ["updated_at", "2015-05-15 07:22:30.017226"], ["id", 497]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.1ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:47.423476"], ["updated_at", "2015-05-15 07:22:47.423476"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:47.435507"], ["updated_at", "2015-05-15 07:22:47.435507"]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 400], ["updated_at", "2015-05-15 07:22:47.438101"], ["id", 498]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"400"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 400]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:47.465153"], ["updated_at", "2015-05-15 07:22:47.465153"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 400], ["updated_at", "2015-05-15 07:22:47.481945"], ["id", 108]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 2.7ms)
  [1m[36mContribution Load (0.2ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 400]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:47.496033"], ["updated_at", "2015-05-15 07:22:47.496033"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:47.499439"], ["updated_at", "2015-05-15 07:22:47.499439"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 401], ["updated_at", "2015-05-15 07:22:47.500964"], ["id", 499]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"401"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 401]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:47.506449"], ["updated_at", "2015-05-15 07:22:47.506449"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 401], ["updated_at", "2015-05-15 07:22:47.511237"], ["id", 109]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "contributions"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.5ms)
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:22:47.529317"], ["updated_at", "2015-05-15 07:22:47.529317"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:22:47.538726"], ["updated_at", "2015-05-15 07:22:47.538726"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:22:47.545434"], ["updated_at", "2015-05-15 07:22:47.545434"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:47.552431"], ["updated_at", "2015-05-15 07:22:47.552431"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:47.555536"], ["updated_at", "2015-05-15 07:22:47.555536"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 405], ["updated_at", "2015-05-15 07:22:47.557144"], ["id", 500]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:47.559836"], ["updated_at", "2015-05-15 07:22:47.559836"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 405], ["updated_at", "2015-05-15 07:22:47.562264"], ["id", 110]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"405"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 405]]
  [1m[35mContribution Load (0.9ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 405]]
Completed 200 OK in 6ms (Views: 0.5ms | ActiveRecord: 1.4ms)
  [1m[36mContribution Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 405], ["id", 110]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:47.594124"], ["updated_at", "2015-05-15 07:22:47.594124"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:47.596556"], ["updated_at", "2015-05-15 07:22:47.596556"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 406], ["updated_at", "2015-05-15 07:22:47.597999"], ["id", 501]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:47.601100"], ["updated_at", "2015-05-15 07:22:47.601100"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 406], ["updated_at", "2015-05-15 07:22:47.604530"], ["id", 111]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"406"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 406]]
  [1m[35mContribution Load (0.8ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 406]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:47.615282"], ["updated_at", "2015-05-15 07:22:47.615282"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:47.619139"], ["updated_at", "2015-05-15 07:22:47.619139"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 407], ["updated_at", "2015-05-15 07:22:47.621857"], ["id", 502]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:47.624843"], ["updated_at", "2015-05-15 07:22:47.624843"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 407], ["updated_at", "2015-05-15 07:22:47.627766"], ["id", 112]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"407"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 407]]
  [1m[36mContribution Load (0.7ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 407]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:22:47.640529"], ["updated_at", "2015-05-15 07:22:47.640529"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:47.643942"], ["updated_at", "2015-05-15 07:22:47.643942"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:22:47.646420"], ["updated_at", "2015-05-15 07:22:47.646420"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (3.3ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:22:47.659463"], ["updated_at", "2015-05-15 07:22:47.659463"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:47.664068"], ["updated_at", "2015-05-15 07:22:47.664068"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:22:47.667075"], ["updated_at", "2015-05-15 07:22:47.667075"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:22:47.670661"], ["updated_at", "2015-05-15 07:22:47.670661"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 408], ["updated_at", "2015-05-15 07:22:47.672961"], ["id", 506]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:22:47.675681"], ["updated_at", "2015-05-15 07:22:47.675681"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 409], ["updated_at", "2015-05-15 07:22:47.677108"], ["id", 507]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:22:47.681231"], ["updated_at", "2015-05-15 07:22:47.681231"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 410], ["updated_at", "2015-05-15 07:22:47.684999"], ["id", 508]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:52.096395"], ["updated_at", "2015-05-15 07:22:52.096395"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:52.108755"], ["updated_at", "2015-05-15 07:22:52.108755"]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 411], ["updated_at", "2015-05-15 07:22:52.111491"], ["id", 509]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"411"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.8ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 411]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:52.135660"], ["updated_at", "2015-05-15 07:22:52.135660"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 411], ["updated_at", "2015-05-15 07:22:52.152563"], ["id", 113]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 3.6ms)
  [1m[36mContribution Load (0.7ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 411]]
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:52.165119"], ["updated_at", "2015-05-15 07:22:52.165119"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:52.168003"], ["updated_at", "2015-05-15 07:22:52.168003"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 412], ["updated_at", "2015-05-15 07:22:52.169870"], ["id", 510]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"412"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 412]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:52.176258"], ["updated_at", "2015-05-15 07:22:52.176258"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 412], ["updated_at", "2015-05-15 07:22:52.179731"], ["id", 114]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 2.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "contributions"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.5ms)
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:22:52.199409"], ["updated_at", "2015-05-15 07:22:52.199409"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:22:52.210516"], ["updated_at", "2015-05-15 07:22:52.210516"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:22:52.218406"], ["updated_at", "2015-05-15 07:22:52.218406"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:52.224670"], ["updated_at", "2015-05-15 07:22:52.224670"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:52.226882"], ["updated_at", "2015-05-15 07:22:52.226882"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 416], ["updated_at", "2015-05-15 07:22:52.229290"], ["id", 511]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:52.232778"], ["updated_at", "2015-05-15 07:22:52.232778"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 416], ["updated_at", "2015-05-15 07:22:52.235387"], ["id", 115]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"416"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 416]]
  [1m[35mContribution Load (0.4ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 416]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[36mContribution Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 416], ["id", 115]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:52.256064"], ["updated_at", "2015-05-15 07:22:52.256064"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:52.258653"], ["updated_at", "2015-05-15 07:22:52.258653"]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 417], ["updated_at", "2015-05-15 07:22:52.260345"], ["id", 512]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:52.266354"], ["updated_at", "2015-05-15 07:22:52.266354"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 417], ["updated_at", "2015-05-15 07:22:52.272015"], ["id", 116]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"417"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 417]]
  [1m[35mContribution Load (0.7ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 417]]
Completed 200 OK in 6ms (Views: 0.7ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:52.289063"], ["updated_at", "2015-05-15 07:22:52.289063"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:22:52.292051"], ["updated_at", "2015-05-15 07:22:52.292051"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 418], ["updated_at", "2015-05-15 07:22:52.294104"], ["id", 513]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:22:52.299915"], ["updated_at", "2015-05-15 07:22:52.299915"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 418], ["updated_at", "2015-05-15 07:22:52.306444"], ["id", 117]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"418"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 418]]
  [1m[36mContribution Load (0.5ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 418]]
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:22:52.325596"], ["updated_at", "2015-05-15 07:22:52.325596"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:52.329942"], ["updated_at", "2015-05-15 07:22:52.329942"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:22:52.332880"], ["updated_at", "2015-05-15 07:22:52.332880"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.3ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:22:52.346121"], ["updated_at", "2015-05-15 07:22:52.346121"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:22:52.348975"], ["updated_at", "2015-05-15 07:22:52.348975"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:22:52.351247"], ["updated_at", "2015-05-15 07:22:52.351247"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:22:52.353433"], ["updated_at", "2015-05-15 07:22:52.353433"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 419], ["updated_at", "2015-05-15 07:22:52.355193"], ["id", 517]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:22:52.357817"], ["updated_at", "2015-05-15 07:22:52.357817"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 420], ["updated_at", "2015-05-15 07:22:52.359070"], ["id", 518]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:22:52.362251"], ["updated_at", "2015-05-15 07:22:52.362251"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 421], ["updated_at", "2015-05-15 07:22:52.364343"], ["id", 519]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:03.062539"], ["updated_at", "2015-05-15 07:23:03.062539"]]
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:23:03.072084"], ["updated_at", "2015-05-15 07:23:03.072084"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 422], ["updated_at", "2015-05-15 07:23:03.074796"], ["id", 520]]
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36mSQL (2.3ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "contributions"
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 4ms (Views: 2.1ms | ActiveRecord: 0.5ms)
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:23:03.119439"], ["updated_at", "2015-05-15 07:23:03.119439"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 7ms (Views: 0.6ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:23:03.135643"], ["updated_at", "2015-05-15 07:23:03.135643"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.9ms)
  [1m[35mStory Load (1.1ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:23:03.152494"], ["updated_at", "2015-05-15 07:23:03.152494"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.8ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:03.162163"], ["updated_at", "2015-05-15 07:23:03.162163"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:23:03.164682"], ["updated_at", "2015-05-15 07:23:03.164682"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 426], ["updated_at", "2015-05-15 07:23:03.167124"], ["id", 521]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:23:03.171801"], ["updated_at", "2015-05-15 07:23:03.171801"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 426], ["updated_at", "2015-05-15 07:23:03.191030"], ["id", 118]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"426"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 426]]
  [1m[35mContribution Load (0.4ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 426]]
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[36mContribution Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 426], ["id", 118]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:03.221562"], ["updated_at", "2015-05-15 07:23:03.221562"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:23:03.224120"], ["updated_at", "2015-05-15 07:23:03.224120"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 427], ["updated_at", "2015-05-15 07:23:03.226270"], ["id", 522]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:23:03.229223"], ["updated_at", "2015-05-15 07:23:03.229223"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 427], ["updated_at", "2015-05-15 07:23:03.232011"], ["id", 119]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"427"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 427]]
  [1m[35mContribution Load (0.4ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 427]]
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:03.249174"], ["updated_at", "2015-05-15 07:23:03.249174"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:23:03.251902"], ["updated_at", "2015-05-15 07:23:03.251902"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 428], ["updated_at", "2015-05-15 07:23:03.253412"], ["id", 523]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:23:03.256683"], ["updated_at", "2015-05-15 07:23:03.256683"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 428], ["updated_at", "2015-05-15 07:23:03.260905"], ["id", 120]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"428"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 428]]
  [1m[36mContribution Load (0.9ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 428]]
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.9ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:23:03.274704"], ["updated_at", "2015-05-15 07:23:03.274704"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:03.281243"], ["updated_at", "2015-05-15 07:23:03.281243"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:23:03.284559"], ["updated_at", "2015-05-15 07:23:03.284559"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.4ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:23:03.296120"], ["updated_at", "2015-05-15 07:23:03.296120"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:03.299269"], ["updated_at", "2015-05-15 07:23:03.299269"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:23:03.302662"], ["updated_at", "2015-05-15 07:23:03.302662"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.8ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:23:03.305098"], ["updated_at", "2015-05-15 07:23:03.305098"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 429], ["updated_at", "2015-05-15 07:23:03.311459"], ["id", 527]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:23:03.314848"], ["updated_at", "2015-05-15 07:23:03.314848"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 430], ["updated_at", "2015-05-15 07:23:03.317507"], ["id", 528]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:23:03.321181"], ["updated_at", "2015-05-15 07:23:03.321181"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 431], ["updated_at", "2015-05-15 07:23:03.323067"], ["id", 529]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.8ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:18.944339"], ["updated_at", "2015-05-15 07:23:18.944339"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:23:18.956455"], ["updated_at", "2015-05-15 07:23:18.956455"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 432], ["updated_at", "2015-05-15 07:23:18.958856"], ["id", 530]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"432"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 432]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:23:18.980811"], ["updated_at", "2015-05-15 07:23:18.980811"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 432], ["updated_at", "2015-05-15 07:23:19.003662"], ["id", 121]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 3.6ms)
  [1m[36mContribution Load (0.7ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 432]]
  [1m[35mSQL (1.7ms)[0m  DELETE FROM "stories"
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(432) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:19.018744"], ["updated_at", "2015-05-15 07:23:19.018744"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:23:19.021670"], ["updated_at", "2015-05-15 07:23:19.021670"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 433], ["updated_at", "2015-05-15 07:23:19.023470"], ["id", 531]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"433"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 433]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:23:19.030301"], ["updated_at", "2015-05-15 07:23:19.030301"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 433], ["updated_at", "2015-05-15 07:23:19.035761"], ["id", 122]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 13ms (Views: 0.6ms | ActiveRecord: 3.3ms)
  [1m[36mSQL (2.7ms)[0m  [1mDELETE FROM "stories"[0m
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(433) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.6ms)
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:23:19.063726"], ["updated_at", "2015-05-15 07:23:19.063726"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:23:19.075047"], ["updated_at", "2015-05-15 07:23:19.075047"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.8ms)
  [1m[35mStory Load (0.9ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:23:19.085328"], ["updated_at", "2015-05-15 07:23:19.085328"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:19.091878"], ["updated_at", "2015-05-15 07:23:19.091878"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:23:19.094268"], ["updated_at", "2015-05-15 07:23:19.094268"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 437], ["updated_at", "2015-05-15 07:23:19.095562"], ["id", 532]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:23:19.098129"], ["updated_at", "2015-05-15 07:23:19.098129"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 437], ["updated_at", "2015-05-15 07:23:19.102780"], ["id", 123]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"437"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 437]]
  [1m[35mContribution Load (0.4ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 437]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[36mContribution Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 437], ["id", 123]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:19.128510"], ["updated_at", "2015-05-15 07:23:19.128510"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:23:19.132828"], ["updated_at", "2015-05-15 07:23:19.132828"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 438], ["updated_at", "2015-05-15 07:23:19.136969"], ["id", 533]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:23:19.142655"], ["updated_at", "2015-05-15 07:23:19.142655"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 438], ["updated_at", "2015-05-15 07:23:19.145127"], ["id", 124]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"438"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 438]]
  [1m[35mContribution Load (0.5ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 438]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:19.154513"], ["updated_at", "2015-05-15 07:23:19.154513"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:23:19.156362"], ["updated_at", "2015-05-15 07:23:19.156362"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 439], ["updated_at", "2015-05-15 07:23:19.157477"], ["id", 534]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:23:19.159408"], ["updated_at", "2015-05-15 07:23:19.159408"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 439], ["updated_at", "2015-05-15 07:23:19.161316"], ["id", 125]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"439"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.2ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 439]]
  [1m[36mContribution Load (0.3ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 439]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:23:19.173067"], ["updated_at", "2015-05-15 07:23:19.173067"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:19.176829"], ["updated_at", "2015-05-15 07:23:19.176829"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:23:19.179338"], ["updated_at", "2015-05-15 07:23:19.179338"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (3.1ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:23:19.189844"], ["updated_at", "2015-05-15 07:23:19.189844"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:19.192894"], ["updated_at", "2015-05-15 07:23:19.192894"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:23:19.195654"], ["updated_at", "2015-05-15 07:23:19.195654"]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:23:19.201088"], ["updated_at", "2015-05-15 07:23:19.201088"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 440], ["updated_at", "2015-05-15 07:23:19.205085"], ["id", 538]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:23:19.210050"], ["updated_at", "2015-05-15 07:23:19.210050"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 441], ["updated_at", "2015-05-15 07:23:19.213160"], ["id", 539]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:23:19.216433"], ["updated_at", "2015-05-15 07:23:19.216433"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 442], ["updated_at", "2015-05-15 07:23:19.219430"], ["id", 540]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (0.7ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:23.428890"], ["updated_at", "2015-05-15 07:23:23.428890"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:23:23.440949"], ["updated_at", "2015-05-15 07:23:23.440949"]]
  [1m[35mSQL (1.0ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 443], ["updated_at", "2015-05-15 07:23:23.443669"], ["id", 541]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"443"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 443]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:23:23.469175"], ["updated_at", "2015-05-15 07:23:23.469175"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 443], ["updated_at", "2015-05-15 07:23:23.486368"], ["id", 126]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 27ms (Views: 0.4ms | ActiveRecord: 3.7ms)
  [1m[36mContribution Load (0.7ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 443]]
  [1m[35mSQL (2.9ms)[0m  DELETE FROM "stories"
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(443) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:23.504489"], ["updated_at", "2015-05-15 07:23:23.504489"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:23:23.508256"], ["updated_at", "2015-05-15 07:23:23.508256"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 444], ["updated_at", "2015-05-15 07:23:23.510533"], ["id", 542]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"444"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 444]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:23:23.517333"], ["updated_at", "2015-05-15 07:23:23.517333"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 444], ["updated_at", "2015-05-15 07:23:23.520783"], ["id", 127]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 10ms (Views: 0.5ms | ActiveRecord: 3.5ms)
  [1m[36mSQL (3.1ms)[0m  [1mDELETE FROM "stories"[0m
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(444) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.3ms)
  [1m[36mStory Load (0.2ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:23:23.543981"], ["updated_at", "2015-05-15 07:23:23.543981"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:23:23.554718"], ["updated_at", "2015-05-15 07:23:23.554718"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.7ms | ActiveRecord: 0.8ms)
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:23:23.565077"], ["updated_at", "2015-05-15 07:23:23.565077"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:23.572202"], ["updated_at", "2015-05-15 07:23:23.572202"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:23:23.574822"], ["updated_at", "2015-05-15 07:23:23.574822"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 448], ["updated_at", "2015-05-15 07:23:23.576614"], ["id", 543]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:23:23.579336"], ["updated_at", "2015-05-15 07:23:23.579336"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 448], ["updated_at", "2015-05-15 07:23:23.581908"], ["id", 128]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"448"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 448]]
  [1m[35mContribution Load (0.4ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 448]]
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[36mContribution Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 448], ["id", 128]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:23.607898"], ["updated_at", "2015-05-15 07:23:23.607898"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:23:23.609923"], ["updated_at", "2015-05-15 07:23:23.609923"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 449], ["updated_at", "2015-05-15 07:23:23.611048"], ["id", 544]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:23:23.613041"], ["updated_at", "2015-05-15 07:23:23.613041"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 449], ["updated_at", "2015-05-15 07:23:23.618736"], ["id", 129]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"449"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 449]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 449]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:23.630501"], ["updated_at", "2015-05-15 07:23:23.630501"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:23:23.633623"], ["updated_at", "2015-05-15 07:23:23.633623"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 450], ["updated_at", "2015-05-15 07:23:23.635812"], ["id", 545]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:23:23.638637"], ["updated_at", "2015-05-15 07:23:23.638637"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 450], ["updated_at", "2015-05-15 07:23:23.641934"], ["id", 130]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"450"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 450]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 450]]
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:23:23.658499"], ["updated_at", "2015-05-15 07:23:23.658499"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:23.661457"], ["updated_at", "2015-05-15 07:23:23.661457"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:23:23.665110"], ["updated_at", "2015-05-15 07:23:23.665110"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.9ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:23:23.675622"], ["updated_at", "2015-05-15 07:23:23.675622"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:23:23.679747"], ["updated_at", "2015-05-15 07:23:23.679747"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:23:23.682328"], ["updated_at", "2015-05-15 07:23:23.682328"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:23:23.685875"], ["updated_at", "2015-05-15 07:23:23.685875"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 451], ["updated_at", "2015-05-15 07:23:23.687991"], ["id", 549]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:23:23.691126"], ["updated_at", "2015-05-15 07:23:23.691126"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 452], ["updated_at", "2015-05-15 07:23:23.692748"], ["id", 550]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:23:23.695268"], ["updated_at", "2015-05-15 07:23:23.695268"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 453], ["updated_at", "2015-05-15 07:23:23.696654"], ["id", 551]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:24:45.850784"], ["updated_at", "2015-05-15 07:24:45.850784"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:24:45.863010"], ["updated_at", "2015-05-15 07:24:45.863010"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 454], ["updated_at", "2015-05-15 07:24:45.865703"], ["id", 552]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"454"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 454]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:24:45.892459"], ["updated_at", "2015-05-15 07:24:45.892459"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 454], ["updated_at", "2015-05-15 07:24:45.907064"], ["id", 131]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 4.0ms)
  [1m[36mContribution Load (1.0ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 454]]
  [1m[35mSQL (2.7ms)[0m  DELETE FROM "stories"
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(454) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:24:45.924700"], ["updated_at", "2015-05-15 07:24:45.924700"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:24:45.927689"], ["updated_at", "2015-05-15 07:24:45.927689"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 455], ["updated_at", "2015-05-15 07:24:45.929468"], ["id", 553]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"455"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 455]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:24:45.934727"], ["updated_at", "2015-05-15 07:24:45.934727"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 455], ["updated_at", "2015-05-15 07:24:45.937183"], ["id", 132]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.3ms)
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "stories"[0m
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(455) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.5ms)
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:24:45.955824"], ["updated_at", "2015-05-15 07:24:45.955824"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.5ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:24:45.966934"], ["updated_at", "2015-05-15 07:24:45.966934"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:24:45.975488"], ["updated_at", "2015-05-15 07:24:45.975488"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:24:45.985029"], ["updated_at", "2015-05-15 07:24:45.985029"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:24:45.988096"], ["updated_at", "2015-05-15 07:24:45.988096"]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 459], ["updated_at", "2015-05-15 07:24:45.989918"], ["id", 554]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:24:45.994563"], ["updated_at", "2015-05-15 07:24:45.994563"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 459], ["updated_at", "2015-05-15 07:24:45.998868"], ["id", 133]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"459"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 459]]
  [1m[35mContribution Load (2.8ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 459]]
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 3.3ms)
  [1m[36mContribution Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 459], ["id", 133]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:24:46.024194"], ["updated_at", "2015-05-15 07:24:46.024194"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:24:46.027048"], ["updated_at", "2015-05-15 07:24:46.027048"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 460], ["updated_at", "2015-05-15 07:24:46.028617"], ["id", 555]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:24:46.031251"], ["updated_at", "2015-05-15 07:24:46.031251"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 460], ["updated_at", "2015-05-15 07:24:46.034328"], ["id", 134]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"460"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 460]]
  [1m[35mContribution Load (0.2ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 460]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:24:46.043881"], ["updated_at", "2015-05-15 07:24:46.043881"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:24:46.046312"], ["updated_at", "2015-05-15 07:24:46.046312"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 461], ["updated_at", "2015-05-15 07:24:46.047768"], ["id", 556]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:24:46.051163"], ["updated_at", "2015-05-15 07:24:46.051163"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 461], ["updated_at", "2015-05-15 07:24:46.054184"], ["id", 135]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"461"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.3ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 461]]
  [1m[36mContribution Load (0.4ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 461]]
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:24:46.071204"], ["updated_at", "2015-05-15 07:24:46.071204"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:24:46.074126"], ["updated_at", "2015-05-15 07:24:46.074126"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:24:46.076428"], ["updated_at", "2015-05-15 07:24:46.076428"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.5ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:24:46.086812"], ["updated_at", "2015-05-15 07:24:46.086812"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:24:46.089686"], ["updated_at", "2015-05-15 07:24:46.089686"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:24:46.092724"], ["updated_at", "2015-05-15 07:24:46.092724"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:24:46.095635"], ["updated_at", "2015-05-15 07:24:46.095635"]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 462], ["updated_at", "2015-05-15 07:24:46.098518"], ["id", 560]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:24:46.102491"], ["updated_at", "2015-05-15 07:24:46.102491"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 463], ["updated_at", "2015-05-15 07:24:46.104293"], ["id", 561]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:24:46.106938"], ["updated_at", "2015-05-15 07:24:46.106938"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 464], ["updated_at", "2015-05-15 07:24:46.108702"], ["id", 562]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.4ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:13.051377"], ["updated_at", "2015-05-15 07:25:13.051377"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:13.060072"], ["updated_at", "2015-05-15 07:25:13.060072"]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 465], ["updated_at", "2015-05-15 07:25:13.063661"], ["id", 563]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"465"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 465]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:13.091690"], ["updated_at", "2015-05-15 07:25:13.091690"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 465], ["updated_at", "2015-05-15 07:25:13.110194"], ["id", 136]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 2.5ms)
  [1m[36mContribution Load (0.8ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 465]]
  [1m[35mSQL (2.3ms)[0m  DELETE FROM "stories"
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(465) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:13.123594"], ["updated_at", "2015-05-15 07:25:13.123594"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:13.126563"], ["updated_at", "2015-05-15 07:25:13.126563"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 466], ["updated_at", "2015-05-15 07:25:13.128411"], ["id", 564]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"466"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.8ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 466]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:13.136390"], ["updated_at", "2015-05-15 07:25:13.136390"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 466], ["updated_at", "2015-05-15 07:25:13.139602"], ["id", 137]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 2.9ms)
  [1m[36mSQL (1.6ms)[0m  [1mDELETE FROM "stories"[0m
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(466) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.8ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.8ms)
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:25:13.160028"], ["updated_at", "2015-05-15 07:25:13.160028"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:25:13.172063"], ["updated_at", "2015-05-15 07:25:13.172063"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:25:13.179761"], ["updated_at", "2015-05-15 07:25:13.179761"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:13.187486"], ["updated_at", "2015-05-15 07:25:13.187486"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:13.190484"], ["updated_at", "2015-05-15 07:25:13.190484"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 470], ["updated_at", "2015-05-15 07:25:13.192161"], ["id", 565]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:13.194990"], ["updated_at", "2015-05-15 07:25:13.194990"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 470], ["updated_at", "2015-05-15 07:25:13.198082"], ["id", 138]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"470"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 470]]
  [1m[35mContribution Load (0.7ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 470]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.4ms)
  [1m[36mContribution Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 470], ["id", 138]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:13.219554"], ["updated_at", "2015-05-15 07:25:13.219554"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:13.222492"], ["updated_at", "2015-05-15 07:25:13.222492"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 471], ["updated_at", "2015-05-15 07:25:13.224120"], ["id", 566]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:13.226970"], ["updated_at", "2015-05-15 07:25:13.226970"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 471], ["updated_at", "2015-05-15 07:25:13.230053"], ["id", 139]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"471"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 471]]
  [1m[35mContribution Load (0.8ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 471]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:13.241490"], ["updated_at", "2015-05-15 07:25:13.241490"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:13.244764"], ["updated_at", "2015-05-15 07:25:13.244764"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 472], ["updated_at", "2015-05-15 07:25:13.246826"], ["id", 567]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:13.249804"], ["updated_at", "2015-05-15 07:25:13.249804"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 472], ["updated_at", "2015-05-15 07:25:13.253254"], ["id", 140]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"472"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 472]]
  [1m[36mContribution Load (0.5ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 472]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:25:13.265143"], ["updated_at", "2015-05-15 07:25:13.265143"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:13.268265"], ["updated_at", "2015-05-15 07:25:13.268265"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:25:13.271618"], ["updated_at", "2015-05-15 07:25:13.271618"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (3.2ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (3.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:25:13.286834"], ["updated_at", "2015-05-15 07:25:13.286834"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:13.291760"], ["updated_at", "2015-05-15 07:25:13.291760"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:25:13.295660"], ["updated_at", "2015-05-15 07:25:13.295660"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:25:13.298855"], ["updated_at", "2015-05-15 07:25:13.298855"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 473], ["updated_at", "2015-05-15 07:25:13.300374"], ["id", 571]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:25:13.302687"], ["updated_at", "2015-05-15 07:25:13.302687"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 474], ["updated_at", "2015-05-15 07:25:13.304184"], ["id", 572]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:25:13.307036"], ["updated_at", "2015-05-15 07:25:13.307036"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 475], ["updated_at", "2015-05-15 07:25:13.309017"], ["id", 573]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (0.8ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:17.514333"], ["updated_at", "2015-05-15 07:25:17.514333"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:17.526924"], ["updated_at", "2015-05-15 07:25:17.526924"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 476], ["updated_at", "2015-05-15 07:25:17.529656"], ["id", 574]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"476"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 476]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:17.553369"], ["updated_at", "2015-05-15 07:25:17.553369"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 476], ["updated_at", "2015-05-15 07:25:17.572764"], ["id", 141]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 30ms (Views: 0.4ms | ActiveRecord: 3.9ms)
  [1m[36mContribution Load (0.9ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 476]]
  [1m[35mSQL (2.1ms)[0m  DELETE FROM "stories"
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(476) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:17.590443"], ["updated_at", "2015-05-15 07:25:17.590443"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:17.596960"], ["updated_at", "2015-05-15 07:25:17.596960"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 477], ["updated_at", "2015-05-15 07:25:17.600372"], ["id", 575]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"477"}
Geokit is using the domain: test.host
  [1m[35mStory Load (1.2ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 477]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:17.610013"], ["updated_at", "2015-05-15 07:25:17.610013"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 477], ["updated_at", "2015-05-15 07:25:17.614748"], ["id", 142]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 4.5ms)
  [1m[36mSQL (1.8ms)[0m  [1mDELETE FROM "stories"[0m
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(477) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.5ms)
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:25:17.635200"], ["updated_at", "2015-05-15 07:25:17.635200"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:25:17.647503"], ["updated_at", "2015-05-15 07:25:17.647503"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.5ms)
  [1m[35mStory Load (0.8ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:25:17.658093"], ["updated_at", "2015-05-15 07:25:17.658093"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:17.664756"], ["updated_at", "2015-05-15 07:25:17.664756"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:17.668602"], ["updated_at", "2015-05-15 07:25:17.668602"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 481], ["updated_at", "2015-05-15 07:25:17.671933"], ["id", 576]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:17.674973"], ["updated_at", "2015-05-15 07:25:17.674973"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 481], ["updated_at", "2015-05-15 07:25:17.677672"], ["id", 143]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"481"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 481]]
  [1m[35mContribution Load (0.7ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 481]]
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[36mContribution Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 481], ["id", 143]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:17.700209"], ["updated_at", "2015-05-15 07:25:17.700209"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:17.703993"], ["updated_at", "2015-05-15 07:25:17.703993"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 482], ["updated_at", "2015-05-15 07:25:17.705562"], ["id", 577]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:17.707920"], ["updated_at", "2015-05-15 07:25:17.707920"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 482], ["updated_at", "2015-05-15 07:25:17.710175"], ["id", 144]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"482"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.2ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 482]]
  [1m[35mContribution Load (0.3ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 482]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:17.719123"], ["updated_at", "2015-05-15 07:25:17.719123"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:17.721263"], ["updated_at", "2015-05-15 07:25:17.721263"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 483], ["updated_at", "2015-05-15 07:25:17.722992"], ["id", 578]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:17.725044"], ["updated_at", "2015-05-15 07:25:17.725044"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 483], ["updated_at", "2015-05-15 07:25:17.727456"], ["id", 145]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"483"}
Geokit is using the domain: test.host
  [1m[35mStory Load (1.0ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 483]]
  [1m[36mContribution Load (0.7ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 483]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:25:17.740498"], ["updated_at", "2015-05-15 07:25:17.740498"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:17.743451"], ["updated_at", "2015-05-15 07:25:17.743451"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:25:17.746204"], ["updated_at", "2015-05-15 07:25:17.746204"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.8ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:25:17.756406"], ["updated_at", "2015-05-15 07:25:17.756406"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:17.758777"], ["updated_at", "2015-05-15 07:25:17.758777"]]
  [1m[36m (1.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:25:17.764329"], ["updated_at", "2015-05-15 07:25:17.764329"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:25:17.768767"], ["updated_at", "2015-05-15 07:25:17.768767"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 484], ["updated_at", "2015-05-15 07:25:17.771119"], ["id", 582]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:25:17.774845"], ["updated_at", "2015-05-15 07:25:17.774845"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 485], ["updated_at", "2015-05-15 07:25:17.776691"], ["id", 583]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:25:17.778992"], ["updated_at", "2015-05-15 07:25:17.778992"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 486], ["updated_at", "2015-05-15 07:25:17.780427"], ["id", 584]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:26.402339"], ["updated_at", "2015-05-15 07:25:26.402339"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:26.418899"], ["updated_at", "2015-05-15 07:25:26.418899"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 487], ["updated_at", "2015-05-15 07:25:26.421464"], ["id", 585]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"487"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.8ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 487]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:26.445943"], ["updated_at", "2015-05-15 07:25:26.445943"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 487], ["updated_at", "2015-05-15 07:25:26.462496"], ["id", 146]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 27ms (Views: 0.3ms | ActiveRecord: 3.3ms)
  [1m[36mContribution Load (0.8ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 487]]
  [1m[35mSQL (2.3ms)[0m  DELETE FROM "stories"
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(487) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:26.479044"], ["updated_at", "2015-05-15 07:25:26.479044"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:26.482119"], ["updated_at", "2015-05-15 07:25:26.482119"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 488], ["updated_at", "2015-05-15 07:25:26.484120"], ["id", 586]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"488"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 488]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:26.490213"], ["updated_at", "2015-05-15 07:25:26.490213"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 488], ["updated_at", "2015-05-15 07:25:26.493775"], ["id", 147]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.2ms)
  [1m[36mSQL (1.8ms)[0m  [1mDELETE FROM "stories"[0m
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(488) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.6ms)
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:25:26.514545"], ["updated_at", "2015-05-15 07:25:26.514545"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:25:26.524959"], ["updated_at", "2015-05-15 07:25:26.524959"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:25:26.536462"], ["updated_at", "2015-05-15 07:25:26.536462"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:26.542740"], ["updated_at", "2015-05-15 07:25:26.542740"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:26.545980"], ["updated_at", "2015-05-15 07:25:26.545980"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 492], ["updated_at", "2015-05-15 07:25:26.547852"], ["id", 587]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:26.550888"], ["updated_at", "2015-05-15 07:25:26.550888"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 492], ["updated_at", "2015-05-15 07:25:26.553360"], ["id", 148]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"492"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 492]]
  [1m[35mContribution Load (0.2ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 492]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[36mContribution Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 492], ["id", 148]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:26.571592"], ["updated_at", "2015-05-15 07:25:26.571592"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:26.576190"], ["updated_at", "2015-05-15 07:25:26.576190"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 493], ["updated_at", "2015-05-15 07:25:26.579293"], ["id", 588]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:26.583744"], ["updated_at", "2015-05-15 07:25:26.583744"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 493], ["updated_at", "2015-05-15 07:25:26.586590"], ["id", 149]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"493"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.9ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 493]]
  [1m[35mContribution Load (0.8ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 493]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:26.598734"], ["updated_at", "2015-05-15 07:25:26.598734"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:26.602330"], ["updated_at", "2015-05-15 07:25:26.602330"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 494], ["updated_at", "2015-05-15 07:25:26.604112"], ["id", 589]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:26.606972"], ["updated_at", "2015-05-15 07:25:26.606972"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 494], ["updated_at", "2015-05-15 07:25:26.609501"], ["id", 150]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"494"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 494]]
  [1m[36mContribution Load (0.4ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 494]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:25:26.620825"], ["updated_at", "2015-05-15 07:25:26.620825"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:26.626395"], ["updated_at", "2015-05-15 07:25:26.626395"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:25:26.631040"], ["updated_at", "2015-05-15 07:25:26.631040"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.7ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:25:26.642623"], ["updated_at", "2015-05-15 07:25:26.642623"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:26.645488"], ["updated_at", "2015-05-15 07:25:26.645488"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:25:26.647814"], ["updated_at", "2015-05-15 07:25:26.647814"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:25:26.650160"], ["updated_at", "2015-05-15 07:25:26.650160"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 495], ["updated_at", "2015-05-15 07:25:26.652767"], ["id", 593]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:25:26.657734"], ["updated_at", "2015-05-15 07:25:26.657734"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 496], ["updated_at", "2015-05-15 07:25:26.660786"], ["id", 594]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:25:26.664509"], ["updated_at", "2015-05-15 07:25:26.664509"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 497], ["updated_at", "2015-05-15 07:25:26.666728"], ["id", 595]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:34.881154"], ["updated_at", "2015-05-15 07:25:34.881154"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:34.893820"], ["updated_at", "2015-05-15 07:25:34.893820"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 498], ["updated_at", "2015-05-15 07:25:34.896248"], ["id", 596]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"498"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.9ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 498]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:34.931519"], ["updated_at", "2015-05-15 07:25:34.931519"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 498], ["updated_at", "2015-05-15 07:25:34.951628"], ["id", 151]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 32ms (Views: 0.4ms | ActiveRecord: 3.7ms)
  [1m[36mContribution Load (0.8ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 498]]
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:34.965738"], ["updated_at", "2015-05-15 07:25:34.965738"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:34.968538"], ["updated_at", "2015-05-15 07:25:34.968538"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 499], ["updated_at", "2015-05-15 07:25:34.970234"], ["id", 597]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"499"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 499]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:34.976322"], ["updated_at", "2015-05-15 07:25:34.976322"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 499], ["updated_at", "2015-05-15 07:25:34.979261"], ["id", 152]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.4ms)
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "contributions"
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.5ms)
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:25:34.998731"], ["updated_at", "2015-05-15 07:25:34.998731"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:25:35.009126"], ["updated_at", "2015-05-15 07:25:35.009126"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35mStory Load (0.8ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (2.9ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:25:35.021916"], ["updated_at", "2015-05-15 07:25:35.021916"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:35.031271"], ["updated_at", "2015-05-15 07:25:35.031271"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:35.033676"], ["updated_at", "2015-05-15 07:25:35.033676"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 503], ["updated_at", "2015-05-15 07:25:35.035166"], ["id", 598]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:35.038211"], ["updated_at", "2015-05-15 07:25:35.038211"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 503], ["updated_at", "2015-05-15 07:25:35.042550"], ["id", 153]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"503"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 503]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 503]]
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.1ms)
  [1m[36mContribution Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 503], ["id", 153]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:35.065116"], ["updated_at", "2015-05-15 07:25:35.065116"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:35.067569"], ["updated_at", "2015-05-15 07:25:35.067569"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 504], ["updated_at", "2015-05-15 07:25:35.068983"], ["id", 599]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:35.071716"], ["updated_at", "2015-05-15 07:25:35.071716"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 504], ["updated_at", "2015-05-15 07:25:35.075508"], ["id", 154]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"504"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 504]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 504]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:35.086484"], ["updated_at", "2015-05-15 07:25:35.086484"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:35.088847"], ["updated_at", "2015-05-15 07:25:35.088847"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 505], ["updated_at", "2015-05-15 07:25:35.091266"], ["id", 600]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:35.094301"], ["updated_at", "2015-05-15 07:25:35.094301"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 505], ["updated_at", "2015-05-15 07:25:35.096809"], ["id", 155]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"505"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 505]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 505]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mStory Load (0.2ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:25:35.106926"], ["updated_at", "2015-05-15 07:25:35.106926"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:35.111373"], ["updated_at", "2015-05-15 07:25:35.111373"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:25:35.114351"], ["updated_at", "2015-05-15 07:25:35.114351"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.8ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:25:35.124211"], ["updated_at", "2015-05-15 07:25:35.124211"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:35.127717"], ["updated_at", "2015-05-15 07:25:35.127717"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:25:35.130597"], ["updated_at", "2015-05-15 07:25:35.130597"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:25:35.133379"], ["updated_at", "2015-05-15 07:25:35.133379"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 506], ["updated_at", "2015-05-15 07:25:35.135608"], ["id", 604]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:25:35.139247"], ["updated_at", "2015-05-15 07:25:35.139247"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 507], ["updated_at", "2015-05-15 07:25:35.140941"], ["id", 605]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:25:35.144310"], ["updated_at", "2015-05-15 07:25:35.144310"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 508], ["updated_at", "2015-05-15 07:25:35.146119"], ["id", 606]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:52.512170"], ["updated_at", "2015-05-15 07:25:52.512170"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:52.524952"], ["updated_at", "2015-05-15 07:25:52.524952"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 509], ["updated_at", "2015-05-15 07:25:52.527546"], ["id", 607]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"509"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 509]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:52.553263"], ["updated_at", "2015-05-15 07:25:52.553263"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 509], ["updated_at", "2015-05-15 07:25:52.568066"], ["id", 156]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 25ms (Views: 0.3ms | ActiveRecord: 3.6ms)
  [1m[36mContribution Load (1.9ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 509]]
  [1m[35mSQL (2.8ms)[0m  DELETE FROM "stories"
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(509) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:52.587183"], ["updated_at", "2015-05-15 07:25:52.587183"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:52.590863"], ["updated_at", "2015-05-15 07:25:52.590863"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 510], ["updated_at", "2015-05-15 07:25:52.593206"], ["id", 608]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"510"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.8ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 510]]
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:52.601388"], ["updated_at", "2015-05-15 07:25:52.601388"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 510], ["updated_at", "2015-05-15 07:25:52.605010"], ["id", 157]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 10ms (Views: 0.5ms | ActiveRecord: 3.4ms)
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "stories"[0m
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(510) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.5ms)
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:25:52.623686"], ["updated_at", "2015-05-15 07:25:52.623686"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:25:52.633080"], ["updated_at", "2015-05-15 07:25:52.633080"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.6ms)
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:25:52.641028"], ["updated_at", "2015-05-15 07:25:52.641028"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:52.646313"], ["updated_at", "2015-05-15 07:25:52.646313"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:52.648549"], ["updated_at", "2015-05-15 07:25:52.648549"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 514], ["updated_at", "2015-05-15 07:25:52.650851"], ["id", 609]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:52.654081"], ["updated_at", "2015-05-15 07:25:52.654081"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 514], ["updated_at", "2015-05-15 07:25:52.656802"], ["id", 158]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"514"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 514]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 514]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[36mContribution Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 514], ["id", 158]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:52.677188"], ["updated_at", "2015-05-15 07:25:52.677188"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:52.679812"], ["updated_at", "2015-05-15 07:25:52.679812"]]
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 515], ["updated_at", "2015-05-15 07:25:52.681395"], ["id", 610]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:52.685253"], ["updated_at", "2015-05-15 07:25:52.685253"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 515], ["updated_at", "2015-05-15 07:25:52.688097"], ["id", 159]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"515"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 515]]
  [1m[35mContribution Load (0.7ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 515]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:52.698497"], ["updated_at", "2015-05-15 07:25:52.698497"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:25:52.702945"], ["updated_at", "2015-05-15 07:25:52.702945"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 516], ["updated_at", "2015-05-15 07:25:52.704889"], ["id", 611]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:25:52.708114"], ["updated_at", "2015-05-15 07:25:52.708114"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 516], ["updated_at", "2015-05-15 07:25:52.711224"], ["id", 160]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"516"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.9ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 516]]
  [1m[36mContribution Load (0.7ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 516]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:25:52.723869"], ["updated_at", "2015-05-15 07:25:52.723869"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:52.727247"], ["updated_at", "2015-05-15 07:25:52.727247"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:25:52.730717"], ["updated_at", "2015-05-15 07:25:52.730717"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.8ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:25:52.741433"], ["updated_at", "2015-05-15 07:25:52.741433"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:25:52.744437"], ["updated_at", "2015-05-15 07:25:52.744437"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:25:52.747415"], ["updated_at", "2015-05-15 07:25:52.747415"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:25:52.751012"], ["updated_at", "2015-05-15 07:25:52.751012"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 517], ["updated_at", "2015-05-15 07:25:52.753555"], ["id", 615]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:25:52.756400"], ["updated_at", "2015-05-15 07:25:52.756400"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 518], ["updated_at", "2015-05-15 07:25:52.758006"], ["id", 616]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:25:52.760652"], ["updated_at", "2015-05-15 07:25:52.760652"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 519], ["updated_at", "2015-05-15 07:25:52.762500"], ["id", 617]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (2.1ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:03.736668"], ["updated_at", "2015-05-15 07:26:03.736668"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:03.747395"], ["updated_at", "2015-05-15 07:26:03.747395"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 520], ["updated_at", "2015-05-15 07:26:03.749514"], ["id", 618]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"520"}
Geokit is using the domain: test.host
  [1m[35mStory Load (1.0ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 520]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:03.772328"], ["updated_at", "2015-05-15 07:26:03.772328"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 520], ["updated_at", "2015-05-15 07:26:03.788808"], ["id", 161]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 27ms (Views: 0.3ms | ActiveRecord: 4.3ms)
  [1m[36mContribution Load (0.8ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 520]]
  [1m[35mSQL (2.6ms)[0m  DELETE FROM "stories"
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(520) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:03.808919"], ["updated_at", "2015-05-15 07:26:03.808919"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:03.811760"], ["updated_at", "2015-05-15 07:26:03.811760"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 521], ["updated_at", "2015-05-15 07:26:03.813549"], ["id", 619]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"521"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 521]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:03.824795"], ["updated_at", "2015-05-15 07:26:03.824795"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 521], ["updated_at", "2015-05-15 07:26:03.829232"], ["id", 162]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 3.5ms)
  [1m[36mSQL (1.9ms)[0m  [1mDELETE FROM "stories"[0m
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(521) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.3ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.3ms)
  [1m[36mStory Load (0.2ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:03.849130"], ["updated_at", "2015-05-15 07:26:03.849130"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:03.861458"], ["updated_at", "2015-05-15 07:26:03.861458"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.9ms)
  [1m[35mStory Load (0.8ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:03.876452"], ["updated_at", "2015-05-15 07:26:03.876452"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:03.883734"], ["updated_at", "2015-05-15 07:26:03.883734"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:03.888206"], ["updated_at", "2015-05-15 07:26:03.888206"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 525], ["updated_at", "2015-05-15 07:26:03.890466"], ["id", 620]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:03.893697"], ["updated_at", "2015-05-15 07:26:03.893697"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 525], ["updated_at", "2015-05-15 07:26:03.896629"], ["id", 163]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"525"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 525]]
  [1m[35mContribution Load (0.7ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 525]]
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[36mContribution Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 525], ["id", 163]]
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:03.921413"], ["updated_at", "2015-05-15 07:26:03.921413"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:03.926464"], ["updated_at", "2015-05-15 07:26:03.926464"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 526], ["updated_at", "2015-05-15 07:26:03.927837"], ["id", 621]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:03.930119"], ["updated_at", "2015-05-15 07:26:03.930119"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 526], ["updated_at", "2015-05-15 07:26:03.932585"], ["id", 164]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"526"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 526]]
  [1m[35mContribution Load (0.3ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 526]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:03.941806"], ["updated_at", "2015-05-15 07:26:03.941806"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:03.943612"], ["updated_at", "2015-05-15 07:26:03.943612"]]
  [1m[35mSQL (1.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 527], ["updated_at", "2015-05-15 07:26:03.944979"], ["id", 622]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:03.950802"], ["updated_at", "2015-05-15 07:26:03.950802"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 527], ["updated_at", "2015-05-15 07:26:03.953511"], ["id", 165]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"527"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.2ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 527]]
  [1m[36mContribution Load (0.2ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 527]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mStory Load (0.2ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:26:03.960929"], ["updated_at", "2015-05-15 07:26:03.960929"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:03.963019"], ["updated_at", "2015-05-15 07:26:03.963019"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:26:03.965107"], ["updated_at", "2015-05-15 07:26:03.965107"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.1ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:26:03.973542"], ["updated_at", "2015-05-15 07:26:03.973542"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:03.976563"], ["updated_at", "2015-05-15 07:26:03.976563"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:26:03.980213"], ["updated_at", "2015-05-15 07:26:03.980213"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:03.983403"], ["updated_at", "2015-05-15 07:26:03.983403"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 528], ["updated_at", "2015-05-15 07:26:03.986449"], ["id", 626]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:03.989809"], ["updated_at", "2015-05-15 07:26:03.989809"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 529], ["updated_at", "2015-05-15 07:26:03.991543"], ["id", 627]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:03.993892"], ["updated_at", "2015-05-15 07:26:03.993892"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 530], ["updated_at", "2015-05-15 07:26:03.995488"], ["id", 628]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.4ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:23.203071"], ["updated_at", "2015-05-15 07:26:23.203071"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:23.213429"], ["updated_at", "2015-05-15 07:26:23.213429"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 531], ["updated_at", "2015-05-15 07:26:23.215408"], ["id", 629]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"531"}
Geokit is using the domain: test.host
  [1m[35mStory Load (1.2ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 531]]
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:23.238472"], ["updated_at", "2015-05-15 07:26:23.238472"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 531], ["updated_at", "2015-05-15 07:26:23.255223"], ["id", 166]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 28ms (Views: 0.3ms | ActiveRecord: 5.2ms)
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 531]]
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:23.270018"], ["updated_at", "2015-05-15 07:26:23.270018"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:23.273230"], ["updated_at", "2015-05-15 07:26:23.273230"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 532], ["updated_at", "2015-05-15 07:26:23.275709"], ["id", 630]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"532"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 532]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:23.282093"], ["updated_at", "2015-05-15 07:26:23.282093"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 532], ["updated_at", "2015-05-15 07:26:23.285272"], ["id", 167]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 2.8ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "contributions"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.4ms)
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:23.308831"], ["updated_at", "2015-05-15 07:26:23.308831"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.2ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:23.319134"], ["updated_at", "2015-05-15 07:26:23.319134"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.0ms)
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:23.329137"], ["updated_at", "2015-05-15 07:26:23.329137"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:23.334982"], ["updated_at", "2015-05-15 07:26:23.334982"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:23.337573"], ["updated_at", "2015-05-15 07:26:23.337573"]]
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 536], ["updated_at", "2015-05-15 07:26:23.339375"], ["id", 631]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:23.343736"], ["updated_at", "2015-05-15 07:26:23.343736"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 536], ["updated_at", "2015-05-15 07:26:23.346797"], ["id", 168]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"536"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 536]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 536]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[36mContribution Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 536], ["id", 168]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:23.368879"], ["updated_at", "2015-05-15 07:26:23.368879"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:23.371533"], ["updated_at", "2015-05-15 07:26:23.371533"]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 537], ["updated_at", "2015-05-15 07:26:23.373349"], ["id", 632]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:23.377215"], ["updated_at", "2015-05-15 07:26:23.377215"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 537], ["updated_at", "2015-05-15 07:26:23.380183"], ["id", 169]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"537"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 537]]
  [1m[35mContribution Load (0.7ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 537]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.2ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:23.393466"], ["updated_at", "2015-05-15 07:26:23.393466"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:23.396461"], ["updated_at", "2015-05-15 07:26:23.396461"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 538], ["updated_at", "2015-05-15 07:26:23.398101"], ["id", 633]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:23.400521"], ["updated_at", "2015-05-15 07:26:23.400521"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 538], ["updated_at", "2015-05-15 07:26:23.402781"], ["id", 170]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"538"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 538]]
  [1m[36mContribution Load (0.4ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 538]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:26:23.411816"], ["updated_at", "2015-05-15 07:26:23.411816"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:23.414654"], ["updated_at", "2015-05-15 07:26:23.414654"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.7ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:26:23.417552"], ["updated_at", "2015-05-15 07:26:23.417552"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.6ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:26:23.431765"], ["updated_at", "2015-05-15 07:26:23.431765"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:23.433584"], ["updated_at", "2015-05-15 07:26:23.433584"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:26:23.435181"], ["updated_at", "2015-05-15 07:26:23.435181"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:23.437028"], ["updated_at", "2015-05-15 07:26:23.437028"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 539], ["updated_at", "2015-05-15 07:26:23.438722"], ["id", 637]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:23.441817"], ["updated_at", "2015-05-15 07:26:23.441817"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 540], ["updated_at", "2015-05-15 07:26:23.443902"], ["id", 638]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:23.446612"], ["updated_at", "2015-05-15 07:26:23.446612"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 541], ["updated_at", "2015-05-15 07:26:23.448833"], ["id", 639]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.8ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:32.218468"], ["updated_at", "2015-05-15 07:26:32.218468"]]
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:32.230257"], ["updated_at", "2015-05-15 07:26:32.230257"]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 542], ["updated_at", "2015-05-15 07:26:32.233508"], ["id", 640]]
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36mSQL (2.5ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "contributions"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.5ms)
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:32.270974"], ["updated_at", "2015-05-15 07:26:32.270974"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (3.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:32.288319"], ["updated_at", "2015-05-15 07:26:32.288319"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.7ms)
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:32.298666"], ["updated_at", "2015-05-15 07:26:32.298666"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:32.302845"], ["updated_at", "2015-05-15 07:26:32.302845"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:32.305095"], ["updated_at", "2015-05-15 07:26:32.305095"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 546], ["updated_at", "2015-05-15 07:26:32.306630"], ["id", 641]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:32.309025"], ["updated_at", "2015-05-15 07:26:32.309025"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 546], ["updated_at", "2015-05-15 07:26:32.329183"], ["id", 171]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"546"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 546]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 546]]
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[36mContribution Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 546], ["id", 171]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:32.352243"], ["updated_at", "2015-05-15 07:26:32.352243"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:32.354948"], ["updated_at", "2015-05-15 07:26:32.354948"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 547], ["updated_at", "2015-05-15 07:26:32.356629"], ["id", 642]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:32.359306"], ["updated_at", "2015-05-15 07:26:32.359306"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 547], ["updated_at", "2015-05-15 07:26:32.361780"], ["id", 172]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"547"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 547]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 547]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:32.371867"], ["updated_at", "2015-05-15 07:26:32.371867"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:32.376008"], ["updated_at", "2015-05-15 07:26:32.376008"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 548], ["updated_at", "2015-05-15 07:26:32.378253"], ["id", 643]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:32.382005"], ["updated_at", "2015-05-15 07:26:32.382005"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 548], ["updated_at", "2015-05-15 07:26:32.384836"], ["id", 173]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"548"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 548]]
  [1m[36mContribution Load (0.5ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 548]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:26:32.395765"], ["updated_at", "2015-05-15 07:26:32.395765"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:32.398987"], ["updated_at", "2015-05-15 07:26:32.398987"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:26:32.402333"], ["updated_at", "2015-05-15 07:26:32.402333"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.7ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:26:32.416636"], ["updated_at", "2015-05-15 07:26:32.416636"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:32.419790"], ["updated_at", "2015-05-15 07:26:32.419790"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:26:32.422315"], ["updated_at", "2015-05-15 07:26:32.422315"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:32.424790"], ["updated_at", "2015-05-15 07:26:32.424790"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 549], ["updated_at", "2015-05-15 07:26:32.426584"], ["id", 647]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:32.429790"], ["updated_at", "2015-05-15 07:26:32.429790"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 550], ["updated_at", "2015-05-15 07:26:32.431615"], ["id", 648]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:32.435888"], ["updated_at", "2015-05-15 07:26:32.435888"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 551], ["updated_at", "2015-05-15 07:26:32.439857"], ["id", 649]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.4ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:41.871818"], ["updated_at", "2015-05-15 07:26:41.871818"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:41.883711"], ["updated_at", "2015-05-15 07:26:41.883711"]]
  [1m[35mSQL (1.0ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 552], ["updated_at", "2015-05-15 07:26:41.886342"], ["id", 650]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"552"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.9ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 552]]
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:41.911629"], ["updated_at", "2015-05-15 07:26:41.911629"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 552], ["updated_at", "2015-05-15 07:26:41.928039"], ["id", 174]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 25ms (Views: 0.3ms | ActiveRecord: 3.5ms)
  [1m[36mContribution Load (0.4ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 552]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:41.938509"], ["updated_at", "2015-05-15 07:26:41.938509"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:41.941308"], ["updated_at", "2015-05-15 07:26:41.941308"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 553], ["updated_at", "2015-05-15 07:26:41.942903"], ["id", 651]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"553"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 553]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:41.947994"], ["updated_at", "2015-05-15 07:26:41.947994"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 553], ["updated_at", "2015-05-15 07:26:41.950334"], ["id", 175]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "contributions"
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.7ms)
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:41.973638"], ["updated_at", "2015-05-15 07:26:41.973638"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.9ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:41.986050"], ["updated_at", "2015-05-15 07:26:41.986050"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:41.994157"], ["updated_at", "2015-05-15 07:26:41.994157"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:42.001276"], ["updated_at", "2015-05-15 07:26:42.001276"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:42.004319"], ["updated_at", "2015-05-15 07:26:42.004319"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 557], ["updated_at", "2015-05-15 07:26:42.006037"], ["id", 652]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:42.009119"], ["updated_at", "2015-05-15 07:26:42.009119"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 557], ["updated_at", "2015-05-15 07:26:42.012057"], ["id", 176]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"557"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 557]]
  [1m[35mContribution Load (0.7ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 557]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[36mContribution Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 557], ["id", 176]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:42.033467"], ["updated_at", "2015-05-15 07:26:42.033467"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:42.036802"], ["updated_at", "2015-05-15 07:26:42.036802"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 558], ["updated_at", "2015-05-15 07:26:42.038450"], ["id", 653]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:42.041285"], ["updated_at", "2015-05-15 07:26:42.041285"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 558], ["updated_at", "2015-05-15 07:26:42.044469"], ["id", 177]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"558"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 558]]
  [1m[35mContribution Load (0.9ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 558]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:42.055513"], ["updated_at", "2015-05-15 07:26:42.055513"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:42.058940"], ["updated_at", "2015-05-15 07:26:42.058940"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 559], ["updated_at", "2015-05-15 07:26:42.060875"], ["id", 654]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:42.063919"], ["updated_at", "2015-05-15 07:26:42.063919"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 559], ["updated_at", "2015-05-15 07:26:42.067130"], ["id", 178]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"559"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 559]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 559]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:26:42.079367"], ["updated_at", "2015-05-15 07:26:42.079367"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:42.083014"], ["updated_at", "2015-05-15 07:26:42.083014"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:26:42.086580"], ["updated_at", "2015-05-15 07:26:42.086580"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.0ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:26:42.097097"], ["updated_at", "2015-05-15 07:26:42.097097"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:42.100198"], ["updated_at", "2015-05-15 07:26:42.100198"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:26:42.103649"], ["updated_at", "2015-05-15 07:26:42.103649"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:42.106443"], ["updated_at", "2015-05-15 07:26:42.106443"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 560], ["updated_at", "2015-05-15 07:26:42.108714"], ["id", 658]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:42.111897"], ["updated_at", "2015-05-15 07:26:42.111897"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 561], ["updated_at", "2015-05-15 07:26:42.113382"], ["id", 659]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:42.115636"], ["updated_at", "2015-05-15 07:26:42.115636"]]
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 562], ["updated_at", "2015-05-15 07:26:42.117842"], ["id", 660]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (0.9ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:54.230071"], ["updated_at", "2015-05-15 07:26:54.230071"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:54.241652"], ["updated_at", "2015-05-15 07:26:54.241652"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 563], ["updated_at", "2015-05-15 07:26:54.244132"], ["id", 661]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"563"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.8ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 563]]
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:54.270534"], ["updated_at", "2015-05-15 07:26:54.270534"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 563], ["updated_at", "2015-05-15 07:26:54.286292"], ["id", 179]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 29ms (Views: 1.1ms | ActiveRecord: 4.2ms)
  [1m[36mContribution Load (1.0ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 563]]
  [1m[35mSQL (3.3ms)[0m  DELETE FROM "stories"
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(563) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:54.309858"], ["updated_at", "2015-05-15 07:26:54.309858"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:54.312593"], ["updated_at", "2015-05-15 07:26:54.312593"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 564], ["updated_at", "2015-05-15 07:26:54.314217"], ["id", 662]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"564"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 564]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:54.321360"], ["updated_at", "2015-05-15 07:26:54.321360"]]
  [1m[36m (2.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 564], ["updated_at", "2015-05-15 07:26:54.327851"], ["id", 180]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 5.1ms)
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "stories"[0m
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(564) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.4ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.4ms)
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:54.346783"], ["updated_at", "2015-05-15 07:26:54.346783"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:54.358565"], ["updated_at", "2015-05-15 07:26:54.358565"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.1ms)
  [1m[35mStory Load (0.8ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:54.366793"], ["updated_at", "2015-05-15 07:26:54.366793"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:54.373605"], ["updated_at", "2015-05-15 07:26:54.373605"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:54.375991"], ["updated_at", "2015-05-15 07:26:54.375991"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 568], ["updated_at", "2015-05-15 07:26:54.377370"], ["id", 663]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:54.379742"], ["updated_at", "2015-05-15 07:26:54.379742"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 568], ["updated_at", "2015-05-15 07:26:54.382053"], ["id", 181]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"568"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.7ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 568]]
  [1m[35mContribution Load (0.8ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 568]]
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.5ms)
  [1m[36mContribution Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 568], ["id", 181]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:54.404760"], ["updated_at", "2015-05-15 07:26:54.404760"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:54.408115"], ["updated_at", "2015-05-15 07:26:54.408115"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 569], ["updated_at", "2015-05-15 07:26:54.410131"], ["id", 664]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:54.413060"], ["updated_at", "2015-05-15 07:26:54.413060"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.9ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 569], ["updated_at", "2015-05-15 07:26:54.416853"], ["id", 182]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"569"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.9ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 569]]
  [1m[35mContribution Load (0.8ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 569]]
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:54.432195"], ["updated_at", "2015-05-15 07:26:54.432195"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:54.436968"], ["updated_at", "2015-05-15 07:26:54.436968"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 570], ["updated_at", "2015-05-15 07:26:54.439349"], ["id", 665]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:54.443395"], ["updated_at", "2015-05-15 07:26:54.443395"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 570], ["updated_at", "2015-05-15 07:26:54.446838"], ["id", 183]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"570"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 570]]
  [1m[36mContribution Load (0.5ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 570]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:26:54.458439"], ["updated_at", "2015-05-15 07:26:54.458439"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:54.461281"], ["updated_at", "2015-05-15 07:26:54.461281"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:26:54.463873"], ["updated_at", "2015-05-15 07:26:54.463873"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (3.0ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:26:54.476115"], ["updated_at", "2015-05-15 07:26:54.476115"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:54.480515"], ["updated_at", "2015-05-15 07:26:54.480515"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:26:54.484227"], ["updated_at", "2015-05-15 07:26:54.484227"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:54.488042"], ["updated_at", "2015-05-15 07:26:54.488042"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 571], ["updated_at", "2015-05-15 07:26:54.490273"], ["id", 669]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:54.493363"], ["updated_at", "2015-05-15 07:26:54.493363"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 572], ["updated_at", "2015-05-15 07:26:54.494922"], ["id", 670]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:54.496898"], ["updated_at", "2015-05-15 07:26:54.496898"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 573], ["updated_at", "2015-05-15 07:26:54.498465"], ["id", 671]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:58.707790"], ["updated_at", "2015-05-15 07:26:58.707790"]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:58.719166"], ["updated_at", "2015-05-15 07:26:58.719166"]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 574], ["updated_at", "2015-05-15 07:26:58.721797"], ["id", 672]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"574"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.8ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 574]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:58.750734"], ["updated_at", "2015-05-15 07:26:58.750734"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 574], ["updated_at", "2015-05-15 07:26:58.766226"], ["id", 184]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 3.4ms)
  [1m[36mContribution Load (0.5ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 574]]
  [1m[35mSQL (2.2ms)[0m  DELETE FROM "stories"
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(574) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:58.785183"], ["updated_at", "2015-05-15 07:26:58.785183"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:58.788254"], ["updated_at", "2015-05-15 07:26:58.788254"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 575], ["updated_at", "2015-05-15 07:26:58.790002"], ["id", 673]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"575"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.3ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 575]]
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:58.800351"], ["updated_at", "2015-05-15 07:26:58.800351"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 575], ["updated_at", "2015-05-15 07:26:58.805915"], ["id", 185]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 3.6ms)
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "stories"[0m
PG::ForeignKeyViolation: ERROR:  update or delete on table "stories" violates foreign key constraint "fk_rails_7359a5903d" on table "contributions"
DETAIL:  Key (id)=(575) is still referenced from table "contributions".
: DELETE FROM "stories"
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.6ms)
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:58.826733"], ["updated_at", "2015-05-15 07:26:58.826733"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 1.0ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:58.842842"], ["updated_at", "2015-05-15 07:26:58.842842"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:26:58.850556"], ["updated_at", "2015-05-15 07:26:58.850556"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:58.856027"], ["updated_at", "2015-05-15 07:26:58.856027"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:58.858418"], ["updated_at", "2015-05-15 07:26:58.858418"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 579], ["updated_at", "2015-05-15 07:26:58.860019"], ["id", 674]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:58.862505"], ["updated_at", "2015-05-15 07:26:58.862505"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 579], ["updated_at", "2015-05-15 07:26:58.865367"], ["id", 186]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"579"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.8ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 579]]
  [1m[35mContribution Load (0.5ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 579]]
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.3ms)
  [1m[36mContribution Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 579], ["id", 186]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:58.893494"], ["updated_at", "2015-05-15 07:26:58.893494"]]
  [1m[35m (1.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:58.898406"], ["updated_at", "2015-05-15 07:26:58.898406"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 580], ["updated_at", "2015-05-15 07:26:58.899937"], ["id", 675]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:58.902316"], ["updated_at", "2015-05-15 07:26:58.902316"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 580], ["updated_at", "2015-05-15 07:26:58.905068"], ["id", 187]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"580"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 580]]
  [1m[35mContribution Load (0.7ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 580]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:58.913728"], ["updated_at", "2015-05-15 07:26:58.913728"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:26:58.916675"], ["updated_at", "2015-05-15 07:26:58.916675"]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 581], ["updated_at", "2015-05-15 07:26:58.918407"], ["id", 676]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:26:58.922436"], ["updated_at", "2015-05-15 07:26:58.922436"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 581], ["updated_at", "2015-05-15 07:26:58.925972"], ["id", 188]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"581"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 581]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 581]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mStory Load (0.7ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:26:58.940065"], ["updated_at", "2015-05-15 07:26:58.940065"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:58.944095"], ["updated_at", "2015-05-15 07:26:58.944095"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:26:58.946882"], ["updated_at", "2015-05-15 07:26:58.946882"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (3.0ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:26:58.960285"], ["updated_at", "2015-05-15 07:26:58.960285"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:26:58.964783"], ["updated_at", "2015-05-15 07:26:58.964783"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:26:58.968612"], ["updated_at", "2015-05-15 07:26:58.968612"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:58.972896"], ["updated_at", "2015-05-15 07:26:58.972896"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 582], ["updated_at", "2015-05-15 07:26:58.974720"], ["id", 680]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:58.979639"], ["updated_at", "2015-05-15 07:26:58.979639"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 583], ["updated_at", "2015-05-15 07:26:58.982619"], ["id", 681]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:26:58.986577"], ["updated_at", "2015-05-15 07:26:58.986577"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 584], ["updated_at", "2015-05-15 07:26:58.990117"], ["id", 682]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:27:08.374389"], ["updated_at", "2015-05-15 07:27:08.374389"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:27:08.391959"], ["updated_at", "2015-05-15 07:27:08.391959"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 585], ["updated_at", "2015-05-15 07:27:08.393936"], ["id", 683]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"585"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.3ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 585]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:27:08.413146"], ["updated_at", "2015-05-15 07:27:08.413146"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 585], ["updated_at", "2015-05-15 07:27:08.427547"], ["id", 189]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 24ms (Views: 0.3ms | ActiveRecord: 4.0ms)
  [1m[36mContribution Load (0.5ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 585]]
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:27:08.441510"], ["updated_at", "2015-05-15 07:27:08.441510"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:27:08.444995"], ["updated_at", "2015-05-15 07:27:08.444995"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 586], ["updated_at", "2015-05-15 07:27:08.447059"], ["id", 684]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"586"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 586]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:27:08.453344"], ["updated_at", "2015-05-15 07:27:08.453344"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 586], ["updated_at", "2015-05-15 07:27:08.456286"], ["id", 190]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 2.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "contributions"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (1.8ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 4ms (Views: 1.1ms | ActiveRecord: 1.8ms)
  [1m[36mStory Load (0.9ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:27:08.476800"], ["updated_at", "2015-05-15 07:27:08.476800"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.0ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:27:08.488605"], ["updated_at", "2015-05-15 07:27:08.488605"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:27:08.496627"], ["updated_at", "2015-05-15 07:27:08.496627"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:27:08.505393"], ["updated_at", "2015-05-15 07:27:08.505393"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:27:08.508132"], ["updated_at", "2015-05-15 07:27:08.508132"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 590], ["updated_at", "2015-05-15 07:27:08.509739"], ["id", 685]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:27:08.512730"], ["updated_at", "2015-05-15 07:27:08.512730"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 590], ["updated_at", "2015-05-15 07:27:08.516275"], ["id", 191]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"590"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 590]]
  [1m[35mContribution Load (0.5ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 590]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[36mContribution Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 590], ["id", 191]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:27:08.539523"], ["updated_at", "2015-05-15 07:27:08.539523"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:27:08.541978"], ["updated_at", "2015-05-15 07:27:08.541978"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 591], ["updated_at", "2015-05-15 07:27:08.543441"], ["id", 686]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:27:08.546641"], ["updated_at", "2015-05-15 07:27:08.546641"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 591], ["updated_at", "2015-05-15 07:27:08.550237"], ["id", 192]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"591"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 591]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 591]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:27:08.563348"], ["updated_at", "2015-05-15 07:27:08.563348"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:27:08.567275"], ["updated_at", "2015-05-15 07:27:08.567275"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 592], ["updated_at", "2015-05-15 07:27:08.569893"], ["id", 687]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:27:08.573260"], ["updated_at", "2015-05-15 07:27:08.573260"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 592], ["updated_at", "2015-05-15 07:27:08.576194"], ["id", 193]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"592"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 592]]
  [1m[36mContribution Load (0.9ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 592]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.9ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:27:08.589493"], ["updated_at", "2015-05-15 07:27:08.589493"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:27:08.596775"], ["updated_at", "2015-05-15 07:27:08.596775"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:27:08.603079"], ["updated_at", "2015-05-15 07:27:08.603079"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (2.8ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:27:08.614664"], ["updated_at", "2015-05-15 07:27:08.614664"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:27:08.619536"], ["updated_at", "2015-05-15 07:27:08.619536"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:27:08.623889"], ["updated_at", "2015-05-15 07:27:08.623889"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:27:08.629340"], ["updated_at", "2015-05-15 07:27:08.629340"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 593], ["updated_at", "2015-05-15 07:27:08.631729"], ["id", 691]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:27:08.635220"], ["updated_at", "2015-05-15 07:27:08.635220"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 594], ["updated_at", "2015-05-15 07:27:08.637106"], ["id", 692]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:27:08.639508"], ["updated_at", "2015-05-15 07:27:08.639508"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 595], ["updated_at", "2015-05-15 07:27:08.640856"], ["id", 693]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:28:08.826822"], ["updated_at", "2015-05-15 07:28:08.826822"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:28:08.844323"], ["updated_at", "2015-05-15 07:28:08.844323"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 596], ["updated_at", "2015-05-15 07:28:08.847026"], ["id", 694]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"596"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.7ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 596]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:28:08.870908"], ["updated_at", "2015-05-15 07:28:08.870908"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 596], ["updated_at", "2015-05-15 07:28:08.886607"], ["id", 194]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 4.3ms)
  [1m[36mContribution Load (0.9ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 596]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "contributions"
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:28:08.907957"], ["updated_at", "2015-05-15 07:28:08.907957"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:28:08.913953"], ["updated_at", "2015-05-15 07:28:08.913953"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 597], ["updated_at", "2015-05-15 07:28:08.917641"], ["id", 695]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"597"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 597]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:28:08.924589"], ["updated_at", "2015-05-15 07:28:08.924589"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 597], ["updated_at", "2015-05-15 07:28:08.927415"], ["id", 195]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.4ms)
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "contributions"
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.5ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.5ms)
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:28:08.949395"], ["updated_at", "2015-05-15 07:28:08.949395"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:28:08.962209"], ["updated_at", "2015-05-15 07:28:08.962209"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 1.0ms)
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:28:08.971221"], ["updated_at", "2015-05-15 07:28:08.971221"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:28:08.978599"], ["updated_at", "2015-05-15 07:28:08.978599"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:28:08.981135"], ["updated_at", "2015-05-15 07:28:08.981135"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 601], ["updated_at", "2015-05-15 07:28:08.982835"], ["id", 696]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:28:08.988073"], ["updated_at", "2015-05-15 07:28:08.988073"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 601], ["updated_at", "2015-05-15 07:28:08.992143"], ["id", 196]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"601"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 601]]
  [1m[35mContribution Load (0.4ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 601]]
Completed 200 OK in 4ms (Views: 0.5ms | ActiveRecord: 0.7ms)
  [1m[36mContribution Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 601], ["id", 196]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:28:09.016853"], ["updated_at", "2015-05-15 07:28:09.016853"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:28:09.020352"], ["updated_at", "2015-05-15 07:28:09.020352"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 602], ["updated_at", "2015-05-15 07:28:09.023047"], ["id", 697]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:28:09.027077"], ["updated_at", "2015-05-15 07:28:09.027077"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 602], ["updated_at", "2015-05-15 07:28:09.029699"], ["id", 197]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"602"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.3ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 602]]
  [1m[35mContribution Load (0.8ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 602]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:28:09.040248"], ["updated_at", "2015-05-15 07:28:09.040248"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:28:09.042946"], ["updated_at", "2015-05-15 07:28:09.042946"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 603], ["updated_at", "2015-05-15 07:28:09.044565"], ["id", 698]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:28:09.047742"], ["updated_at", "2015-05-15 07:28:09.047742"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 603], ["updated_at", "2015-05-15 07:28:09.051581"], ["id", 198]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"603"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 603]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 603]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:28:09.063322"], ["updated_at", "2015-05-15 07:28:09.063322"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:28:09.066037"], ["updated_at", "2015-05-15 07:28:09.066037"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:28:09.069930"], ["updated_at", "2015-05-15 07:28:09.069930"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (3.3ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:28:09.082851"], ["updated_at", "2015-05-15 07:28:09.082851"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:28:09.086379"], ["updated_at", "2015-05-15 07:28:09.086379"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:28:09.090275"], ["updated_at", "2015-05-15 07:28:09.090275"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:28:09.093448"], ["updated_at", "2015-05-15 07:28:09.093448"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 604], ["updated_at", "2015-05-15 07:28:09.095709"], ["id", 702]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:28:09.098836"], ["updated_at", "2015-05-15 07:28:09.098836"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 605], ["updated_at", "2015-05-15 07:28:09.100243"], ["id", 703]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:28:09.103248"], ["updated_at", "2015-05-15 07:28:09.103248"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 606], ["updated_at", "2015-05-15 07:28:09.105458"], ["id", 704]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:28:13.016977"], ["updated_at", "2015-05-15 07:28:13.016977"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:28:13.028753"], ["updated_at", "2015-05-15 07:28:13.028753"]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 607], ["updated_at", "2015-05-15 07:28:13.031644"], ["id", 705]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"607"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.6ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 607]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:28:13.058550"], ["updated_at", "2015-05-15 07:28:13.058550"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 607], ["updated_at", "2015-05-15 07:28:13.073133"], ["id", 199]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 25ms (Views: 0.3ms | ActiveRecord: 3.1ms)
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" ASC LIMIT 1[0m  [["story_id", 607]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "contributions"
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:28:13.088416"], ["updated_at", "2015-05-15 07:28:13.088416"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:28:13.091819"], ["updated_at", "2015-05-15 07:28:13.091819"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 608], ["updated_at", "2015-05-15 07:28:13.093955"], ["id", 706]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by ContributionsController#create as HTML
  Parameters: {"contribution"=>{"content"=>"Content...sdfdsfhdskhf"}, "story_id"=>"608"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 608]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:28:13.100581"], ["updated_at", "2015-05-15 07:28:13.100581"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 608], ["updated_at", "2015-05-15 07:28:13.104283"], ["id", 200]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 3.3ms)
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "contributions"
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "stories"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#index as JSON
Geokit is using the domain: test.host
  [1m[35mStory Load (0.8ms)[0m  SELECT "stories".* FROM "stories"
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.8ms)
  [1m[36mStory Load (0.5ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:28:13.125286"], ["updated_at", "2015-05-15 07:28:13.125286"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:28:13.134919"], ["updated_at", "2015-05-15 07:28:13.134919"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories"  ORDER BY "stories"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by StoriesController#create as HTML
  Parameters: {"story"=>{"title"=>"Supernatural Winnipeg", "contribution_limit"=>"12"}}
Geokit is using the domain: test.host
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Supernatural Winnipeg"], ["contribution_limit", 12], ["completed", "f"], ["created_at", "2015-05-15 07:28:13.142334"], ["updated_at", "2015-05-15 07:28:13.142334"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:28:13.149705"], ["updated_at", "2015-05-15 07:28:13.149705"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:28:13.152930"], ["updated_at", "2015-05-15 07:28:13.152930"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 612], ["updated_at", "2015-05-15 07:28:13.154655"], ["id", 707]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:28:13.157373"], ["updated_at", "2015-05-15 07:28:13.157373"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 612], ["updated_at", "2015-05-15 07:28:13.161093"], ["id", 201]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"612"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.7ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 612]]
  [1m[35mContribution Load (0.8ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 612]]
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.4ms)
  [1m[36mContribution Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "contributions" WHERE "contributions"."story_id" = $1 AND "contributions"."id" = $2 LIMIT 1[0m  [["story_id", 612], ["id", 201]]
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:28:13.187424"], ["updated_at", "2015-05-15 07:28:13.187424"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:28:13.190179"], ["updated_at", "2015-05-15 07:28:13.190179"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 613], ["updated_at", "2015-05-15 07:28:13.191840"], ["id", 708]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:28:13.195083"], ["updated_at", "2015-05-15 07:28:13.195083"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3[0m  [["story_id", 613], ["updated_at", "2015-05-15 07:28:13.197763"], ["id", 202]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"613"}
Geokit is using the domain: test.host
  [1m[36mStory Load (0.6ms)[0m  [1mSELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1[0m  [["id", 613]]
  [1m[35mContribution Load (0.6ms)[0m  SELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1  [["story_id", 613]]
Completed 200 OK in 4ms (Views: 0.5ms | ActiveRecord: 1.2ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:28:13.209801"], ["updated_at", "2015-05-15 07:28:13.209801"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stories" ("title", "contribution_limit", "completed", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Title"], ["contribution_limit", 10], ["completed", "f"], ["created_at", "2015-05-15 07:28:13.212476"], ["updated_at", "2015-05-15 07:28:13.212476"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4  [["locatable_type", "Story"], ["locatable_id", 614], ["updated_at", "2015-05-15 07:28:13.214065"], ["id", 709]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "contributions" ("content", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["content", "Content...sdfdsfhdskhf"], ["created_at", "2015-05-15 07:28:13.217536"], ["updated_at", "2015-05-15 07:28:13.217536"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "contributions" SET "story_id" = $1, "updated_at" = $2 WHERE "contributions"."id" = $3  [["story_id", 614], ["updated_at", "2015-05-15 07:28:13.220992"], ["id", 203]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"614"}
Geokit is using the domain: test.host
  [1m[35mStory Load (0.4ms)[0m  SELECT  "stories".* FROM "stories" WHERE "stories"."id" = $1 LIMIT 1  [["id", 614]]
  [1m[36mContribution Load (0.6ms)[0m  [1mSELECT  "contributions".* FROM "contributions" WHERE "contributions"."story_id" = $1  ORDER BY "contributions"."id" DESC LIMIT 1[0m  [["story_id", 614]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mStory Load (0.4ms)[0m  [1mSELECT "stories".* FROM "stories"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:28:13.235154"], ["updated_at", "2015-05-15 07:28:13.235154"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:28:13.239189"], ["updated_at", "2015-05-15 07:28:13.239189"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:28:13.242249"], ["updated_at", "2015-05-15 07:28:13.242249"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLocation Load (1.4ms)[0m  SELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -36], ["lng", 174], ["created_at", "2015-05-15 07:28:13.251052"], ["updated_at", "2015-05-15 07:28:13.251052"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["lat", -41], ["lng", 174], ["created_at", "2015-05-15 07:28:13.254416"], ["updated_at", "2015-05-15 07:28:13.254416"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "locations" ("lat", "lng", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lat", -41], ["lng", 173], ["created_at", "2015-05-15 07:28:13.256773"], ["updated_at", "2015-05-15 07:28:13.256773"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:28:13.259854"], ["updated_at", "2015-05-15 07:28:13.259854"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 615], ["updated_at", "2015-05-15 07:28:13.262837"], ["id", 713]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:28:13.267972"], ["updated_at", "2015-05-15 07:28:13.267972"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 616], ["updated_at", "2015-05-15 07:28:13.271116"], ["id", 714]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stories" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-05-15 07:28:13.274182"], ["updated_at", "2015-05-15 07:28:13.274182"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "locations" SET "locatable_type" = $1, "locatable_id" = $2, "updated_at" = $3 WHERE "locations"."id" = $4[0m  [["locatable_type", "Story"], ["locatable_id", 617], ["updated_at", "2015-05-15 07:28:13.276226"], ["id", 715]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLocation Load (0.9ms)[0m  [1mSELECT  "locations".* FROM "locations"  ORDER BY 
          (ACOS(least(1,COS(-0.7155849933176751)*COS(3.036872898470133)*COS(RADIANS(locations.lat))*COS(RADIANS(locations.lng))+
          COS(-0.7155849933176751)*SIN(3.036872898470133)*COS(RADIANS(locations.lat))*SIN(RADIANS(locations.lng))+
          SIN(-0.7155849933176751)*SIN(RADIANS(locations.lat))))*6376.77271)
          DESC LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "stories"
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "locations"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
